/*
 *
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x
 *                    x:::::x  x:::::x
 *                     x:::::xx:::::x
 *                      x::::::::::x
 *                       x::::::::x
 *                       x::::::::x
 *                      x::::::::::x
 *                     x:::::xx:::::x
 *                    x:::::x  x:::::x
 *                   x:::::x    x:::::x
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *
 *                  http://www.goXTK.com
 *
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 *
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 *
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/google-closure-library/master/LICENSE
 *
 *  - zlib.js, the ultimate gzip/zlib javascript implementation (https://github.com/imaya/zlib.js)
 *    LICENSE: https://raw.github.com/imaya/zlib.js/master/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function j(a){throw a;}var n=void 0,p=!0,r=null,s=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var u,ca=ca||{},da=this;function ea(a){return a!==n}function ga(a){return"string"==typeof a}function y(a){return"number"==typeof a}
function D(a,b,c){a=a.split(".");c=c||da;!(a[0]in c)&&"undefined"!=typeof c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&ea(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}D("goog.DEBUG",p);D("goog.LOCALE","en");D("goog.TRUSTED_SITE",p);D("goog.STRICT_MODE_COMPATIBLE",s);D("goog.DISALLOW_TEST_ONLY_CODE",!ca.Ja);D("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",s);D("goog.ENABLE_DEBUG_LOADER",p);function ha(){}D("goog.LOAD_MODULE_USING_EVAL",p);
D("goog.SEAL_MODULE_EXPORTS",ca.Ja);D("goog.TRANSPILE","detect");D("goog.TRANSPILER","transpile.js");
function ja(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ka(a){return"array"==ja(a)}function la(a){var b=ja(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ma(a){return"function"==ja(a)}function oa(a){var b=typeof a;return"object"==b&&a!=r||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),qa=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}
function ta(a,b,c){a||j(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return ua.apply(r,arguments)}
function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var wa=ca.Zf&&Date.now||function(){return+new Date};function F(a,b){D(a,b,n)}function G(a,b){function c(){}c.prototype=b.prototype;a.n=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.wg=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];b.prototype[c].apply(a,g)}}
D("goog.defineClass.SEAL_CLASS_INSTANCES",ca.Ja);function xa(a,b,c){this.Fa=this.Ea=this.Da=0;3==arguments.length?(this.Da=Number(a),this.Ea=Number(b),this.Fa=Number(c)):a instanceof xa?(this.Da=Number(a.x()),this.Ea=Number(a.y()),this.Fa=Number(a.b())):(this.Da=Number(a[0]),this.Ea=Number(a[1]),this.Fa=Number(a[2]))}
xa.prototype={h:function(){return new xa(this.Da,this.Ea,this.Fa)},Ib:function(a){return this.Da*a.x()+this.Ea*a.y()+this.Fa*a.b()},ge:function(a,b){return ya(this,za(Ba(a,this),b))},length:function(){return Math.sqrt(this.Ib(this))},dc:function(a){return new xa(this.Ea*a.b()-this.Fa*a.y(),this.Fa*a.x()-this.Da*a.b(),this.Da*a.y()-this.Ea*a.x())},x:t("Da"),y:t("Ea"),b:t("Fa")};function Ca(a){var b=a.length();return new xa(a.Da/b,a.Ea/b,a.Fa/b)}
function za(a,b){return new xa(a.Da*b,a.Ea*b,a.Fa*b)}function Ba(a,b){return new xa(a.Da-b.x(),a.Ea-b.y(),a.Fa-b.b())}function ya(a,b){return new xa(a.Da+b.x(),a.Ea+b.y(),a.Fa+b.b())}function Da(a){return new xa(-a.Da,-a.Ea,-a.Fa)};var H=H||{};H.vk=p;H.ra=function(a){eval("X.DEV === undefined")||window.console.time(a)};H.na=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.Rh=0;this.nk=function(){return this.Rh++}};function Ea(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c]}}var Fa=window.vh;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&j(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var Ga=0,Ha=["ms","moz","webkit","o"],Ia=0;Ia<Ha.length&&!window.requestAnimationFrame;++Ia)window.requestAnimationFrame=window[Ha[Ia]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Ha[Ia]+"CancelAnimationFrame"]||window[Ha[Ia]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-Ga)),d=window.setTimeout(function(){a(b+c)},c);Ga=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});
"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){a===n&&j(Error("Not enough arguments."));var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,h=0;g<c;++g,++h)f[h]=e[g];return d});F("$",Fa);F("Function.prototype.bind",Function.prototype.bind);
F("window.requestAnimationFrame",window.requestAnimationFrame);F("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ka={},La;function Ma(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ma);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a));this.zl=p}G(Ma,Error);Ma.prototype.name="CustomError";var Na={};D("goog.asserts.ENABLE_ASSERTS",ca.Ja);function Oa(a,b){for(var c=a.split("%s"),d="",e=c.length-1,f=0;f<e;f++)d+=c[f]+(f<b.length?b[f]:"%s");Ma.call(this,d+c[e]);this.ul=a}G(Oa,Ma);Oa.prototype.name="AssertionError";function Pa(a,b){Na.wk&&j(new Oa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Qa={};var Ra="closure_listenable_"+(1E6*Math.random()|0);function Sa(a){return!(!a||!a[Ra])}var Ta=0;function Ua(a,b,c,d,e,f){Ua.xk&&(this.hi=Error().stack);this.jc=a;this.me=b;this.src=c;this.type=d;this.capture=!!e;this.ce=f;this.key=++Ta;this.Gc=this.Qd=s}D("goog.events.Listener.ENABLE_MONITORING",s);function Va(a){a.Gc=p;a.jc=r;a.me=r;a.src=r;a.ce=r};var Wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Wa.length;f++)c=Wa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function Ya(a){var b=arguments.length;if(1==b&&ka(arguments[0]))return Ya.apply(r,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=p;return c};var Za={};D("goog.NATIVE_ARRAY_PROTOTYPES",ca.Zf);D("goog.array.ASSUME_NATIVE_FUNCTIONS",s);
var ab=ca.Be&&(Za.ze||Array.prototype.indexOf)?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=c==r?0:0>c?Math.max(0,a.length+c):c;if(ga(a))return!ga(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},bb=ca.Be&&(Za.ze||Array.prototype.forEach)?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ga(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},cb=ca.Be&&(Za.ze||Array.prototype.map)?
function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ga(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},db=ca.Be&&(Za.ze||Array.prototype.some)?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ga(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return p;return s};function eb(a,b){var c=ab(a,b),d;(d=0<=c)&&Array.prototype.splice.call(a,c,1);return d};function fb(a){this.src=a;this.fa={};this.td=0}u=fb.prototype;u.add=function(a,b,c,d,e){var f=a.toString();a=this.fa[f];a||(a=this.fa[f]=[],this.td++);var g=gb(a,b,d,e);-1<g?(b=a[g],c||(b.Qd=s)):(b=new Ua(b,r,this.src,f,!!d,e),b.Qd=c,a.push(b));return b};u.remove=function(a,b,c,d){a=a.toString();if(!(a in this.fa))return s;var e=this.fa[a];b=gb(e,b,c,d);return-1<b?(Va(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.fa[a],this.td--),p):s};
function hb(a,b){var c=b.type;c in a.fa&&eb(a.fa[c],b)&&(Va(b),0==a.fa[c].length&&(delete a.fa[c],a.td--))}u.Fc=function(a){a=a&&a.toString();var b=0,c;for(c in this.fa)if(!a||c==a){for(var d=this.fa[c],e=0;e<d.length;e++)++b,Va(d[e]);delete this.fa[c];this.td--}return b};u.kd=function(a,b,c,d){a=this.fa[a.toString()];var e=-1;a&&(e=gb(a,b,c,d));return-1<e?a[e]:r};
u.de=function(a,b){var c=ea(a),d=c?a.toString():"",e=ea(b),f;a:{f=this.fa;var g=function(a){for(var f=0;f<a.length;++f)if((!c||a[f].type==d)&&(!e||a[f].capture==b))return p;return s},h;for(h in f)if(g.call(n,f[h])){f=p;break a}f=s}return f};function gb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.Gc&&f.jc==b&&f.capture==!!c&&f.ce==d)return e}return-1};var ib={};D("goog.string.DETECT_DOUBLE_ESCAPING",s);D("goog.string.FORCE_NON_DOM_HTML_UNESCAPING",s);var jb=ca.Zf&&String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};
function kb(a){if(!lb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(mb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ob,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(pb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(qb,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(rb,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(sb,"&#0;"));ib.Ih&&-1!=a.indexOf("e")&&(a=a.replace(tb,"&#101;"));return a}var mb=/&/g,ob=/</g,pb=/>/g,qb=/"/g,rb=/'/g,sb=/\x00/g,tb=/e/g,lb=ib.Ih?/[\x00&<>"'e]/:/[\x00&<>"']/;
function ub(a,b){for(var c=0,d=jb(String(a)).split("."),e=jb(String(b)).split("."),f=Math.max(d.length,e.length),g=0;0==c&&g<f;g++){var h=d[g]||"",k=e[g]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;c=((0==h[1].length?0:parseInt(h[1],10))<(0==k[1].length?0:parseInt(k[1],10))?-1:(0==h[1].length?0:parseInt(h[1],10))>(0==k[1].length?0:parseInt(k[1],10))?1:0)||((0==h[2].length)<(0==k[2].length)?-1:(0==h[2].length)>(0==
k[2].length)?1:0)||(h[2]<k[2]?-1:h[2]>k[2]?1:0);h=h[3];k=k[3]}while(0==c)}return c};var vb;a:{var wb=da.navigator;if(wb){var xb=wb.userAgent;if(xb){vb=xb;break a}}vb=""}function M(a){return-1!=vb.indexOf(a)};function yb(){return M("iPhone")&&!M("iPod")&&!M("iPad")}function zb(){return yb()||M("iPad")||M("iPod")};function Ab(){return(M("Chrome")||M("CriOS"))&&!M("Edge")};function Bb(a){Bb[" "](a);return a}Bb[" "]=ha;function Cb(a,b){try{return Bb(a[b]),p}catch(c){}return s};var Db={};D("goog.userAgent.ASSUME_IE",s);D("goog.userAgent.ASSUME_EDGE",s);D("goog.userAgent.ASSUME_GECKO",s);D("goog.userAgent.ASSUME_WEBKIT",s);D("goog.userAgent.ASSUME_MOBILE_WEBKIT",s);D("goog.userAgent.ASSUME_OPERA",s);D("goog.userAgent.ASSUME_ANY_VERSION",s);
var Eb=Db.Uf||Db.Tf||Db.yh||Db.Bh||Db.Eh||Db.Wf,Fb=Eb?Db.Wf:M("Opera"),Gb=Eb?Db.Uf:M("Trident")||M("MSIE"),Hb=Eb?Db.Tf:M("Edge"),Ib=Hb||Gb,Jb=Eb?Db.yh:M("Gecko")&&!(-1!=vb.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Kb=Eb?Db.Eh||Db.Bh:-1!=vb.toLowerCase().indexOf("webkit")&&!M("Edge");D("goog.userAgent.ASSUME_MAC",s);D("goog.userAgent.ASSUME_WINDOWS",s);D("goog.userAgent.ASSUME_LINUX",s);D("goog.userAgent.ASSUME_X11",s);D("goog.userAgent.ASSUME_ANDROID",s);
D("goog.userAgent.ASSUME_IPHONE",s);D("goog.userAgent.ASSUME_IPAD",s);D("goog.userAgent.ASSUME_IPOD",s);var Lb=Db.Ah||Db.Fh||Db.zh||Db.tk||Db.ye||Db.wd||Db.vd||Db.Vf,Mb=Lb?Db.Ah:M("Macintosh"),Nb=Lb?Db.Fh:M("Windows"),Ob=Lb?Db.zh:M("Linux")||M("CrOS"),Pb=Lb?Db.ye:M("Android"),Qb=Lb?Db.wd:yb(),Rb=Lb?Db.vd:M("iPad"),Sb=Lb?Db.Vf:M("iPod"),Tb=Lb?Db.wd||Db.vd||Db.Vf:zb();function Ub(){var a=da.document;return a?a.documentMode:n}var Vb;
a:{var Wb="",Xb=function(){var a=vb;if(Jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Hb)return/Edge\/([\d\.]+)/.exec(a);if(Gb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Kb)return/WebKit\/(\S+)/.exec(a);if(Fb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Xb&&(Wb=Xb?Xb[1]:"");if(Gb){var Yb=Ub();if(Yb!=r&&Yb>parseFloat(Wb)){Vb=String(Yb);break a}}Vb=Wb}var Zb={};function $b(a){var b;if(!(b=Db.rk))b=Object.prototype.hasOwnProperty.call(Zb,a)?Zb[a]:Zb[a]=0<=ub(Vb,a);return b}
var bc=da.document,cc=!bc||!Gb?n:Ub()||("CSS1Compat"==bc.compatMode?parseInt(Vb,10):5);var dc=!Gb||9<=Number(cc),ec=Gb&&!$b("9");!Kb||$b("528");Jb&&$b("1.9b")||Gb&&$b("8")||Fb&&$b("9.5")||Kb&&$b("528");Jb&&!$b("8")||Gb&&$b("9");var fc;if(!da.addEventListener||!Object.defineProperty)fc=s;else{var gc=s,hc=Object.defineProperty({},"passive",{get:function(){gc=p}});da.addEventListener("test",ha,hc);da.removeEventListener("test",ha,hc);fc=gc};D("goog.debug.LOGGING_ENABLED",ca.Ja);D("goog.debug.FORCE_SLOPPY_STACKS",s);var kc=ca.Ja&&Object.freeze||function(a){return a};function lc(){lc.Ae!=mc&&(lc.yk&&(this.hi=Error().stack),nc[this[pa]||(this[pa]=++qa)]=this);this.gd=this.gd;this.kb=this.kb}var mc=0;D("goog.Disposable.MONITORING_MODE",0);D("goog.Disposable.INCLUDE_STACK_ON_CREATION",p);var nc={};lc.prototype.gd=s;
lc.prototype.Bc=function(){if(!this.gd&&(this.gd=p,this.ca(),lc.Ae!=mc)){var a=this[pa]||(this[pa]=++qa);1==lc.Ae&&!nc.hasOwnProperty(a)&&j(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));lc.Ae!=mc&&(this.kb&&0<this.kb.length)&&j(Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method."));delete nc[a]}};lc.prototype.ca=function(){if(this.kb)for(;this.kb.length;)this.kb.shift()()};
function oc(a){a&&"function"==typeof a.Bc&&a.Bc()};function pc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.kc=s;this.oh=p}pc.prototype.stopPropagation=function(){this.kc=p};pc.prototype.preventDefault=function(){this.defaultPrevented=p;this.oh=s};function qc(a,b){qc.wg(this,"constructor",a?a.type:"");this.relatedTarget=this.currentTarget=this.target=r;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=s;this.state=r;this.Cj=s;this.pointerId=0;this.pointerType="";this.ib=r;a&&this.Ha(a,b)}G(qc,pc);var rc=kc({2:"touch",3:"pen",4:"mouse"});
qc.prototype.Ha=function(a,b){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:r;this.target=a.target||a.srcElement;this.currentTarget=b;var e=a.relatedTarget;e?Jb&&(Cb(e,"nodeName")||(e=r)):"mouseover"==c?e=a.fromElement:"mouseout"==c&&(e=a.toElement);this.relatedTarget=e;d===r?(this.offsetX=Kb||a.offsetX!==n?a.offsetX:a.layerX,this.offsetY=Kb||a.offsetY!==n?a.offsetY:a.layerY,this.clientX=a.clientX!==n?a.clientX:a.pageX,this.clientY=a.clientY!==n?a.clientY:a.pageY,this.screenX=a.screenX||
0,this.screenY=a.screenY||0):(this.clientX=d.clientX!==n?d.clientX:d.pageX,this.clientY=d.clientY!==n?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Cj=Mb?a.metaKey:a.ctrlKey;this.pointerId=a.pointerId||0;this.pointerType=ga(a.pointerType)?a.pointerType:rc[a.pointerType]||
"";this.state=a.state;this.ib=a;a.defaultPrevented&&this.preventDefault()};qc.prototype.stopPropagation=function(){qc.n.stopPropagation.call(this);this.ib.stopPropagation?this.ib.stopPropagation():this.ib.cancelBubble=p};qc.prototype.preventDefault=function(){qc.n.preventDefault.call(this);var a=this.ib;if(a.preventDefault)a.preventDefault();else if(a.returnValue=s,ec)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var sc="closure_lm_"+(1E6*Math.random()|0),tc={};D("goog.events.CAPTURE_SIMULATION_MODE",2);var uc=0;function O(a,b,c,d,e){if(d&&d.xl)return vc(a,b,c,d,e);if(ka(b)){for(var f=0;f<b.length;f++)O(a,b[f],c,d,e);return r}c=wc(c);return Sa(a)?a.ic(b,c,oa(d)?!!d.capture:!!d,e):xc(a,b,c,s,d,e)}
function xc(a,b,c,d,e,f){b||j(Error("Invalid event type"));var g=oa(e)?!!e.capture:!!e;if(g&&!dc){if(0==Qa.Xf)return Pa("Can not register capture listener in IE8-."),r;if(1==Qa.Xf)return r}var h=yc(a);h||(a[sc]=h=new fb(a));c=h.add(b,c,d,g,f);if(c.me)return c;var k=zc,l=dc?function(a){return k.call(l.src,l.jc,a)}:function(a){a=k.call(l.src,l.jc,a);if(!a)return a};d=l;c.me=d;d.src=a;d.jc=c;a.addEventListener?(fc||(e=g),e===n&&(e=s),a.addEventListener(b.toString(),d,e)):a.attachEvent?a.attachEvent(b.toString()in
tc?tc[b.toString()]:tc[b.toString()]="on"+b.toString(),d):a.addListener&&a.removeListener?a.addListener(d):j(Error("addEventListener and attachEvent are unavailable."));uc++;return c}function vc(a,b,c,d,e){if(ka(b)){for(var f=0;f<b.length;f++)vc(a,b[f],c,d,e);return r}c=wc(c);return Sa(a)?a.Yg(b,c,oa(d)?!!d.capture:!!d,e):xc(a,b,c,p,d,e)}
function Ac(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)Ac(a,b[f],c,d,e);else if(d=oa(d)?!!d.capture:!!d,c=wc(c),Sa(a))a.Qf(b,c,d,e);else if(a&&(a=yc(a)))(b=a.kd(b,c,d,e))&&Bc(b)}
function Bc(a){if(!y(a)&&a&&!a.Gc){var b=a.src;if(Sa(b))hb(b.Va,a);else{var c=a.type,d=a.me;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(c in tc?tc[c]:tc[c]="on"+c,d):b.addListener&&b.removeListener&&b.removeListener(d);uc--;(c=yc(b))?(hb(c,a),0==c.td&&(c.src=r,b[sc]=r)):Va(a)}}}function Cc(a,b,c,d){var e=p;if(a=yc(a))if(b=a.fa[b.toString()]){b=b.concat();for(a=0;a<b.length;a++){var f=b[a];f&&(f.capture==c&&!f.Gc)&&(f=Dc(f,d),e=e&&f!==s)}}return e}
function Dc(a,b){var c=a.jc,d=a.ce||a.src;a.Qd&&Bc(a);return c.call(d,b)}
function zc(a,b){if(a.Gc)return p;if(!dc){var c;if(!(c=b))a:{c=["window","event"];for(var d=da,e=0;e<c.length;e++)if(d=d[c[e]],d==r){c=r;break a}c=d}e=c;c=new qc(e,this);d=p;if(2==Qa.Xf){if(!(0>e.keyCode||e.returnValue!=n)){a:{var f=s;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(g){f=p}if(f||e.returnValue==n)e.returnValue=p}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,h=e.length-1;!c.kc&&0<=h;h--){c.currentTarget=e[h];var k=Cc(e[h],f,p,c),d=d&&k}for(h=0;!c.kc&&h<e.length;h++)c.currentTarget=
e[h],k=Cc(e[h],f,s,c),d=d&&k}}else d=Dc(a,c);return d}return Dc(a,new qc(b,this))}function yc(a){a=a[sc];return a instanceof fb?a:r}var Ec="__closure_events_fn_"+(1E9*Math.random()>>>0);function wc(a){if(ma(a))return a;a[Ec]||(a[Ec]=function(b){return a.handleEvent(b)});return a[Ec]};function Fc(){lc.call(this);this.Va=new fb(this);this.Yh=this;this.ke=r}G(Fc,lc);Fc.prototype[Ra]=p;u=Fc.prototype;u.Gf=ba("ke");u.addEventListener=function(a,b,c,d){O(this,a,b,c,d)};u.removeEventListener=function(a,b,c,d){Ac(this,a,b,c,d)};
u.dispatchEvent=function(a){var b,c=this.ke;if(c)for(b=[];c;c=c.ke)b.push(c);var c=this.Yh,d=a.type||a;if(ga(a))a=new pc(a,c);else if(a instanceof pc)a.target=a.target||c;else{var e=a;a=new pc(d,c);Xa(a,e)}var e=p,f;if(b)for(var g=b.length-1;!a.kc&&0<=g;g--)f=a.currentTarget=b[g],e=Gc(f,d,p,a)&&e;a.kc||(f=a.currentTarget=c,e=Gc(f,d,p,a)&&e,a.kc||(e=Gc(f,d,s,a)&&e));if(b)for(g=0;!a.kc&&g<b.length;g++)f=a.currentTarget=b[g],e=Gc(f,d,s,a)&&e;return e};
u.ca=function(){Fc.n.ca.call(this);!this.Va||this.Va.Fc(n);this.ke=r};u.ic=function(a,b,c,d){return this.Va.add(String(a),b,s,c,d)};u.Yg=function(a,b,c,d){return this.Va.add(String(a),b,p,c,d)};u.Qf=function(a,b,c,d){return this.Va.remove(String(a),b,c,d)};function Gc(a,b,c,d){b=a.Va.fa[String(b)];if(!b)return p;b=b.concat();for(var e=p,f=0;f<b.length;++f){var g=b[f];if(g&&!g.Gc&&g.capture==c){var h=g.jc,k=g.ce||g.src;g.Qd&&hb(a.Va,g);e=h.call(k,d)!==s&&e}}return e&&d.oh!=s}
u.kd=function(a,b,c,d){return this.Va.kd(String(a),b,c,d)};u.de=function(a,b){return this.Va.de(ea(a)?String(a):n,b)};function Q(){Fc.call(this);this.c="base";this.ta=window["X.counter"].nk();this.g=s}G(Q,Fc);Q.prototype.__defineGetter__("classname",t("c"));Q.prototype.__defineGetter__("id",t("ta"));F("X.base",Q);function Hc(a,b){this.Ca=new xa(a);this.aa=new xa(b)}Hc.prototype={h:function(){return new Hc(this.Ca.h(),this.aa.h())},gc:function(){this.aa=Da(this.aa)}};function Ic(a,b){this.aa=a;this.ud=b}Ic.prototype={h:function(){return new Ic(this.aa.h(),this.ud)},gc:function(){this.aa=Da(this.aa);this.ud=-this.ud}};function Jc(a,b){this.ob=a;this.te=b;var c=a[0].Ca,d=a[2].Ca,d=Ca(Ba(a[1].Ca,c).dc(Ba(d,c)));this.Ba=new Ic(d,d.Ib(c))}Jc.prototype={h:function(){var a=this.ob.map(function(a){return a.h()});return new Jc(a,this.te)},gc:function(){this.ob.reverse().map(function(a){a.gc()});this.Ba.gc()}};
function Kc(a,b,c,d,e,f){for(var g=0,h=[],k=0;k<a.ob.length;k++){var l=b.aa.Ib(a.ob[k].Ca)-b.ud,l=-1E-5>l?2:1E-5<l?1:0,g=g|l;h.push(l)}switch(g){case 0:(0<b.aa.Ib(a.Ba.aa)?c:d).push(a);break;case 1:e.push(a);break;case 2:f.push(a);break;case 3:c=[];d=[];for(k=0;k<a.ob.length;k++){var m=(k+1)%a.ob.length,l=h[k],q=h[m],g=a.ob[k],m=a.ob[m];2!=l&&c.push(g);1!=l&&d.push(2!=l?g.h():g);3==(l|q)&&(l=(b.ud-b.aa.Ib(g.Ca))/b.aa.Ib(Ba(m.Ca,g.Ca)),l=new Hc(g.Ca.ge(m.Ca,l),g.aa.ge(m.aa,l)),c.push(l),d.push(l.h()))}3<=
c.length&&e.push(new Jc(c,a.te));3<=d.length&&f.push(new Jc(d,a.te))}};function Lc(a){this.ba=this.da=this.Ba=r;this.B=[];a&&Mc(this,a)}Lc.prototype={h:function(){var a=new Lc,b=this.Ba&&this.Ba.h();a.Ba=b;b=this.da&&this.da.h();a.da=b;b=this.ba&&this.ba.h();a.ba=b;a.re(this.B.map(function(a){return a.h()}));return a},F:function(){for(var a=0;a<this.B.length;a++)this.B[a].gc();this.Ba.gc();this.da&&this.da.F();this.ba&&this.ba.F();a=this.da;this.da=this.ba;this.ba=a},re:ba("B")};
function Mc(a,b){if(b.length){a.Ba||(a.Ba=b[0].Ba.h());for(var c=[],d=[],e=0;e<b.length;e++)Kc(b[e],a.Ba,a.B,a.B,c,d);c.length&&(a.da||(a.da=new Lc),Mc(a.da,c));d.length&&(a.ba||(a.ba=new Lc),Mc(a.ba,d))}}function Nc(a){var b=a.B.slice();a.da&&(b=b.concat(Nc(a.da)));a.ba&&(b=b.concat(Nc(a.ba)));return b}function Oc(a,b){a.B=Pc(b,a.B);a.da&&Oc(a.da,b);a.ba&&Oc(a.ba,b)}
function Pc(a,b){if(!a.Ba)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Kc(b[e],a.Ba,c,d,c,d);a.da&&(c=Pc(a.da,c));d=a.ba?Pc(a.ba,d):[];return c.concat(d)};function Qc(){this.B=[]}function Rc(a){var b=new Qc;b.re(a);return b}
Qc.prototype={h:function(){var a=new Qc;a.re(this.B.map(function(a){return a.h()}));return a},Pf:function(a){var b=new Lc(this.h().B);a=new Lc(a.h().B);Oc(b,a);Oc(a,b);a.F();Oc(a,b);a.F();Mc(b,Nc(a));return Rc(Nc(b))},ma:function(a){var b=new Lc(this.h().B);a=new Lc(a.h().B);b.F();Oc(b,a);Oc(a,b);a.F();Oc(a,b);a.F();Mc(b,Nc(a));b.F();return Rc(Nc(b))},pf:function(a){var b=new Lc(this.h().B);a=new Lc(a.h().B);b.F();Oc(a,b);a.F();Oc(b,a);Oc(a,b);Mc(b,Nc(a));b.F();return Rc(Nc(b))},inverse:function(){var a=
this.h();a.B.map(function(a){a.gc()});return a},re:ba("B")};function Sc(){Q.call(this);this.c="indexer";this.Xe=[];this.ll=[];this.wb={}}G(Sc,Q);Sc.prototype.add=function(a){a==r&&j(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.wb||(this.wb[b]=this.Xe.length,this.Xe.push(a));return this.wb[b]};Sc.prototype.unique=t("Xe");function Tc(a){Q.call(this);this.c="file";this.Gd=a;this.g=p}G(Tc,Q);function Uc(){this.Nb=this.q=r}Uc.prototype.__defineSetter__("file",function(a){this.q=a==r||ka(a)&&0==a.length?r:ka(a)?1==a.length?new Tc(a[0]):cb(a,function(a){var c=new R;c.q=new Tc(a);return c}):new Tc(a)});Uc.prototype.__defineGetter__("file",function(){return!this.q?"":ka(this.q)?this.q.map(function(a){return a.q.Gd}):this.q.Gd});Uc.prototype.__defineGetter__("filedata",t("Nb"));
Uc.prototype.__defineSetter__("filedata",function(a){if(a==r||ka(a)&&0==a.length)this.Nb=r;if(ka(a))if(1==a.length)this.Nb=a[0];else{var b=this.q.length,c;for(c=0;c<b;c++)this.q[c].Nb=a[c]}else this.Nb=a});D("goog.functions.CACHE_RETURN_VALUE",p);function Vc(a,b){this.K={};this.v=[];this.Sf=this.cc=0;var c=arguments.length;if(1<c){c%2&&j(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Ze(a)}u=Vc.prototype;u.Xd=t("cc");u.Wa=function(){Wc(this);for(var a=[],b=0;b<this.v.length;b++)a.push(this.K[this.v[b]]);return a};function Xc(a){Wc(a);return a.v.concat()}function Yc(a){for(var b=0;b<a.v.length;b++){var c=a.v[b];if(Zc(a.K,c)&&a.K[c]==s)return p}return s}
u.clear=function(){this.K={};this.Sf=this.cc=this.v.length=0};u.remove=function(a){return Zc(this.K,a)?(delete this.K[a],this.cc--,this.Sf++,this.v.length>2*this.cc&&Wc(this),p):s};function Wc(a){if(a.cc!=a.v.length){for(var b=0,c=0;b<a.v.length;){var d=a.v[b];Zc(a.K,d)&&(a.v[c++]=d);b++}a.v.length=c}if(a.cc!=a.v.length){for(var e={},c=b=0;b<a.v.length;)d=a.v[b],Zc(e,d)||(a.v[c++]=d,e[d]=1),b++;a.v.length=c}}u.get=function(a,b){return Zc(this.K,a)?this.K[a]:b};
u.set=function(a,b){Zc(this.K,a)||(this.cc++,this.v.push(a),this.Sf++);this.K[a]=b};u.Ze=function(a){if(a instanceof Vc)for(var b=Xc(a),c=0;c<b.length;c++)this.set(b[c],a.get(b[c]));else for(b in a)this.set(b,a[b])};u.forEach=function(a,b){for(var c=Xc(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};u.h=function(){return new Vc(this)};u.qh=function(){for(var a=new Vc,b=0;b<this.v.length;b++){var c=this.v[b];a.set(this.K[c],c)}return a};
function Zc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function $c(){Q.call(this);this.c="colortable";this.wb=new Vc;Ea(this,new Uc)}G($c,Q);$c.prototype.add=function(a,b,c,d,e,f){(!y(a)||!y(c)||!y(d)||!y(e)||!y(f))&&j(Error("Invalid color table entry."));this.wb.set(a,[b,c,d,e,f]);this.g=p};function ad(a,b,c){this.x=ea(a)?a:0;this.y=ea(b)?b:0;this.b=ea(c)?c:0}ad.prototype.h=function(){return new ad(this.x,this.y,this.b)};ca.Ja&&(ad.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.b+")"});function S(a,b,c){this.x=a;this.y=b;this.b=c}G(S,ad);u=S.prototype;u.h=function(){return new S(this.x,this.y,this.b)};u.jb=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};u.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};u.F=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};u.normalize=function(){return this.scale(1/this.jb())};u.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
u.ma=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};function bd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return c*c+d*d+e*e}function cd(a,b){return new S(a.x+b.x,a.y+b.y,a.b+b.b)}function dd(a,b){return new S(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};H.f=S;u=H.f.prototype;u.h=S.prototype.h;u.jb=S.prototype.jb;u.scale=S.prototype.scale;u.F=S.prototype.F;u.add=S.prototype.add;u.ma=S.prototype.ma;u.normalize=function(){var a=this.jb();return 0==a?this.scale(0):this.scale(1/a)};H.f.Ib=function(a,b){return a.x*b.x+a.y*b.y+a.b*b.b};H.f.dc=dd;H.f.gb=function(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)};H.f.ge=function(a,b,c){return new S(a.x+c*(b.x-a.x),a.y+c*(b.y-a.y),a.b+c*(b.b-a.b))};H.f.prototype.__defineGetter__("xx",t("x"));
H.f.prototype.__defineGetter__("yy",t("y"));H.f.prototype.__defineGetter__("zz",t("b"));F("X.vector",H.f);F("X.vector.prototype.clone",H.f.prototype.h);F("X.vector.prototype.magnitude",H.f.prototype.jb);F("X.vector.prototype.scale",H.f.prototype.scale);F("X.vector.prototype.invert",H.f.prototype.F);F("X.vector.prototype.normalize",H.f.prototype.normalize);F("X.vector.prototype.add",H.f.prototype.add);F("X.vector.prototype.subtract",H.f.prototype.ma);F("X.vector.dot",H.f.Ib);F("X.vector.cross",H.f.dc);
F("X.vector.distance",H.f.gb);F("X.vector.lerp",H.f.ge);function ed(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ed.prototype.BYTES_PER_ELEMENT=8;ed.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ed.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{ed.BYTES_PER_ELEMENT=8}catch(fd){}ed.prototype.BYTES_PER_ELEMENT=ed.prototype.BYTES_PER_ELEMENT;ed.prototype.set=ed.prototype.set;ed.prototype.toString=ed.prototype.toString;F("Float64Array",ed)};function gd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}gd.prototype.BYTES_PER_ELEMENT=4;gd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};gd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(gd.BYTES_PER_ELEMENT=4,gd.prototype.BYTES_PER_ELEMENT=gd.prototype.BYTES_PER_ELEMENT,gd.prototype.set=gd.prototype.set,gd.prototype.toString=gd.prototype.toString,F("Float32Array",gd));function hd(a,b,c,d,e,f,g,h,k,l,m,q,v,w,x,z,C){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=h;a[7]=k;a[8]=l;a[9]=m;a[10]=q;a[11]=v;a[12]=w;a[13]=x;a[14]=z;a[15]=C;return a}function id(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function jd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function kd(a,b,c,d,e){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=0}function ld(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}
function md(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}function nd(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],f=a[2]*b+a[6]*c+a[10]*d+a[14],g=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=f;a[15]=g;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);H.d={};H.d.Zg=function(a,b,c,d){c=c.ma(b);c.normalize();d=H.f.dc(c,d);d.normalize();var e=H.f.dc(d,c);e.normalize();c.F();kd(a,0,d.x,d.y,d.b);kd(a,1,e.x,e.y,e.b);kd(a,2,c.x,c.y,c.b);nd(a,-b.x,-b.y,-b.b);return a};H.d.Pa=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new H.f((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};H.d.fk=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);md(a,b,d);md(a,c,e);ld(a,b,e);ld(a,c,d);return a};
H.d.ek=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);jd(a,b,d);jd(a,c,e);id(a,b,e);id(a,c,d);return a};H.d.nd=function(){var a=new Float32Array(16);a[0]=a[5]=a[10]=a[15]=1;return a};H.d.h=function(a){var b=new Float32Array(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
H.d.qh=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=f;b[11]=a[14];b[12]=e;b[13]=g;b[14]=h}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
H.d.mi=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],m=a[9],q=a[10],v=a[11],w=a[12],x=a[13],z=a[14];a=a[15];return(b*g-c*f)*(q*a-v*z)-(b*h-d*f)*(m*a-v*x)+(b*k-e*f)*(m*z-q*x)+(c*h-d*g)*(l*a-v*w)-(c*k-e*g)*(l*z-q*w)+(d*k-e*h)*(l*x-m*w)};
H.d.F=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=a[8],q=a[9],v=a[10],w=a[11],x=a[12],z=a[13],C=a[14],E=a[15],A=c*h-d*g,B=c*k-e*g,J=c*l-f*g,I=d*k-e*h,P=d*l-f*h,K=e*l-f*k,L=m*z-q*x,U=m*C-v*x,Z=m*E-w*x,Y=q*C-v*z,na=q*E-w*z,ra=v*E-w*C,N=A*ra-B*na+J*Y+I*Z-P*U+K*L;if(0==N)return s;N=1/N;b[0]=(h*ra-k*na+l*Y)*N;b[1]=(-d*ra+e*na-f*Y)*N;b[2]=(z*K-C*P+E*I)*N;b[3]=(-q*K+v*P-w*I)*N;b[4]=(-g*ra+k*Z-l*U)*N;b[5]=(c*ra-e*Z+f*U)*N;b[6]=(-x*K+C*J-E*B)*N;b[7]=(m*K-v*J+w*B)*N;b[8]=(g*
na-h*Z+l*L)*N;b[9]=(-c*na+d*Z-f*L)*N;b[10]=(x*P-z*J+E*A)*N;b[11]=(-m*P+q*J-w*A)*N;b[12]=(-g*Y+h*U-k*L)*N;b[13]=(c*Y-d*U+e*L)*N;b[14]=(-x*I+z*B-C*A)*N;b[15]=(m*I-q*B+v*A)*N;return p};H.d.rf=function(a,b,c,d,e){var f=b/2;b=e-d;var g=Math.sin(f);if(0==b||0==g||0==c)return a;f=Math.cos(f)/g;return hd(a,f/c,0,0,0,0,f,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};H.d.Si=function(a,b,c,d,e,f,g){return hd(a,2*f/(c-b),0,0,0,0,2*f/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(g+f)/(g-f),-1,0,0,-(2*g*f)/(g-f),0)};
H.d.Ti=function(a,b,c,d,e,f,g){return hd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(g-f),0,-(c+b)/(c-b),-(e+d)/(e-d),-(g+f)/(g-f),1)};
H.d.multiply=function(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],q=a[8],v=a[9],w=a[10],x=a[11],z=a[12],C=a[13],E=a[14];a=a[15];var A=b[0],B=b[1],J=b[2],I=b[3],P=b[4],K=b[5],L=b[6],U=b[7],Z=b[8],Y=b[9],na=b[10],ra=b[11],N=b[12],ic=b[13],jc=b[14];b=b[15];c[0]=d*A+h*B+q*J+z*I;c[1]=e*A+k*B+v*J+C*I;c[2]=f*A+l*B+w*J+E*I;c[3]=g*A+m*B+x*J+a*I;c[4]=d*P+h*K+q*L+z*U;c[5]=e*P+k*K+v*L+C*U;c[6]=f*P+l*K+w*L+E*U;c[7]=g*P+m*K+x*L+a*U;c[8]=d*Z+h*Y+q*na+z*ra;c[9]=e*Z+k*Y+v*na+C*ra;c[10]=f*Z+
l*Y+w*na+E*ra;c[11]=g*Z+m*Y+x*na+a*ra;c[12]=d*N+h*ic+q*jc+z*b;c[13]=e*N+k*ic+v*jc+C*b;c[14]=f*N+l*ic+w*jc+E*b;c[15]=g*N+m*ic+x*jc+a*b;return c};H.d.translate=nd;H.d.scale=function(a,b,c,d){return hd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
H.d.rotate=function(a,b,c,d,e){var f=a[0],g=a[1],h=a[2],k=a[3],l=a[4],m=a[5],q=a[6],v=a[7],w=a[8],x=a[9],z=a[10],C=a[11],E=Math.cos(b),A=Math.sin(b),B=1-E;b=c*c*B+E;var J=c*d*B+e*A,I=c*e*B-d*A,P=c*d*B-e*A,K=d*d*B+E,L=d*e*B+c*A,U=c*e*B+d*A;c=d*e*B-c*A;e=e*e*B+E;return hd(a,f*b+l*J+w*I,g*b+m*J+x*I,h*b+q*J+z*I,k*b+v*J+C*I,f*P+l*K+w*L,g*P+m*K+x*L,h*P+q*K+z*L,k*P+v*K+C*L,f*U+l*c+w*e,g*U+m*c+x*e,h*U+q*c+z*e,k*U+v*c+C*e,a[12],a[13],a[14],a[15])};
H.d.ne=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],g=a[8],h=a[9],k=a[10],l=a[11],m=Math.cos(b),q=Math.sin(b);a[4]=c*m+g*q;a[5]=d*m+h*q;a[6]=e*m+k*q;a[7]=f*m+l*q;a[8]=c*-q+g*m;a[9]=d*-q+h*m;a[10]=e*-q+k*m;a[11]=f*-q+l*m;return a};H.d.oe=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[8],h=a[9],k=a[10],l=a[11],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+g*-q;a[1]=d*m+h*-q;a[2]=e*m+k*-q;a[3]=f*m+l*-q;a[8]=c*q+g*m;a[9]=d*q+h*m;a[10]=e*q+k*m;a[11]=f*q+l*m;return a};
H.d.pe=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+g*q;a[1]=d*m+h*q;a[2]=e*m+k*q;a[3]=f*m+l*q;a[4]=c*-q+g*m;a[5]=d*-q+h*m;a[6]=e*-q+k*m;a[7]=f*-q+l*m;return a};F("X.matrix.identity",H.d.nd);F("X.matrix.clone",H.d.h);F("X.matrix.transpose",H.d.qh);F("X.matrix.determinant",H.d.mi);F("X.matrix.invert",H.d.F);F("X.matrix.multiply",H.d.multiply);F("X.matrix.multiplyByVector",H.d.Pa);F("X.matrix.makePerspective",H.d.rf);
F("X.matrix.makeFrustum",H.d.Si);F("X.matrix.makeOrtho",H.d.Ti);F("X.matrix.makeLookAt",H.d.Zg);F("X.matrix.translate",H.d.translate);F("X.matrix.scale",H.d.scale);F("X.matrix.rotate",H.d.rotate);F("X.matrix.rotateX",H.d.ne);F("X.matrix.rotateY",H.d.oe);F("X.matrix.rotateZ",H.d.pe);F("X.matrix.swapRows",H.d.fk);F("X.matrix.swapCols",H.d.ek);function od(){Q.call(this);this.c="transform";this.ia=H.d.nd()}G(od,Q);od.prototype.__defineGetter__("matrix",t("ia"));od.prototype.__defineSetter__("matrix",function(a){(a==r||!(a instanceof Float32Array))&&j(Error("Invalid matrix."));this.ia=a;this.p()});u=od.prototype;u.ne=function(a){(!y(a)||-360>a||360<a)&&j(Error("Invalid angle."));H.d.ne(this.ia,a*Math.PI/180);this.p()};u.oe=function(a){(!y(a)||-360>a||360<a)&&j(Error("Invalid angle."));H.d.oe(this.ia,a*Math.PI/180);this.p()};
u.pe=function(a){(!y(a)||-360>a||360<a)&&j(Error("Invalid angle."));H.d.pe(this.ia,a*Math.PI/180);this.p()};u.ik=function(a){y(a)||j(Error("Invalid distance."));H.d.translate(this.ia,a,0,0);this.p()};u.jk=function(a){y(a)||j(Error("Invalid distance."));H.d.translate(this.ia,0,a,0);this.p()};u.kk=function(a){y(a)||j(Error("Invalid distance."));H.d.translate(this.ia,0,0,a);this.p()};function pd(a,b,c){a.ia[b+4*c]*=-1;a.p()}u.ui=function(){pd(this,0,0)};u.vi=function(){pd(this,1,1)};
u.wi=function(){pd(this,2,2)};u.p=function(){this.g=p};F("X.transform",od);F("X.transform.prototype.rotateX",od.prototype.ne);F("X.transform.prototype.rotateY",od.prototype.oe);F("X.transform.prototype.rotateZ",od.prototype.pe);F("X.transform.prototype.translateX",od.prototype.ik);F("X.transform.prototype.translateY",od.prototype.jk);F("X.transform.prototype.translateZ",od.prototype.kk);F("X.transform.prototype.flipX",od.prototype.ui);F("X.transform.prototype.flipY",od.prototype.vi);
F("X.transform.prototype.flipZ",od.prototype.wi);F("X.transform.prototype.modified",od.prototype.p);function qd(){Q.call(this);this.c="texture";this.wa=this.qb=this.q=r;this.Db=this.Eb=0;Ea(this,new Uc)}G(qd,Q);F("X.texture",qd);function T(a,b){Q.call(this);this.c="triplets";this.Tb=Infinity;this.Qb=-Infinity;this.Ub=Infinity;this.Rb=-Infinity;this.Vb=Infinity;this.Sb=-Infinity;this.xd=[0,0,0];this.gg=p;this.z=0;this.N=new Float32Array(a);b!=r&&(this.N=b.N.subarray(0,b.N.length),this.z=this.N.length,this.Tb=b.Tb,this.Qb=b.Qb,this.Ub=b.Ub,this.Rb=b.Rb,this.Vb=b.Vb,this.Sb=b.Sb,this.xd=b.xd.slice(),this.gg=s)}G(T,Q);u=T.prototype;
u.add=function(a,b,c){this.Tb=Math.min(this.Tb,a);this.Qb=Math.max(this.Qb,a);this.Ub=Math.min(this.Ub,b);this.Rb=Math.max(this.Rb,b);this.Vb=Math.min(this.Vb,c);this.Sb=Math.max(this.Sb,c);this.xd=[(this.Tb+this.Qb)/2,(this.Ub+this.Rb)/2,(this.Vb+this.Sb)/2];this.gg=s;this.g=p;this.N[this.z++]=a;this.N[this.z++]=b;this.N[this.z++]=c;return this.z/3};u.lb=function(){if(this.z!=this.N.length){var a=new Float32Array(this.z);a.set(this.N.subarray(0,this.z));this.N=a}};
u.get=function(a){a*=3;return[this.N[a],this.N[a+1],this.N[a+2]]};u.remove=function(){j(Error("Not implemented."))};u.clear=function(){this.N=new Float32Array(this.N.length);this.g=p};T.prototype.__defineGetter__("count",function(){this.lb();return this.N.length/3});T.prototype.__defineGetter__("length",function(){this.lb();return this.N.length});F("X.triplets",T);F("X.triplets.prototype.add",T.prototype.add);F("X.triplets.prototype.resize",T.prototype.lb);F("X.triplets.prototype.get",T.prototype.get);
F("X.triplets.prototype.remove",T.prototype.remove);F("X.triplets.prototype.clear",T.prototype.clear);function rd(){this.ja=sd;this.ac=new od;this.Lb=[1,1,1];this.$b=this.A=this.X=this.j=this.i=r;this.vc=[];this.Ma=p;this.uc=this.Xc=1;this.qc=r;this.Qc=s;this.Y=1;this.M=0}var sd="TRIANGLES";rd.prototype.__defineSetter__("type",function(a){return this.ja=a});rd.prototype.__defineGetter__("type",t("ja"));rd.prototype.__defineGetter__("texture",function(){this.A||(this.A=new qd);return this.A});rd.prototype.__defineGetter__("transform",t("ac"));rd.prototype.__defineGetter__("points",t("i"));
rd.prototype.__defineSetter__("points",ba("i"));rd.prototype.__defineGetter__("normals",t("j"));rd.prototype.__defineSetter__("normals",ba("j"));rd.prototype.__defineGetter__("colors",t("X"));rd.prototype.__defineSetter__("colors",ba("X"));rd.prototype.__defineGetter__("color",t("Lb"));rd.prototype.__defineSetter__("color",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid color."));for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Lb=a;this.g=p});
rd.prototype.__defineGetter__("opacity",t("Y"));rd.prototype.__defineSetter__("opacity",function(a){(!y(a)||1<a||0>a)&&j(Error("Invalid opacity."));for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.Y=a;this.g=p});rd.prototype.__defineGetter__("caption",t("qc"));rd.prototype.__defineSetter__("caption",function(a){this.qc=a;this.g=p});rd.prototype.__defineGetter__("visible",t("Ma"));
rd.prototype.__defineSetter__("visible",function(a){for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.Ma=a;this.g=p});rd.prototype.__defineGetter__("pointsize",t("Xc"));rd.prototype.__defineSetter__("pointsize",function(a){y(a)||j(Error("Invalid point size."));this.Xc=a;this.g=p});rd.prototype.__defineGetter__("magicmode",t("Qc"));rd.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&j(Error("Invalid magic mode setting."));this.Qc=a;this.g=p});
rd.prototype.__defineGetter__("linewidth",t("uc"));rd.prototype.__defineSetter__("linewidth",function(a){y(a)||j(Error("Invalid line width."));this.uc=a;this.g=p});function td(){this.La=Infinity;this.Q=this.Ga=-Infinity;this.U=Infinity;this.zb=[0,0,0];this.xb=[1,1,1]}td.prototype.__defineGetter__("lowerThreshold",t("Q"));td.prototype.__defineSetter__("lowerThreshold",ba("Q"));td.prototype.__defineGetter__("upperThreshold",t("U"));td.prototype.__defineSetter__("upperThreshold",ba("U"));td.prototype.__defineGetter__("min",t("La"));td.prototype.__defineGetter__("max",t("Ga"));td.prototype.__defineGetter__("minColor",t("zb"));
td.prototype.__defineSetter__("minColor",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid min. color."));this.zb=a});td.prototype.__defineGetter__("maxColor",t("xb"));td.prototype.__defineSetter__("maxColor",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid max. color."));this.xb=a});function ud(){Q.call(this);this.c="scalars";this.Lc=this.w=r;this.rg=p;this.Fe=0;Ea(this,new Uc);Ea(this,new td);this.zb=[0,1,0];this.xb=[1,0,0]}G(ud,Q);ud.prototype.__defineGetter__("array",t("w"));ud.prototype.__defineSetter__("array",function(a){this.Lc=this.w=a;this.g=p});ud.prototype.__defineGetter__("interpolation",t("Fe"));ud.prototype.__defineSetter__("interpolation",ba("Fe"));F("X.scalars",ud);function V(a){Q.call(this);this.c="object";this.e=[];this.u=this.Z=r;Ea(this,new rd);a!=r&&this.bc(a)}G(V,Q);
V.prototype.bc=function(a){this.ja=a.ja;this.ac=new od;this.ac.ia=new Float32Array(a.ac.ia);this.Lb=a.Lb.slice();a.i&&(this.i=new T(a.i.length,a.i));a.j&&(this.j=new T(a.j.length,a.j));a.X&&(this.X=new T(a.X.length,a.X));this.A=a.A;this.$b=a.$b;a.q&&(this.q=new Tc((new String(a.q.Gd)).toString()));this.Y=a.Y;this.e.length=0;var b=a.e;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.e.push(new H[b[d].c](b[d]));this.Ma=a.Ma;this.Xc=a.Xc;this.uc=a.uc;a.qc&&(this.qc=(new String(a.qc)).toString());this.Qc=
a.Qc;this.vc=a.vc.slice();this.g=p};V.prototype.__defineGetter__("colortable",function(){this.Z||(this.Z=new $c);return this.Z});V.prototype.__defineGetter__("scalars",function(){this.u||(this.u=new ud);return this.u});V.prototype.__defineGetter__("children",t("e"));V.prototype.p=function(){var a=new vd;a.R=this;this.dispatchEvent(a)};
function wd(a,b){(a==r||b==r||!(a instanceof V)||!(b instanceof V))&&j(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.Y?-1:1==b.Y?1:a.M!=r&&b.M!=r&&a.M>b.M?-1:1}F("X.object",V);F("X.object.prototype.modified",V.prototype.p);function xd(){}function yd(a){for(var b=a.i.count,c=[],d=0,d=0;d<b;d+=3){var e=a.i.get(d),f=a.i.get(d+1),g=a.i.get(d+2),h=a.j.get(d),k=a.j.get(d+1),l=a.j.get(d+2),m=a.Lb;a.X&&0<a.X.length&&(m=a.X.get(d));var q=[];q.push(new Hc(e,h));q.push(new Hc(f,k));q.push(new Hc(g,l));c.push(new Jc(q,m))}return Rc(c)}
function zd(a,b){(b==r||!(b instanceof Qc))&&j(Error("Invalid CSG object."));var c=new Sc,d=[];cb(b.B,function(a){var b=[],g=a.te,b=cb(a.ob,function(a){a.color=g;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.Qh=cb(c.unique(),function(a){return[a.Ca.x(),a.Ca.y(),a.Ca.b()]});a.Ph=cb(c.unique(),function(a){return[a.aa.x(),a.aa.y(),a.aa.b()]});a.Oh=cb(c.unique(),function(a){return!a.color?r:[a.color[0],a.color[1],a.color[2]]});a.i=new T(9*d.length);a.j=new T(9*d.length);
a.X=new T(9*d.length);cb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.Qh,k=this.Ph,l=this.Oh;this.i.add(d[b][0],d[b][1],d[b][2]);this.i.add(d[c][0],d[c][1],d[c][2]);this.i.add(d[a][0],d[a][1],d[a][2]);this.j.add(k[b][0],k[b][1],k[b][2]);this.j.add(k[c][0],k[c][1],k[c][2]);this.j.add(k[a][0],k[a][1],k[a][2]);l[b]&&this.X.add(l[b][0],l[b][1],l[b][2]);l[c]&&this.X.add(l[c][0],l[c][1],l[c][2]);l[a]&&this.X.add(l[a][0],l[a][1],l[a][2])}.bind(a));0==a.X.z&&(a.X=r);a.ja=sd}
xd.prototype.Pf=function(a){(a==r||!(a instanceof Qc)&&!(a instanceof V))&&j(Error("Invalid object."));var b=a;a instanceof V&&(b=yd(b));a=new V;Ea(a,new xd);zd(a,yd(this).Pf(b));return a};xd.prototype.ma=function(a){(a==r||!(a instanceof Qc)&&!(a instanceof V))&&j(Error("Invalid object."));var b=a;a instanceof V&&(b=yd(b));a=new V;Ea(a,new xd);zd(a,yd(this).ma(b));return a};
xd.prototype.pf=function(a){(a==r||!(a instanceof Qc)&&!(a instanceof V))&&j(Error("Invalid object."));var b=a;a instanceof V&&(b=yd(b));a=new V;Ea(a,new xd);zd(a,yd(this).pf(b));return a};xd.prototype.inverse=function(){var a=new V;Ea(a,new xd);zd(a,yd(this).inverse());return a};F("X.constructable",xd);F("X.constructable.prototype.intersect",xd.prototype.pf);F("X.constructable.prototype.inverse",xd.prototype.inverse);F("X.constructable.prototype.subtract",xd.prototype.ma);
F("X.constructable.prototype.union",xd.prototype.Pf);function Ad(a){pc.call(this,a);this.c="event"}G(Ad,pc);function Bd(){Ad.call(this,"g");this.Le=this.Ye=0}G(Bd,Ad);function Cd(){Ad.call(this,"a");this.M=new H.f(0,0,0)}G(Cd,Ad);function Dd(){Ad.call(this,"b");this.M=new H.f(0,0,0)}G(Dd,Ad);function Ed(){Ad.call(this,"c");this.Ka=this.Ta=s}G(Ed,Ad);function Fd(){Ad.call(this,"d");this.J=s}G(Fd,Ad);function Gd(){Ad.call(this,"j");this.Pd=this.Od=0}G(Gd,Ad);function Hd(){Ad.call(this,"k")}G(Hd,Ad);function Id(){Ad.call(this,"f")}G(Id,Ad);
function vd(){Ad.call(this,"h");this.r=this.R=r}G(vd,Ad);function Jd(){Ad.call(this,"i");this.tg=0}G(Jd,Ad);function Kd(a,b,c){a==r&&j(Error("Invalid GL Buffer."));b==r&&j(Error("Invalid number of items."));c==r&&j(Error("Invalid item size."));Q.call(this);this.c="buffer";this.ha=a;this.ub=b;this.vb=c}G(Kd,Q);function Ld(a,b){this.x=ea(a)?a:0;this.y=ea(b)?b:0}Ld.prototype.h=function(){return new Ld(this.x,this.y)};ca.Ja&&(Ld.prototype.toString=function(){return"("+this.x+", "+this.y+")"});function Md(a,b){return new Ld(a.x-b.x,a.y-b.y)}Ld.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};Ld.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
Ld.prototype.translate=function(a,b){a instanceof Ld?(this.x+=a.x,this.y+=a.y):(this.x+=Number(a),y(b)&&(this.y+=b));return this};Ld.prototype.scale=function(a,b){var c=y(b)?b:a;this.x*=a;this.y*=c;return this};function Nd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Nd.prototype.h=function(){return new Nd(this.top,this.right,this.bottom,this.left)};ca.Ja&&(Nd.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});u=Nd.prototype;u.contains=function(a){return!this||!a?s:a instanceof Nd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};
u.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};u.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};u.translate=function(a,b){a instanceof Ld?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,y(b)&&(this.top+=b,this.bottom+=b));return this};
u.scale=function(a,b){var c=y(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function Od(a){this.gk=a}Od.prototype.toString=t("gk");
var Pd=new Od("A"),Qd=new Od("APPLET"),Rd=new Od("AREA"),Sd=new Od("BASE"),Td=new Od("BODY"),Ud=new Od("BUTTON"),Vd=new Od("DIV"),Wd=new Od("EMBED"),Xd=new Od("HEAD"),Yd=new Od("HTML"),Zd=new Od("IFRAME"),$d=new Od("INPUT"),ae=new Od("LINK"),be=new Od("MATH"),ce=new Od("MENU"),de=new Od("META"),ee=new Od("OBJECT"),fe=new Od("OPTGROUP"),ge=new Od("OPTION"),he=new Od("PROGRESS"),ie=new Od("SCRIPT"),je=new Od("SELECT"),ke=new Od("SOURCE"),le=new Od("STYLE"),me=new Od("SVG"),ne=new Od("TEMPLATE"),oe=
new Od("TEXTAREA"),pe=new Od("TITLE"),qe=new Od("TRACK");function re(a,b){this.width=a;this.height=b}re.prototype.h=function(){return new re(this.width,this.height)};ca.Ja&&(re.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});re.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};re.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};re.prototype.scale=function(a,b){var c=y(b)?b:a;this.width*=a;this.height*=c;return this};function se(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}se.prototype.h=function(){return new se(this.left,this.top,this.width,this.height)};ca.Ja&&(se.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});u=se.prototype;
u.Tg=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,p}return s};u.contains=function(a){return a instanceof Ld?a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height:this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height};
function te(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}u.gb=function(a){return Math.sqrt(te(this,a))};u.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
u.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};u.translate=function(a,b){a instanceof Ld?(this.left+=a.x,this.top+=a.y):(this.left+=a,y(b)&&(this.top+=b));return this};u.scale=function(a,b){var c=y(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};D("goog.i18n.bidi.FORCE_RTL",s);Ya("area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr");Ya("action","cite","data","formaction","href","manifest","poster","src");Ya(Qd,Sd,Wd,Zd,ae,be,de,ee,ie,le,me,ne);var ue=!Gb||9<=Number(cc);!Jb&&!Gb||Gb&&9<=Number(cc)||Jb&&$b("1.9.1");Gb&&$b("9");D("goog.dom.ASSUME_QUIRKS_MODE",s);D("goog.dom.ASSUME_STANDARDS_MODE",s);var ve=Ka.sk||Ka.Dh;function we(a){return a?new xe(ye(a)):La||(La=new xe)}function ze(a,b){return ga(b)?a.getElementById(b):b}var Ae={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Be(a){var b=Ce(a);a=a.parentWindow||a.defaultView;return Gb&&$b("10")&&a.pageYOffset!=b.scrollTop?new Ld(b.scrollLeft,b.scrollTop):new Ld(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}function Ce(a){return a.Sj?a.Sj:!Kb&&De(a)?a.documentElement:a.body||a.documentElement}function Ee(a,b,c){return Fe(document,arguments)}
function Fe(a,b){var c=String(b[0]),d=b[1];if(!ue&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',kb(d.name),'"');if(d.type){c.push(' type="',kb(d.type),'"');var e={};Xa(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var f=a.createElement(c);if(d)if(ga(d))f.className=d;else if(ka(d))f.className=d.join(" ");else{var c=function(a,b){a&&a.rl&&(a=a.Dl);"style"==b?f.style.cssText=a:"class"==b?f.className=a:"for"==b?f.htmlFor=a:Ae.hasOwnProperty(b)?f.setAttribute(Ae[b],a):0==b.lastIndexOf("aria-",
0)||0==b.lastIndexOf("data-",0)?f.setAttribute(b,a):f[b]=a},g;for(g in d)c.call(n,d[g],g)}if(2<b.length){g=function(b){b&&f.appendChild(ga(b)?a.createTextNode(b):b)};for(d=2;d<b.length;d++)if(e=b[d],la(e)&&!(oa(e)&&0<e.nodeType)){var c=bb,h;a:{if((h=e)&&"number"==typeof h.length){if(oa(h)){h="function"==typeof h.item||"string"==typeof h.item;break a}if(ma(h)){h="function"==typeof h.item;break a}}h=s}if(h)if(h=e.length,0<h){for(var k=Array(h),l=0;l<h;l++)k[l]=e[l];e=k}else e=[];c(e,g)}else g(e)}return f}
function De(a){return ve?Ka.Dh:"CSS1Compat"==a.compatMode}function Ge(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function He(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Ie(a,b){if(!a||!b)return s;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function ye(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function xe(a){this.D=a||da.document||document}u=xe.prototype;u.jd=we;u.k=function(a){return ze(this.D,a)};u.vh=xe.prototype.k;u.getElementsByTagName=function(a,b){return(b||this.D).getElementsByTagName(String(a))};u.yc=function(a,b,c){return Fe(this.D,arguments)};u.createElement=function(a){return this.D.createElement(String(a))};u.createTextNode=function(a){return this.D.createTextNode(String(a))};function Je(a){return De(a.D)}
u.Jg=function(a){var b;a=a||this.D;try{var c=a&&a.activeElement;b=c&&c.nodeName?c:r}catch(d){b=r}return b};u.appendChild=function(a,b){a.appendChild(b)};u.contains=Ie;function Ke(a,b){var c=ye(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,r))?c[b]||c.getPropertyValue(b)||"":""}function Le(a,b){return Ke(a,b)||(a.currentStyle?a.currentStyle[b]:r)||a.style&&a.style[b]}function Me(a){a=a?ye(a):document;return Gb&&!(9<=Number(cc))&&!Je(we(a))?a.body:a.documentElement}
function Ne(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}Gb&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Oe(a){if(Gb&&!(8<=Number(cc)))return a.offsetParent;var b=ye(a),c=Le(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(11==a.nodeType&&a.host&&(a=a.host),c=Le(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return r}
function Pe(a){for(var b=new Nd(0,Infinity,Infinity,0),c=we(a),d=c.D.body,e=c.D.documentElement,f=Ce(c.D);a=Oe(a);)if((!Gb||0!=a.clientWidth)&&(!Kb||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=Le(a,"overflow")){var g=Qe(a),h=new Ld(a.clientLeft,a.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,
f);c=(c.D.parentWindow||c.D.defaultView||window).document;c=De(c)?c.documentElement:c.body;c=new re(c.clientWidth,c.clientHeight);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:r}function Qe(a){var b=ye(a),c=new Ld(0,0),d=Me(b);if(a==d)return c;a=Ne(a);b=we(b);b=Be(b.D);c.x=a.left+b.x;c.y=a.top+b.y;return c}function Re(a){"number"==typeof a&&(a+="px");return a}
function Se(a){var b=Te;if("none"!=Le(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function Te(a){var b=a.offsetWidth,c=a.offsetHeight,d=Kb&&!b&&!c;return(!ea(b)||d)&&a.getBoundingClientRect?(a=Ne(a),new re(a.right-a.left,a.bottom-a.top)):new re(b,c)}function Ue(a,b){a.style.display=b?"":"none"}function Ve(a){return"rtl"==Le(a,"direction")}
function We(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return+e}function Xe(a,b){var c=a.currentStyle?a.currentStyle[b]:r;return c?We(a,c):0}var Ye={thin:2,medium:4,thick:6};function Ze(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:r))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:r;return c in Ye?Ye[c]:We(a,c)};function $e(a,b){Fc.call(this);this.l=a;var c=oa(this.l)&&1==this.l.nodeType?this.l:this.l?this.l.body:r;this.Ni=!!c&&Ve(c);this.Xg=O(this.l,Jb?"DOMMouseScroll":"mousewheel",this,b)}G($e,Fc);
$e.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.ib;"mousewheel"==a.type?(d=af(-a.wheelDelta),ea(a.wheelDeltaX)?(b=af(-a.wheelDeltaX),c=af(-a.wheelDeltaY)):c=d):(d=a.detail,100<d?d=3:-100>d&&(d=-3),ea(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d);y(this.$g)&&(b=Math.min(Math.max(b,-this.$g),this.$g));y(this.ah)&&(c=Math.min(Math.max(c,-this.ah),this.ah));this.Ni&&(b=-b);b=new bf(d,a,b,c);this.dispatchEvent(b)};function af(a){return Kb&&(Mb||Ob)&&0!=a%40?a:a/40}
$e.prototype.ca=function(){$e.n.ca.call(this);Bc(this.Xg);this.Xg=r};function bf(a,b,c,d){qc.call(this,b);this.type="mousewheel";this.detail=a;this.pl=c;this.Ac=d}G(bf,qc);Gb||Hb||Kb&&$b("525");function cf(a){(a==r||!(a instanceof Element))&&j(Error("Could not add interactor to the given element."));Q.call(this);this.c="interactor";this.sa=a;this.Ne=this.kg=this.jg=this.lg=this.ig=this.mg=r;this.Me=p;this.Fb=this.yb=this.ab=s;this.Fd=[0,0];this.He=new H.f(0,0,0);this.Pc=new H.f(0,0,0);this.Ug=0;this.sg=this.Bd=r;this.G={MOUSEWHEEL_ENABLED:p,MOUSECLICKS_ENABLED:p,KEYBOARD_ENABLED:p,HOVERING_ENABLED:p,CONTEXTMENU_ENABLED:s,TOUCH_ENABLED:p,TOUCH_BOUNCING_ENABLED:s}}G(cf,Q);
cf.prototype.__defineGetter__("config",t("G"));cf.prototype.__defineGetter__("leftButtonDown",t("ab"));cf.prototype.__defineGetter__("middleButtonDown",t("yb"));cf.prototype.__defineGetter__("rightButtonDown",t("Fb"));
cf.prototype.Ha=function(){this.G.MOUSEWHEEL_ENABLED?(this.Ne=new $e(this.sa),this.mg=O(this.Ne,"mousewheel",this.qd.bind(this))):(Bc(this.mg),this.Ne=r);this.G.MOUSECLICKS_ENABLED?(this.ig=O(this.sa,"mousedown",this.dj.bind(this)),this.lg=O(this.sa,"mouseup",this.ij.bind(this))):(Bc(this.ig),Bc(this.lg));this.sa.oncontextmenu=this.G.CONTEXTMENU_ENABLED?r:function(){return s};window.onkeydown=this.G.KEYBOARD_ENABLED?this.fh.bind(this):r;this.G.TOUCH_ENABLED?(this.G.TOUCH_BOUNCING_ENABLED||document.body.addEventListener("touchmove",
function(a){a.preventDefault()},s),this.Xh=O(this.sa,"touchstart",this.wj.bind(this)),this.Wh=O(this.sa,"touchmove",this.uj.bind(this)),this.Vh=O(this.sa,"touchend",this.qj.bind(this))):(Bc(this.Xh),Bc(this.Wh),Bc(this.Vh));Bc(this.jg);Bc(this.kg);this.jg=O(this.sa,"mousemove",this.fj.bind(this));this.kg=O(this.sa,"mouseout",this.gj.bind(this))};
cf.prototype.dj=function(a){0==a.button?this.ab=p:1==a.button?this.yb=p:2==a.button&&(this.Fb=p);eval("this.onMouseDown("+this.ab+","+this.yb+","+this.Fb+")");df(this);a.preventDefault()};cf.prototype.cj=aa();cf.prototype.ij=function(a){0==a.button?this.ab=s:1==a.button?this.yb=s:2==a.button&&(this.Fb=s);eval("this.onMouseUp("+this.ab+","+this.yb+","+this.Fb+")");df(this);a.preventDefault()};cf.prototype.__defineGetter__("mousePosition",t("Fd"));u=cf.prototype;u.hj=aa();
u.gj=function(a){this.Me=s;this.G.KEYBOARD_ENABLED&&(window.onkeydown=r);this.Fb=this.yb=this.ab=s;df(this);this.He=new H.f(0,0,0);a.preventDefault()};u.ej=aa();u.wj=function(a){a.preventDefault();a.Ha(a.ib.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Pc=new H.f(a.clientX,a.clientY,0);this.sg=setTimeout(this.sj.bind(this,a),500)};u.vj=aa();
u.sj=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new Ed;a.Ta=p;a.Ka=this instanceof ef;this.dispatchEvent(a);this.Ld=p};u.rj=aa();function ff(a){clearTimeout(a.sg);if(a.Ld){var b=new Ed;b.Ta=s;b.Ka=a instanceof ef;a.dispatchEvent(b)}a.Ld=s}u.qj=function(a){a.preventDefault();eval("this.onTouchEnd()");ff(this)};u.pj=aa();
u.uj=function(a){a.preventDefault();this.Ld||ff(this);this.touchmoveEvent=a=a.ib;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new H.f(c[0],c[1],0);var b=c[0]>3*this.sa.clientWidth/4,d=c[0]<this.sa.clientWidth/4,e=c[1]<this.sa.clientHeight/4,c=c[1]>3*this.sa.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Pc.ma(a);this.Pc=a.h();if(this.Ld)a=new Cd,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.M=e,this.dispatchEvent(a);
else if(this instanceof gf&&(b||d))a=new Fd,a.J=0>e.y,this.dispatchEvent(a);else if(this instanceof ef||c)e.scale(3),a=new Dd,a.M=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new H.f(a[0],a[1],0),b=new H.f(b[0],b[1],0),e=bd(a,b),b=e-this.Ug,this.Ug=e,this.Pc.ma(a),this.Pc=a.h(),10<Math.abs(b)&&(a=new Ed,a.Ta=0<b,a.Ka=this instanceof ef,this.dispatchEvent(a)))};u.tj=aa();
u.fj=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Me=p;this.G.KEYBOARD_ENABLED&&window.onkeydown==r&&(window.onkeydown=this.fh.bind(this));a.preventDefault();var b=a.shiftKey;this.Fd=[a.offsetX,a.offsetY];var c=new H.f(this.Fd[0],this.Fd[1],0);a=this.He.ma(c);this.He=c.h();this.G.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.yb||this.ab||this.Fb)&&df(this),this.Bd=setTimeout(function(){df(this);var a=new Gd;a.Od=c.x;a.Pd=c.y;this.dispatchEvent(a);
this.Bd=r}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.jb()&&(this.ab&&!b?(b=new Dd,a.scale(3),b.M=a,this.dispatchEvent(b)):this.yb||this.ab&&b?(b=new Cd,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.M=a,this.dispatchEvent(b)):this.Fb&&(b=new Ed,b.Ta=0<a.y,b.Ka=s,this.dispatchEvent(b)))};function df(a){a.Bd&&clearTimeout(a.Bd);a.dispatchEvent(new Hd)}u.jj=aa();
u.qd=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");df(this);a.preventDefault()};u.aj=aa();
u.fh=function(a){if(this.Me){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");df(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!d&&!e?(a.preventDefault(),a=new Id,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),e?a=new Cd:b?a=new Ed:(a=new Dd,this instanceof gf&&(a=new Fd)),a&&(c=new H.f(0,0,0),37==f?(c.x=5,a.J=s,b&&(a.J=p,a.Ta=p,a.Ka=s)):39==f?(c.x=-5,a.J=p,b&&(a.Ta=s,a.Ka=s)):38==f?(c.y=5,a.J=p,b&&(a.Ta=p,a.Ka=p)):40==f&&(c.y=-5,a.J=s,b&&(a.Ta=
s,a.Ka=p)),a.M=c,this.dispatchEvent(a)))}};F("X.interactor",cf);F("X.interactor.prototype.init",cf.prototype.Ha);F("X.interactor.prototype.onMouseDown",cf.prototype.cj);F("X.interactor.prototype.onMouseUp",cf.prototype.hj);F("X.interactor.prototype.onMouseMove",cf.prototype.ej);F("X.interactor.prototype.onMouseWheel",cf.prototype.jj);F("X.interactor.prototype.onKey",cf.prototype.aj);F("X.interactor.prototype.onTouchStart",cf.prototype.vj);F("X.interactor.prototype.onTouchMove",cf.prototype.tj);
F("X.interactor.prototype.onTouchEnd",cf.prototype.pj);F("X.interactor.prototype.onTouchHover",cf.prototype.rj);function gf(a){cf.call(this,a);this.c="interactor2D"}G(gf,cf);gf.prototype.qd=function(a){gf.n.qd.call(this,a);var b=new Fd;a.Ac==r&&(a.Ac=0);b.J=0>a.Ac;this.dispatchEvent(b)};function hf(a,b){(!y(a)||!y(b))&&j(Error("A camera needs valid width and height values."));Q.call(this);this.c="camera";this.va=new H.f(0,0,100);this.rc=new H.f(0,0,0);this.J=new H.f(0,1,0);this.s=this.ie(this.va,this.rc)}G(hf,Q);hf.prototype.observe=function(a){(a==r||!(a instanceof cf))&&j(Error("Could not observe the interactor."));O(a,"b",this.nj.bind(this));O(a,"a",this.kj.bind(this));O(a,"c",this.zj.bind(this))};
hf.prototype.nj=function(a){a instanceof Dd||j(Error("Received no valid rotate event."));this.rotate(a.M)};hf.prototype.zj=function(a){a instanceof Ed||j(Error("Received no valid zoom event."));a.Ta?this.th(a.Ka):this.uh(a.Ka)};hf.prototype.kj=function(a){a instanceof Cd||j(Error("Received no valid pan event."));this.kh(a.M)};hf.prototype.__defineGetter__("view",t("s"));hf.prototype.__defineSetter__("view",function(a){(a==r||!(a instanceof Float32Array))&&j(Error("Invalid view matrix."));this.s=a});
hf.prototype.__defineGetter__("position",function(){return[this.va.x,this.va.y,this.va.b]});hf.prototype.__defineSetter__("position",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid position."));this.va=new H.f(a[0],a[1],a[2]);this.reset()});hf.prototype.__defineGetter__("focus",function(){return[this.rc.x,this.rc.y,this.rc.b]});hf.prototype.__defineSetter__("focus",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid focus"));this.rc=new H.f(a[0],a[1],a[2]);this.reset()});
hf.prototype.__defineGetter__("up",function(){return[this.J.x,this.J.y,this.J.b]});hf.prototype.__defineSetter__("up",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid up vector."));this.J=new H.f(a[0],a[1],a[2]);this.reset()});u=hf.prototype;u.reset=function(){this.s=this.ie(this.va,this.rc)};u.rotate=function(a){ka(a)&&2==a.length?a=new H.f(a[0],a[1],0):a instanceof H.f||j(Error("Invalid distance vector for rotate operation."));return a};
u.kh=function(a){ka(a)&&2==a.length?a=new H.f(a[0],a[1],0):a instanceof H.f||j(Error("Invalid distance vector for pan operation."));this.s[12]-=a.x;this.s[13]+=a.y};u.th=function(a){var b=20;a!=r&&!a&&(b=1);this.s[14]+=b};u.uh=function(a){var b=30;a!=r&&!a&&(b=1);this.s[14]-=b};u.ie=function(a,b){(!(a instanceof H.f)||!(b instanceof H.f))&&j(Error("3D vectors required for calculating the view."));return H.d.nd()};F("X.camera",hf);F("X.camera.prototype.pan",hf.prototype.kh);
F("X.camera.prototype.rotate",hf.prototype.rotate);F("X.camera.prototype.zoomIn",hf.prototype.th);F("X.camera.prototype.zoomOut",hf.prototype.uh);function jf(a,b){hf.call(this,a,b);this.c="camera3D";this.eg=45;this.og=H.d.rf(H.d.nd(),this.eg,a/b,1,1E4)}G(jf,hf);jf.prototype.rotate=function(a){a=jf.n.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new H.f(this.s[1],this.s[5],this.s[9]),d=new H.f(this.s[0],this.s[4],this.s[8]);c.normalize();d.normalize();H.d.rotate(this.s,b,c.x,c.y,c.b);H.d.rotate(this.s,a,d.x,d.y,d.b)};jf.prototype.ie=function(a,b){var c=jf.n.ie.call(this,a,b);H.d.Zg(c,a,b,this.J);return c};
F("X.camera3D",jf);function kf(){Q.call(this);this.c="parser";this.L=r;this.z=0;this.Th=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Cd=p;this.nl=-Infinity;this.ml=Infinity}G(kf,Q);kf.prototype.parse=function(){j(Error("The function parse() should be overloaded."))};function nf(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)var f=a[e],b=Math.min(b,f),c=Math.max(c,f);return[b,c]}
function of(a,b,c){b===n&&(b=0);c===n&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
function W(a,b,c){c!=r||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array,d=4}b=new e(a.L.slice(a.z,a.z+=c*d));if(a.Th!=a.Cd){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-1,g=e;f>g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b}
function pf(a,b,c){H.ra(a.c+".reslice");var d=b.$,e=c.max,f=c.data,g=d[2],h=d[1],d=d[0],k=b.o!=r,l=h*d,m=Array(g),q=Array(g),v=0,w=r;b.Z&&(w=b.Z.wb);for(var x=0,z=0,C=0,E=0,A=4*l,x=0;x<g;x++){m[x]=Array(h);q[x]=Array(h);for(var B=f.subarray(x*l,(x+1)*l),J=new Uint8Array(A),z=E=0;z<h;z++){m[x][z]=new c.data.constructor(d);q[x][z]=new c.data.constructor(d);for(C=0;C<d;C++){var v=B[E],I=0,P=0,K=0,L=0;w?(L=w.get(Math.floor(v)),L||(I=w.Wa(),L=I[I.length-1]),I=255*L[1],P=255*L[2],K=255*L[3],L=255*L[4]):
(I=P=K=255*(v/e),L=255);var U=4*E;J[U]=I;J[++U]=P;J[++U]=K;J[++U]=L;m[x][z][C]=255*(v/e);q[x][z][C]=v;E++}}v=new qd;v.wa=J;v.Eb=d;v.Db=h;B=b.cb.e[x];B.A=v;k&&(B.o=b.o.cb.e[x].A)}b.Re&&(d!=h?k?b.Z?(qf(g,d,h,q,b.Z,b.T,b.o.T,p),qf(g,h,d,q,b.Z,b.S,b.o.S,s)):(rf(g,d,h,m,b.T,b.o.T,p),rf(g,h,d,m,b.S,b.o.S,s)):b.Z?(qf(g,d,h,q,b.Z,b.T,r,p),qf(g,h,d,q,b.Z,b.S,r,s)):(rf(g,d,h,m,b.T,r,p),rf(g,h,d,m,b.S,r,s)):k?b.Z?sf(g,d,h,m,b.Z,b.S,b.o.S,b.T,b.o.T):tf(g,d,h,m,b.S,b.o.S,b.T,b.o.T):b.Z?sf(g,d,h,q,b.Z,b.S,r,b.T,
r):tf(g,d,h,m,b.S,r,b.T,r));H.na(a.c+".reslice");return q}function rf(a,b,c,d,e,f,g){for(var h=4*a*b,k=0,k=0;k<c;k++){for(var l=new Uint8Array(h),m=0,q=0,m=0;m<a;m++)for(var v=0,w=d[m],v=0;v<b;v++){var x,z=x=g?w[k][v]:w[v][k],C=x,E=4*q;l[E]=x;l[++E]=z;l[++E]=C;l[++E]=255;q++}m=new qd;m.wa=l;m.Eb=b;m.Db=a;l=e.e[k];l.A=m;f&&(l.o=f.e[k].A)}}
function qf(a,b,c,d,e,f,g,h){e=e.wb;for(var k=4*a*b,l=0,l=0;l<c;l++){for(var m=new Uint8Array(k),q=0,v=0,q=0;q<a;q++)for(var w=d[q],x=0,x=0;x<b;x++){var z=e.get(Math.floor(h?w[l][x]:w[x][l]));z||(z=e.Wa(),z=z[z.length-1]);var C=255*z[2],E=255*z[3],A=255*z[4],B=4*v;m[B]=255*z[1];m[++B]=C;m[++B]=E;m[++B]=A;v++}q=new qd;q.wa=m;q.Eb=b;q.Db=a;m=f.e[l];m.A=q;g&&(m.o=g.e[l].A)}}
function tf(a,b,c,d,e,f,g,h){for(var k=4*a*b,l=0,l=0;l<c;l++){for(var m=new Uint8Array(k),q=new Uint8Array(k),v=0,w=0,w=0;w<a;w++)for(var x=d[w],z=0,z=0;z<b;z++){var C=x[z][l],E=C,A=C,B=4*v;m[B]=C;m[++B]=E;m[++B]=A;m[++B]=255;A=E=C=B=x[l][z];B=4*v;q[B]=C;q[++B]=E;q[++B]=A;q[++B]=255;v++}v=new qd;v.wa=m;v.Eb=b;v.Db=a;m=e.e[l];m.A=v;f&&(m.o=f.e[l].A);m=new qd;m.wa=q;m.Eb=b;m.Db=a;q=g.e[l];q.A=m;h&&(q.o=h.e[l].A)}}
function sf(a,b,c,d,e,f,g,h,k){e=e.wb;for(var l=4*a*b,m=0,m=0;m<c;m++){for(var q=new Uint8Array(l),v=new Uint8Array(l),w=0,x=0,x=0;x<a;x++)for(var z=d[x],C=0,C=0;C<b;C++){var E=e.get(Math.floor(z[C][m]));if(!E)var A=e.Wa(),E=A[A.length-1];var B=255*E[2],J=255*E[3],I=255*E[4],A=4*w;q[A]=255*E[1];q[++A]=B;q[++A]=J;q[++A]=I;A=e.get(Math.floor(z[m][C]));A||(A=e.Wa(),A=A[A.length-1]);E=255*A[1];B=255*A[2];J=255*A[3];I=255*A[4];A=4*w;v[A]=E;v[++A]=B;v[++A]=J;v[++A]=I;w++}w=new qd;w.wa=q;w.Eb=b;w.Db=a;q=
f.e[m];q.A=w;g&&(q.o=g.e[m].A);q=new qd;q.wa=v;q.Eb=b;q.Db=a;v=h.e[m];v.A=q;k&&(v.o=k.e[m].A)}};function uf(){kf.call(this);this.c="parserTRK"}G(uf,kf);
uf.prototype.parse=function(a,b,c){H.ra(this.c+".parse");var d=b.i,e=b.j,f=b.X;this.L=c;W(this,"uchar",6);W(this,"ushort",3);var g=W(this,"float",3);W(this,"float",3);var h=W(this,"ushort");W(this,"uchar",200);W(this,"ushort");W(this,"uchar",200);W(this,"float",16);W(this,"uchar",444);W(this,"uchar",4);W(this,"uchar",4);W(this,"float",6);W(this,"uchar",2);W(this,"uchar");W(this,"uchar");W(this,"uchar");W(this,"uchar");W(this,"uchar");W(this,"uchar");var k=W(this,"uint");W(this,"uint");var l=W(this,
"uint"),m=[],q=[];c=Infinity;var v=-Infinity,w=r,x=r,z=r,C=r,e=d=r,E=W(this,"uint",(this.L.byteLength-1E3)/4);this.z=l;for(var A=W(this,"float",(this.L.byteLength-1E3)/4),B=0,l=f=0;l<k;l++){for(var J=E[B],I=new T(3*J),P=0,K=0;K<J;K++){var L=A[B+3*K+K*h+1],U=A[B+3*K+K*h+2],Z=A[B+3*K+K*h+3],L=L/g[0],U=U/g[1],Z=Z/g[2];I.add(L,U,Z);if(0<K)var Y=I.get(K-1),P=P+Math.sqrt(Math.pow(L-Y[0],2)+Math.pow(U-Y[1],2)+Math.pow(Z-Y[2],2));K<J-1&&(f+=6)}B+=3*J+J*h+1;K=I.Tb;J=I.Qb;L=I.Ub;U=I.Rb;Z=I.Vb;Y=I.Sb;if(!w||
K<w)w=K;if(!x||J>x)x=J;if(!z||L<z)z=L;if(!C||U>C)C=U;if(!d||Z<d)d=Z;if(!e||Y>e)e=Y;m.push(I);q.push(P)}g=(w+x)/2;z=(z+C)/2;h=(d+e)/2;C=new Float32Array(f);b.i=d=new T(f);b.j=e=new T(f);b.X=f=new T(f);for(l=w=0;l<k;l++){x=m[l];E=x.count;P=q[l];c=Math.min(c,P);v=Math.max(v,P);for(K=0;K<E-1;K++){B=x.get(K);A=x.get(K+1);d.add(B[0],B[1],B[2]);d.add(A[0],A[1],A[2]);var I=B[0]-g,J=B[1]-z,L=B[2]-h,U=Math.sqrt(I*I+J*J+L*L),Z=A[0]-g,Y=A[1]-z,na=A[2]-h,ra=Math.sqrt(Z*Z+Y*Y+na*na);e.add(I/U,J/U,L/U);e.add(Z/
ra,Y/ra,na/ra);A=[Math.abs(A[0]-B[0]),Math.abs(A[1]-B[1]),Math.abs(A[2]-B[2])];B=Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]);A[0]/=B;A[1]/=B;A[2]/=B;f.add(A[0],A[1],A[2]);f.add(A[0],A[1],A[2]);C[w++]=P;C[w++]=P;C[w++]=P;C[w++]=P;C[w++]=P;C[w++]=P}}b.ja="LINES";k=new ud;k.La=c;k.Ga=v;k.Q=c;k.U=v;k.Lc=C;k.rg=s;k.g=p;b.u=k;H.na(this.c+".parse");c=new vd;c.R=b;c.r=a;this.dispatchEvent(c)};F("X.parserTRK",uf);F("X.parserTRK.prototype.parse",uf.prototype.parse);function vf(a){function b(a,b,d){b=2*b*Math.PI;b=ya(za(k,Math.cos(b)),za(l,Math.sin(b)));a=ya(ya(c,za(e,a)),za(b,f));d=ya(za(b,1-Math.abs(d)),za(g,d));return new Hc(a,d)}this.B=[];a=a||{};var c=new xa(a.start||[0,-1,0]),d=new xa(a.end||[0,1,0]),e=Ba(d,c),f=a.Ya||1;a=a.If||16;for(var g=Ca(e),h=0.5<Math.abs(g.y()),k=Ca((new xa(h,!h,0)).dc(g)),l=Ca(k.dc(g)),h=new Hc(c,Da(g)),d=new Hc(d,Ca(g)),m=[],q=0;q<a;q++){var v=q/a,w=(q+1)/a;m.push(new Jc([h,b(0,v,-1),b(0,w,-1)]));m.push(new Jc([b(0,w,0),b(0,v,
0),b(1,v,0),b(1,w,0)]));m.push(new Jc([d,b(1,w,1),b(1,v,1)]))}return Rc(m)}G(vf,Qc);function wf(){V.call(this);this.c="cylinder";this.We=[-10,-10,-10];this.De=[10,10,10];this.Wb=10;this.Zb=32;Ea(this,new xd)}G(wf,V);wf.prototype.__defineGetter__("start",t("We"));wf.prototype.__defineSetter__("start",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid start"));this.We=a});wf.prototype.__defineGetter__("end",t("De"));wf.prototype.__defineSetter__("end",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid end"));this.De=a});wf.prototype.__defineGetter__("radius",t("Wb"));
wf.prototype.__defineSetter__("radius",function(a){y(a)||j(Error("Invalid radius."));this.Wb=a});wf.prototype.p=function(){zd(this,new vf({start:this.We,end:this.De,Ya:this.Wb,If:this.Zb}));wf.n.p.call(this)};F("X.cylinder",wf);F("X.cylinder.prototype.modified",wf.prototype.p);var xf={ef:function(a,b,c){return xf.update(a,0,b,c)},update:function(a,b,c,d){var e=xf.Kh,f="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(f=d&7;f--;++c)b=b>>>8^e[(b^a[c])&255];for(f=d>>3;f--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}};
xf.Kh=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function yf(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,h,k,l,m,q,v;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;f=new Uint32Array(e);g=1;h=0;for(k=2;g<=c;){for(q=0;q<b;++q)if(a[q]===g){l=0;m=h;for(v=0;v<g;++v)l=l<<1|m&1,m>>=1;for(v=l;v<e;v+=k)f[v]=g<<16|q;++h}++g;h<<=1;k<<=1}return[f,c,d]};function zf(a,b){this.bf=[];this.cf=32768;this.Oa=this.cd=this.ea=this.Of=0;this.input=new Uint8Array(a);this.xg=s;this.df=Af;this.lb=s;if(b||!(b={}))b.index&&(this.ea=b.index),b.bufferSize&&(this.cf=b.bufferSize),b.bufferType&&(this.df=b.bufferType),b.resize&&(this.lb=b.resize);switch(this.df){case Bf:this.P=32768;this.za=new Uint8Array(32768+this.cf+258);break;case Af:this.P=0;this.za=new Uint8Array(this.cf);this.fc=this.ri;this.Bg=this.fi;this.kf=this.ki;break;default:j(Error("invalid inflate mode"))}}
var Bf=0,Af=1;
zf.prototype.zc=function(){for(;!this.xg;){var a=Cf(this,3);a&1&&(this.xg=p);a>>>=1;switch(a){case 0:var a=this.input,b=this.ea,c=this.za,d=this.P,e=n,f=n,g=n,h=c.length,e=n;this.Oa=this.cd=0;e=a[b++];e===n&&j(Error("invalid uncompressed block header: LEN (first byte)"));f=e;e=a[b++];e===n&&j(Error("invalid uncompressed block header: LEN (second byte)"));f|=e<<8;e=a[b++];e===n&&j(Error("invalid uncompressed block header: NLEN (first byte)"));g=e;e=a[b++];e===n&&j(Error("invalid uncompressed block header: NLEN (second byte)"));g|=
e<<8;f===~g&&j(Error("invalid uncompressed block header: length verify"));b+f>a.length&&j(Error("input buffer is broken"));switch(this.df){case Bf:for(;d+f>c.length;)e=h-d,f-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.P=d,c=this.fc(),d=this.P;break;case Af:for(;d+f>c.length;)c=this.fc({Ig:2});break;default:j(Error("invalid inflate mode"))}c.set(a.subarray(b,b+f),d);d+=f;this.ea=b+=f;this.P=d;this.za=c;break;case 1:this.kf(Df,Ef);break;case 2:Ff(this);break;default:j(Error("unknown BTYPE: "+a))}}return this.Bg()};
var Gf=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),If=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Jf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Kf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Lf=new Uint8Array(288),
Mf,Nf;Mf=0;for(Nf=Lf.length;Mf<Nf;++Mf)Lf[Mf]=143>=Mf?8:255>=Mf?9:279>=Mf?7:8;var Df=yf(Lf),Of=new Uint8Array(30),Pf,Qf;Pf=0;for(Qf=Of.length;Pf<Qf;++Pf)Of[Pf]=5;var Ef=yf(Of);function Cf(a,b){for(var c=a.cd,d=a.Oa,e=a.input,f=a.ea,g;d<b;)g=e[f++],g===n&&j(Error("input buffer is broken")),c|=g<<d,d+=8;g=c&(1<<b)-1;a.cd=c>>>b;a.Oa=d-b;a.ea=f;return g}
function Rf(a,b){for(var c=a.cd,d=a.Oa,e=a.input,f=a.ea,g=b[0],h=b[1],k;d<h;)k=e[f++],k===n&&j(Error("input buffer is broken")),c|=k<<d,d+=8;e=g[c&(1<<h)-1];g=e>>>16;a.cd=c>>g;a.Oa=d-g;a.ea=f;return e&65535}
function Ff(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=Rf(this,b),d){case 16:for(d=3+Cf(this,2);d--;)c[f++]=e;break;case 17:for(d=3+Cf(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+Cf(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=Cf(a,5)+257,d=Cf(a,5)+1,e=Cf(a,4)+4,f=new Uint8Array(Gf.length),g;for(g=0;g<e;++g)f[Gf[g]]=Cf(a,3);e=yf(f);f=new Uint8Array(c);g=new Uint8Array(d);a.kf(yf(b.call(a,c,e,f)),yf(b.call(a,d,e,g)))}u=zf.prototype;
u.kf=function(a,b){var c=this.za,d=this.P;this.Eg=a;for(var e=c.length-258,f,g,h;256!==(f=Rf(this,a));)if(256>f)d>=e&&(this.P=d,c=this.fc(),d=this.P),c[d++]=f;else{f-=257;h=Hf[f];0<If[f]&&(h+=Cf(this,If[f]));f=Rf(this,b);g=Jf[f];0<Kf[f]&&(g+=Cf(this,Kf[f]));d>=e&&(this.P=d,c=this.fc(),d=this.P);for(;h--;)c[d]=c[d++-g]}for(;8<=this.Oa;)this.Oa-=8,this.ea--;this.P=d};
u.ki=function(a,b){var c=this.za,d=this.P;this.Eg=a;for(var e=c.length,f,g,h;256!==(f=Rf(this,a));)if(256>f)d>=e&&(c=this.fc(),e=c.length),c[d++]=f;else{f-=257;h=Hf[f];0<If[f]&&(h+=Cf(this,If[f]));f=Rf(this,b);g=Jf[f];0<Kf[f]&&(g+=Cf(this,Kf[f]));d+h>e&&(c=this.fc(),e=c.length);for(;h--;)c[d]=c[d++-g]}for(;8<=this.Oa;)this.Oa-=8,this.ea--;this.P=d};
u.fc=function(){var a=new Uint8Array(this.P-32768),b=this.P-32768,c=this.za;a.set(c.subarray(32768,a.length));this.bf.push(a);this.Of+=a.length;c.set(c.subarray(b,b+32768));this.P=32768;return c};u.ri=function(a){var b=this.input.length/this.ea+1|0,c=this.input,d=this.za;a&&("number"===typeof a.Ig&&(b=a.Ig),"number"===typeof a.Zh&&(b+=a.Zh));2>b?(a=(c.length-this.ea)/this.Eg[2],a=258*(a/2)|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.za=a};
u.Bg=function(){var a=0,b=this.za,c=this.bf,d,e=new Uint8Array(this.Of+(this.P-32768)),f,g,h,k;if(0===c.length)return this.za.subarray(32768,this.P);f=0;for(g=c.length;f<g;++f){d=c[f];h=0;for(k=d.length;h<k;++h)e[a++]=d[h]}f=32768;for(g=this.P;f<g;++f)e[a++]=b[f];this.bf=[];return this.buffer=e};u.fi=function(){var a,b=this.P;this.lb?(a=new Uint8Array(b),a.set(this.za.subarray(0,b))):a=this.za.subarray(0,b);return this.buffer=a};new Uint8Array(256);var Sf;for(Sf=0;256>Sf;++Sf)for(var Tf=Sf,Uf=7,Tf=Tf>>>1;Tf;Tf>>>=1)--Uf;var Vf=[],Wf;for(Wf=0;288>Wf;Wf++)switch(p){case 143>=Wf:Vf.push([Wf+48,8]);break;case 255>=Wf:Vf.push([Wf-144+400,9]);break;case 279>=Wf:Vf.push([Wf-256+0,7]);break;case 287>=Wf:Vf.push([Wf-280+192,8]);break;default:j("invalid literal: "+Wf)}
function Xf(){var a=Yf;switch(p){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,a-
31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:j("invalid length: "+a)}}var Zf=[],Yf,$f;
for(Yf=3;258>=Yf;Yf++)$f=Xf(),Zf[Yf]=$f[2]<<24|$f[1]<<16|$f[0];new Uint32Array(Zf);function ag(){};function bg(a){this.input=a;this.ea=0;this.member=[]}
bg.prototype.zc=function(){for(var a=this.input.length;this.ea<a;){var b=new ag,c=n,d=n,e=n,f=c=e=n,g=n,c=c=n,h=this.input,d=this.ea;b.Qg=h[d++];b.Rg=h[d++];(31!==b.Qg||139!==b.Rg)&&j(Error("invalid file signature:",b.Qg,b.Rg));b.Ag=h[d++];switch(b.Ag){case 8:break;default:j(Error("unknown compression method: "+b.Ag))}b.Wd=h[d++];c=h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24;b.vl=new Date(1E3*c);b.El=h[d++];b.yl=h[d++];0<(b.Wd&4)&&(b.pk=h[d++]|h[d++]<<8,d+=b.pk);if(0<(b.Wd&8)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=
String.fromCharCode(c);b.name=g.join("")}if(0<(b.Wd&16)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.comment=g.join("")}0<(b.Wd&2)&&(b.gi=xf.ef(h,0,d)&65535,b.gi!==(h[d++]|h[d++]<<8)&&j(Error("invalid header crc16")));c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-d-4-4<512*c&&(e=c);d=new zf(h,{index:d,bufferSize:e});b.data=e=d.zc();d=d.ea;b.ol=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;xf.ef(e)!==c&&j(Error("invalid CRC-32 checksum: 0x"+xf.ef(e).toString(16)+
" / 0x"+c.toString(16)));b.sl=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;(e.length&4294967295)!==c&&j(Error("invalid input size: "+(e.length&4294967295)+" / "+c));this.member.push(b);this.ea=d}a=this.member;b=e=d=0;for(h=a.length;b<h;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<h;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function cg(){kf.call(this);this.c="parserNII"}G(cg,kf);cg.prototype.parse=function(a,b,c){H.ra(this.c+".parse");var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,p);348!=e&&(d=(new bg(new Uint8Array(d))).zc(),d=d.buffer);c=this.rd(d);b.$=[c.xa[1],c.xa[2],c.xa[3]];b.I=[c.la[1],c.la[2],c.la[3]];d=c.min;e=c.max;b.La=b.W=d;b.Ga=b.V=e;-Infinity==b.Q&&(b.Q=d);Infinity==b.U&&(b.U=e);b.Hb();H.na(this.c+".parse");b.qb=pf(this,b,c);c=new vd;c.R=b;c.r=a;this.dispatchEvent(c)};
cg.prototype.rd=function(a){this.L=a;a={Wj:0,ii:r,ji:r,si:0,Tj:0,Lj:0,ni:r,xa:r,Ii:0,Ji:0,Ki:0,Gi:0,jf:0,bi:0,$j:0,la:r,sh:0,Rj:0,Qj:0,Zj:0,Xj:r,qk:r,di:0,ei:0,Yj:0,hk:0,zi:0,Ai:0,li:r,ai:r,Ej:0,Uj:0,Ij:0,Jj:0,Kj:0,Fj:0,Gj:0,Hj:0,ak:r,bk:r,ck:r,Hi:r,Ri:r,data:r,min:Infinity,max:-Infinity};a.Wj=W(this,"uint");a.ii=W(this,"uchar",10);a.ji=W(this,"uchar",18);a.si=W(this,"uint");a.Tj=W(this,"ushort");a.Lj=W(this,"uchar");a.ni=W(this,"uchar");a.xa=W(this,"ushort",8);a.Ii=W(this,"float");a.Ji=W(this,"float");
a.Ki=W(this,"float");a.Gi=W(this,"ushort");a.jf=W(this,"ushort");a.bi=W(this,"ushort");a.$j=W(this,"ushort");a.la=W(this,"float",8);a.sh=W(this,"float");a.Rj=W(this,"float");a.Qj=W(this,"float");a.Zj=W(this,"ushort");a.Xj=W(this,"uchar");a.qk=W(this,"uchar");a.di=W(this,"float");a.ei=W(this,"float");a.Yj=W(this,"float");a.hk=W(this,"float");a.zi=W(this,"uint",1);a.Ai=W(this,"uint",1);a.li=W(this,"uchar",80);a.ai=W(this,"uchar",24);a.Ej=W(this,"ushort");a.Uj=W(this,"ushort");a.Ij=W(this,"float");a.Jj=
W(this,"float");a.Kj=W(this,"float");a.Fj=W(this,"float");a.Gj=W(this,"float");a.Hj=W(this,"float");a.ak=W(this,"float",4);a.bk=W(this,"float",4);a.ck=W(this,"float",4);a.Hi=W(this,"uchar",16);a.Ri=W(this,"uchar",4);this.z=parseInt(a.sh,10);var b=a.xa[1]*a.xa[2]*a.xa[3];switch(a.jf){case 2:a.data=W(this,"uchar",b);break;case 4:a.data=W(this,"sshort",b);break;case 8:a.data=W(this,"sint",b);break;case 16:a.data=W(this,"float",b);break;case 256:a.data=W(this,"schar",b);break;case 512:a.data=W(this,"ushort",
b);break;case 768:a.data=W(this,"uint",b);break;default:j(Error("Unsupported NII data type: "+a.jf))}b=nf(a.data);a.min=b[0];a.max=b[1];return a};F("X.parserNII",cg);F("X.parserNII.prototype.parse",cg.prototype.parse);function dg(a,b,c){this.Oi=c;this.Hb=a;this.Nj=b;this.je=0;this.ee=r}dg.prototype.get=function(){var a;0<this.je?(this.je--,a=this.ee,this.ee=a.next,a.next=r):a=this.Hb();return a};dg.prototype.put=function(a){this.Nj(a);this.je<this.Oi&&(this.je++,a.next=this.ee,this.ee=a)};function eg(){this.xe=this.Jc=r}D("goog.async.WorkQueue.DEFAULT_MAX_UNUSED",100);var gg=new dg(function(){return new fg},function(a){a.reset()},eg.Hh);eg.prototype.add=function(a,b){var c=gg.get();c.set(a,b);this.xe?this.xe.next=c:this.Jc=c;this.xe=c};eg.prototype.remove=function(){var a=r;this.Jc&&(a=this.Jc,this.Jc=this.Jc.next,this.Jc||(this.xe=r),a.next=r);return a};function fg(){this.next=this.scope=this.mf=r}fg.prototype.set=function(a,b){this.mf=a;this.scope=b;this.next=r};
fg.prototype.reset=function(){this.next=this.scope=this.mf=r};function hg(a){da.setTimeout(function(){j(a)},0)}var ig;function jg(a,b){if(!kg)if(da.Yf&&da.Yf.Oj){var c=da.Yf.Oj(n);kg=function(){c.Nf(lg)}}else kg=function(){var a=lg;if(ma(da.Ff)&&(!da.$f||!da.$f.prototype||M("Edge")||da.$f.prototype.Ff!=da.Ff))da.Ff(a);else{if(!ig){var b=da.MessageChannel;"undefined"===typeof b&&("undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto"))&&(b=function(){var a=document.createElement(String(Zd));a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,
a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=ua(function(a){if(!("*"!=d&&a.origin!=d||a.data!=c))this.port1.onmessage()},this);b.addEventListener("message",a,s);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof b&&!M("Trident")&&!M("MSIE")){var c=new b,g={},h=g;c.port1.onmessage=function(){if(ea(g.next)){g=g.next;var a=g.yg;g.yg=r;a()}};ig=
function(a){h.next={yg:a};h=h.next;c.port2.postMessage(0)}}else ig="undefined"!==typeof document&&"onreadystatechange"in document.createElement(String(ie))?function(a){var b=document.createElement(String(ie));b.onreadystatechange=function(){b.onreadystatechange=r;b.parentNode.removeChild(b);b=r;a();a=r};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}}ig(a)}};mg||(kg(),mg=p);ng.add(a,b)}var kg,mg=s,ng=new eg;
function lg(){for(var a=r;a=ng.remove();){try{a.mf.call(a.scope)}catch(b){hg(b)}gg.put(a)}mg=s};function og(a,b){this.nb=pg;this.Df=n;this.Rd=this.wc=this.Aa=r;this.lf=s;0<og.oc?this.ve=0:0==og.oc&&(this.ae=s);og.Kc&&(this.Lf=[],qg(this,Error("created")),this.Fg=0);if(a!=ha)try{var c=this;a.call(b,function(a){rg(c,sg,a)},function(a){if(ca.Ja)try{a instanceof Error&&j(a),j(Error("Promise rejected."))}catch(b){}rg(c,tg,a)})}catch(d){rg(this,tg,d)}}D("goog.Promise.LONG_STACK_TRACES",s);D("goog.Promise.UNHANDLED_REJECTION_DELAY",0);var pg=0,sg=2,tg=3;
function ug(){this.next=this.ed=this.Dc=this.pd=this.xc=r;this.$e=s}ug.prototype.reset=function(){this.ed=this.Dc=this.pd=this.xc=r;this.$e=s};D("goog.Promise.DEFAULT_MAX_UNUSED",100);var vg=new dg(function(){return new ug},function(a){a.reset()},og.Hh);function wg(a,b,c){var d=vg.get();d.pd=a;d.Dc=b;d.ed=c;return d}
og.prototype.Nf=function(a,b,c){og.Kc&&qg(this,Error("then"));var d=ma(a)?a:r,e=ma(b)?b:r,f=wg(r,r,r);f.xc=new og(function(a,b){f.pd=d?function(e){try{var f=d.call(c,e);a(f)}catch(m){b(m)}}:a;f.Dc=e?function(d){try{var f=e.call(c,d);a(f)}catch(m){b(m)}}:b});f.xc.Aa=this;xg(this,f);return f.xc};var yg=og;yg.prototype.then=yg.prototype.Nf;yg.prototype.$goog_Thenable=p;function xg(a,b){!a.wc&&(a.nb==sg||a.nb==tg)&&zg(a);a.Rd?a.Rd.next=b:a.wc=b;a.Rd=b}
og.prototype.lk=function(a){this.nb=pg;rg(this,sg,a)};og.prototype.mk=function(a){this.nb=pg;rg(this,tg,a)};
function rg(a,b,c){if(a.nb==pg){a===c&&(b=tg,c=new TypeError("Promise cannot resolve to itself"));a.nb=1;var d;a:{var e=c,f=a.lk,g=a.mk;if(e instanceof og)og.Kc&&qg(e,Error("then")),xg(e,wg(f||ha,g||r,a)),d=p;else{var h;if(e)try{h=!!e.$goog_Thenable}catch(k){h=s}else h=s;if(h)e.Nf(f,g,a),d=p;else{if(oa(e))try{var l=e.then;if(ma(l)){var m=s;h=function(b){m||(m=p,f.call(a,b))};var q=function(b){m||(m=p,g.call(a,b))};try{l.call(e,h,q)}catch(v){q(v)}d=p;break a}}catch(w){g.call(a,w);d=p;break a}d=s}}}if(!d&&
(a.Df=c,a.nb=b,a.Aa=r,zg(a),b==tg)){var x=c;0<og.oc?a.ve=da.setTimeout(function(){Ag(a,x);Bg.call(r,x)},og.oc):0==og.oc&&(a.ae=p,jg(function(){a.ae&&(Ag(a,x),Bg.call(r,x))}))}}}function zg(a){a.lf||(a.lf=p,jg(a.qi,a))}function Cg(a){var b=r;a.wc&&(b=a.wc,a.wc=b.next,b.next=r);a.wc||(a.Rd=r);return b}
og.prototype.qi=function(){for(var a=r;a=Cg(this);){og.Kc&&this.Fg++;var b=this.nb,c=this.Df;if(b==tg&&a.Dc&&!a.$e)if(0<og.oc)for(var d=this;d&&d.ve;d=d.Aa)da.clearTimeout(d.ve),d.ve=0;else if(0==og.oc)for(d=this;d&&d.ae;d=d.Aa)d.ae=s;if(a.xc)a.xc.Aa=r,Dg(a,b,c);else try{a.$e?a.pd.call(a.ed):Dg(a,b,c)}catch(e){Bg.call(r,e)}vg.put(a)}this.lf=s};function Dg(a,b,c){b==sg?a.pd.call(a.ed,c):a.Dc&&a.Dc.call(a.ed,c)}
function qg(a,b){if(og.Kc&&ga(b.stack)){var c=b.stack.split("\n",4)[3],d=b.message,d=d+Array(11-d.length).join(" ");a.Lf.push(d+c)}}function Ag(a,b){if(og.Kc&&b&&ga(b.stack)&&a.Lf.length){for(var c=["Promise trace:"],d=a;d;d=d.Aa){for(var e=a.Fg;0<=e;e--)c.push(d.Lf[e]);c.push("Value: ["+(d.nb==tg?"REJECTED":"FULFILLED")+"] <"+String(d.Df)+">")}b.stack+="\n\n"+c.join("\n")}}var Bg=hg;function Eg(a,b,c){ma(a)?c&&(a=ua(a,c)):a&&"function"==typeof a.handleEvent?a=ua(a.handleEvent,a):j(Error("Invalid listener argument"));return 2147483647<Number(b)?-1:da.setTimeout(a,b||0)};function Fg(a){lc.call(this);this.ya=a;this.v={}}G(Fg,lc);var Gg=[];u=Fg.prototype;u.ic=function(a,b,c,d){ka(b)||(b&&(Gg[0]=b.toString()),b=Gg);for(var e=0;e<b.length;e++){var f=O(a,b[e],c||this.handleEvent,d||s,this.ya||this);if(!f)break;this.v[f.key]=f}return this};u.Yg=function(a,b,c,d){return Hg(this,a,b,c,d)};function Hg(a,b,c,d,e,f){if(ka(c))for(var g=0;g<c.length;g++)Hg(a,b,c[g],d,e,f);else{b=vc(b,c,d||a.handleEvent,e,f||a.ya||a);if(!b)return a;a.v[b.key]=b}return a}
u.Qf=function(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)this.Qf(a,b[f],c,d,e);else c=c||this.handleEvent,d=oa(d)?!!d.capture:!!d,e=e||this.ya||this,c=wc(c),d=!!d,b=Sa(a)?a.kd(b,c,d,e):a?(a=yc(a))?a.kd(b,c,d,e):r:r,b&&(Bc(b),delete this.v[b.key]);return this};u.Fc=function(){var a=this.v,b;for(b in a)this.v.hasOwnProperty(b)&&Bc(a[b]);this.v={}};u.ca=function(){Fg.n.ca.call(this);this.Fc()};u.handleEvent=function(){j(Error("EventHandler.handleEvent not implemented"))};function Ig(a,b){Fc.call(this);this.ya=new Fg(this);this.Ef(a||r);b&&(this.Ic=b)}G(Ig,Fc);u=Ig.prototype;u.l=r;u.$h=p;u.ug=r;u.vg=r;u.qa=s;u.Vj=s;u.qf=-1;u.Vg=-1;u.Di=s;u.pi=p;u.Ic="toggle_display";u.k=t("l");u.Ef=function(a){this.qa&&j(Error("Can not change this state of the popup while showing."));this.l=a};
function Jg(a,b){a.sd&&a.sd.stop();a.md&&a.md.stop();if(b){if(!a.qa&&a.wf()){a.l||j(Error("Caller must call setElement before trying to show the popup"));a.Qa();var c=ye(a.l);a.Di&&a.ya.ic(c,"keydown",a.$i,p);if(a.$h)if(a.ya.ic(c,"mousedown",a.eh,p),Gb){var d;try{d=c.activeElement}catch(e){}for(;d&&d.nodeName==Zd;){try{var f=d.contentDocument||d.contentWindow.document}catch(g){break}c=f;d=c.activeElement}a.ya.ic(c,"mousedown",a.eh,p);a.ya.ic(c,"deactivate",a.dh)}else a.ya.ic(c,"blur",a.dh);"toggle_display"==
a.Ic?(a.l.style.visibility="visible",Ue(a.l,p)):"move_offscreen"==a.Ic&&a.Qa();a.qa=p;a.qf=wa();a.Vg=-1;a.sd?(vc(a.sd,"end",a.hh,s,a),a.sd.play()):a.hh()}}else Kg(a)}u.Qa=ha;function Kg(a,b){if(!a.qa||!a.dispatchEvent({type:"beforehide",target:b}))return s;a.ya&&a.ya.Fc();a.qa=s;a.Vg=wa();a.md?(vc(a.md,"end",va(a.Cg,b),s,a),a.md.play()):a.Cg(b);return p}u.Cg=function(a){"toggle_display"==this.Ic?this.Vj?Eg(this.Pg,0,this):this.Pg():"move_offscreen"==this.Ic&&(this.l.style.top="-10000px");this.xf(a)};
u.Pg=function(){this.l.style.visibility="hidden";Ue(this.l,s)};u.wf=function(){return this.dispatchEvent("beforeshow")};u.hh=function(){this.dispatchEvent("show")};u.xf=function(a){this.dispatchEvent({type:"hide",target:a})};u.eh=function(a){var b=a.target;if(a=!Ie(this.l,b))a=!db(this.ug||[],function(a){return b===a||Ie(a,b)})&&(this.vg?Ie(this.vg,b):p)&&!(150>wa()-this.qf);a&&Kg(this,b)};u.$i=function(a){27==a.keyCode&&Kg(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
u.dh=function(a){if(this.pi){var b=ye(this.l);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||Ie(this.l,a)||a.tagName==Td)return}else if(a.target!=b)return;150>wa()-this.qf||Kg(this)}};u.ca=function(){Ig.wg(this,"disposeInternal");this.ya.Bc();oc(this.sd);oc(this.md);delete this.l;delete this.ya;delete this.ug};var Lg={};D("goog.userAgent.product.ASSUME_FIREFOX",s);D("goog.userAgent.product.ASSUME_IPHONE",s);D("goog.userAgent.product.ASSUME_IPAD",s);D("goog.userAgent.product.ASSUME_ANDROID",s);D("goog.userAgent.product.ASSUME_CHROME",s);D("goog.userAgent.product.ASSUME_SAFARI",s);
var Mg=Db.Uf||Db.Tf||Db.Wf||Lg.xh||Lg.wd||Lg.vd||Lg.ye||Lg.wh||Lg.Ch,Ng=Mg?Lg.xh:M("Firefox"),Og=Mg?Lg.wd:yb()||M("iPod"),Pg=Mg?Lg.vd:M("iPad"),Rg=Mg?Lg.ye:M("Android")&&!(Ab()||M("Firefox")||M("Opera")||M("Silk")),Sg=Mg?Lg.wh:Ab(),Tg=Mg?Lg.Ch:M("Safari")&&!(Ab()||M("Coast")||M("Opera")||M("Edge")||M("Silk")||M("Android"))&&!zb();var Ug=function(){var a;return Nb?(a=/Windows NT ([0-9.]+)/,(a=a.exec(vb))?a[1]:"0"):Mb?(a=/10[_.][0-9_.]+/,(a=a.exec(vb))?a[0].replace(/_/g,"."):"10"):Pb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(vb))?a[1]:""):Qb||Rb||Sb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(vb))?a[1].replace(/_/g,"."):""):""}();function Vg(a){return(a=a.exec(vb))?a[1]:""}var Wg=function(){if(Ng)return Vg(/Firefox\/([0-9.]+)/);if(Gb||Hb||Fb)return Vb;if(Sg)return zb()?Vg(/CriOS\/([0-9.]+)/):Vg(/Chrome\/([0-9.]+)/);if(Tg&&!zb())return Vg(/Version\/([0-9.]+)/);if(Og||Pg){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(vb);if(a)return a[1]+"."+a[2]}else if(Rg)return(a=Vg(/Android\s+([0-9.]+)/))?a:Vg(/Version\/([0-9.]+)/);return""}();function Xg(a,b,c,d,e,f,g,h){var k,l;if(k=c.offsetParent){var m=k.tagName==Yd||k.tagName==Td;if(!m||"static"!=Le(k,"position"))if(l=Qe(k),!m){var m=Ve(k),q;if(q=m){q=Tg&&0<=ub(Wg,10);var v=Tb&&0<=ub(Ug,10);q=Jb||q||v}m=q?-k.scrollLeft:m&&(!Ib||!$b("8"))&&"visible"!=Le(k,"overflowX")?k.scrollWidth-k.clientWidth-k.scrollLeft:k.scrollLeft;l=Md(l,new Ld(m,k.scrollTop))}}k=l||new Ld;l=Qe(a);m=Se(a);l=new se(l.x,l.y,m.width,m.height);(m=Pe(a))&&l.Tg(new se(m.left,m.top,m.right-m.left,m.bottom-m.top));m=
we(a);v=we(c);if(m.D!=v.D){q=m.D.body;var v=v.D.parentWindow||v.D.defaultView,w=new Ld(0,0),x=ye(q)?ye(q).parentWindow||ye(q).defaultView:window;if(Cb(x,"parent")){var z=q;do{var C;x==v?C=Qe(z):(C=Ne(z),C=new Ld(C.left,C.top));w.x+=C.x;w.y+=C.y}while(x&&x!=v&&x!=x.parent&&(z=x.frameElement)&&(x=x.parent))}q=Md(w,Qe(q));Gb&&(!(9<=Number(cc))&&!Je(m))&&(q=Md(q,Be(m.D)));l.left+=q.x;l.top+=q.y}a=(b&8&&Ve(a)?b^4:b)&-9;b=l.left;a&4?b+=l.width:a&2&&(b+=l.width/2);b=new Ld(b,l.top+(a&1?l.height:0));b=Md(b,
k);e&&(b.x+=(a&4?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var E;if(g&&(E=Pe(c)))E.top-=k.y,E.right-=k.x,E.bottom-=k.y,E.left-=k.x;return Yg(b,c,d,f,E,g,h)}
function Yg(a,b,c,d,e,f,g){a=a.h();var h=(c&8&&Ve(b)?c^4:c)&-9;c=Se(b);g=g?g.h():c.h();a=a.h();g=g.h();var k=0;if(d||0!=h)h&4?a.x-=g.width+(d?d.right:0):h&2?a.x-=g.width/2:d&&(a.x+=d.left),h&1?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){d=a;h=g;k=0;if(65==(f&65)&&(d.x<e.left||d.x>=e.right))f&=-2;if(132==(f&132)&&(d.y<e.top||d.y>=e.bottom))f&=-5;d.x<e.left&&f&1&&(d.x=e.left,k|=1);if(f&16){var l=d.x;d.x<e.left&&(d.x=e.left,k|=4);d.x+h.width>e.right&&(h.width=Math.min(e.right-d.x,l+h.width-
e.left),h.width=Math.max(h.width,0),k|=4)}d.x+h.width>e.right&&f&1&&(d.x=Math.max(e.right-h.width,e.left),k|=1);f&2&&(k|=(d.x<e.left?16:0)|(d.x+h.width>e.right?32:0));d.y<e.top&&f&4&&(d.y=e.top,k|=2);f&32&&(l=d.y,d.y<e.top&&(d.y=e.top,k|=8),d.y+h.height>e.bottom&&(h.height=Math.min(e.bottom-d.y,l+h.height-e.top),h.height=Math.max(h.height,0),k|=8));d.y+h.height>e.bottom&&f&4&&(d.y=Math.max(e.bottom-h.height,e.top),k|=2);f&8&&(k|=(d.y<e.top?64:0)|(d.y+h.height>e.bottom?128:0));e=k}else e=256;k=e}f=
new se(0,0,0,0);f.left=a.x;f.top=a.y;f.width=g.width;f.height=g.height;e=k;if(e&496)return e;a=new Ld(f.left,f.top);a instanceof Ld?(g=a.x,a=a.y):(g=a,a=n);b.style.left=Re(g);b.style.top=Re(a);g=new re(f.width,f.height);if(!(c==g||(!c||!g?0:c.width==g.width&&c.height==g.height)))c=g,a=Je(we(ye(b))),Gb&&!$b("10")&&(!a||!$b("8"))?(g=b.style,a?(Gb?(a=Xe(b,"paddingLeft"),f=Xe(b,"paddingRight"),d=Xe(b,"paddingTop"),h=Xe(b,"paddingBottom"),a=new Nd(d,f,h,a)):(a=Ke(b,"paddingLeft"),f=Ke(b,"paddingRight"),
d=Ke(b,"paddingTop"),h=Ke(b,"paddingBottom"),a=new Nd(parseFloat(d),parseFloat(f),parseFloat(h),parseFloat(a))),Gb&&!(9<=Number(cc))?(f=Ze(b,"borderLeft"),d=Ze(b,"borderRight"),h=Ze(b,"borderTop"),b=Ze(b,"borderBottom"),b=new Nd(h,d,b,f)):(f=Ke(b,"borderLeftWidth"),d=Ke(b,"borderRightWidth"),h=Ke(b,"borderTopWidth"),b=Ke(b,"borderBottomWidth"),b=new Nd(parseFloat(h),parseFloat(d),parseFloat(b),parseFloat(f))),g.pixelWidth=c.width-b.left-a.left-a.right-b.right,g.pixelHeight=c.height-b.top-a.top-a.bottom-
b.bottom):(g.pixelWidth=c.width,g.pixelHeight=c.height)):(b=b.style,Jb?b.MozBoxSizing="border-box":Kb?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(c.width,0)+"px",b.height=Math.max(c.height,0)+"px");return e};function Zg(){}Zg.prototype.Qa=aa();function $g(a,b,c){this.element=a;this.Dg=b;this.Aj=c}G($g,Zg);$g.prototype.Qa=function(a,b,c){Xg(this.element,this.Dg,a,b,n,c,this.Aj)};function ah(a,b){this.gf=a instanceof Ld?a:new Ld(a,b)}G(ah,Zg);ah.prototype.Qa=function(a,b,c,d){Xg(Me(a),0,a,b,this.gf,c,r,d)};function bh(a){Fc.call(this);this.l=a;a=Gb?"focusout":"blur";this.Pi=O(this.l,Gb?"focusin":"focus",this,!Gb);this.Qi=O(this.l,a,this,!Gb)}G(bh,Fc);bh.prototype.handleEvent=function(a){var b=new qc(a.ib);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};bh.prototype.ca=function(){bh.n.ca.call(this);Bc(this.Pi);Bc(this.Qi);delete this.l};function ch(a,b){this.Dj=8;this.le=b||n;Ig.call(this,a)}G(ch,Ig);ch.prototype.Qa=function(){if(this.le){var a=!this.qa&&"move_offscreen"!=this.Ic,b=this.k();a&&(b.style.visibility="hidden",Ue(b,p));this.le.Qa(b,this.Dj,this.tl);a&&Ue(b,s)}};function dh(a){if(a.Wa&&"function"==typeof a.Wa)return a.Wa();if(ga(a))return a.split("");if(la(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}b=[];c=0;for(d in a)b[c++]=a[d];return b};function eh(a){this.K=new Vc;a&&this.Ze(a)}function fh(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[pa]||(a[pa]=++qa)):b.substr(0,1)+a}u=eh.prototype;u.Xd=function(){return this.K.Xd()};u.add=function(a){this.K.set(fh(a),a)};u.Ze=function(a){a=dh(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};u.Fc=function(a){a=dh(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};u.remove=function(a){return this.K.remove(fh(a))};u.clear=function(){this.K.clear()};
u.contains=function(a){a=fh(a);return Zc(this.K.K,a)};u.Tg=function(a){var b=new eh;a=dh(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};u.Wa=function(){return this.K.Wa()};u.h=function(){return new eh(this)};function gh(a,b,c){this.hb=c||(a?we(ze(document,a)):we());ch.call(this,this.hb.yc(Vd,{style:"position:absolute;display:none;"}));this.hf=new Ld(1,1);this.ec=new eh;this.mc=r;a&&hh(this,a);if(b!=r)if(a=this.k(),"textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(ye(a).createTextNode(String(b)))}}
G(gh,ch);var ih=[];u=gh.prototype;u.ka=r;u.className="goog-tooltip";u.ph=500;u.Ci=0;u.jd=t("hb");function hh(a,b){b=ze(document,b);a.ec.add(b);O(b,"mouseover",a.Mg,s,a);O(b,"mouseout",a.be,s,a);O(b,"mousemove",a.Lg,s,a);O(b,"focus",a.Kg,s,a);O(b,"blur",a.be,s,a)}u.detach=function(a){if(a)a=ze(document,a),jh(this,a),this.ec.remove(a);else{for(var b=this.ec.Wa(),c=0;a=b[c];c++)jh(this,a);this.ec.clear()}};
function jh(a,b){Ac(b,"mouseover",a.Mg,s,a);Ac(b,"mouseout",a.be,s,a);Ac(b,"mousemove",a.Lg,s,a);Ac(b,"focus",a.Kg,s,a);Ac(b,"blur",a.be,s,a)}u.Ef=function(a){var b=this.k();b&&Ge(b);gh.n.Ef.call(this,a);a?(b=this.hb.D.body,b.insertBefore(a,b.lastChild),oc(this.mc),this.mc=new bh(this.k()),a=va(oc,this.mc),this.gd?ea(n)?a.call(n):a():(this.kb||(this.kb=[]),this.kb.push(ea(n)?ua(a,n):a)),O(this.mc,"focusin",this.dd,n,this),O(this.mc,"focusout",this.ue,n,this)):(oc(this.mc),this.mc=r)};
u.wf=function(){if(!Ig.prototype.wf.call(this))return s;if(this.anchor)for(var a,b=0;a=ih[b];b++)Ie(a.k(),this.anchor)||Jg(a,s);0<=ab(ih,this)||ih.push(this);a=this.k();a.className=this.className;this.dd();O(a,"mouseover",this.Og,s,this);O(a,"mouseout",this.Ng,s,this);kh(this);return p};
u.xf=function(){eb(ih,this);for(var a=this.k(),b,c=0;b=ih[c];c++)b.anchor&&Ie(a,b.anchor)&&Jg(b,s);this.lh&&this.lh.ue();Ac(a,"mouseover",this.Og,s,this);Ac(a,"mouseout",this.Ng,s,this);this.anchor=n;if(0==(this.mb?this.qa?4:1:this.Cc?3:this.qa?2:0))this.qe=s;Ig.prototype.xf.call(this)};u.bh=function(a,b){this.anchor==a&&this.ec.contains(this.anchor)&&(this.qe||!this.Al?(Jg(this,s),this.qa||(this.anchor=a,this.le=b||lh(this,0)||n,this.qa&&this.Qa(),Jg(this,p))):this.anchor=n);this.mb=n};u.Jg=t("ka");
u.Ui=function(a){this.Cc=n;if(a==this.anchor){a=this.jd();var b=a.Jg();a=b&&this.k()&&a.contains(this.k(),b);(this.ka==r||this.ka!=this.k()&&!this.ec.contains(this.ka))&&(!a&&(!this.zg||!this.zg.ka))&&Jg(this,s)}};function mh(a,b){var c=Be(a.hb.D);a.hf.x=b.clientX+c.x;a.hf.y=b.clientY+c.y}u.Mg=function(a){var b=nh(this,a.target);this.ka=b;this.dd();b!=this.anchor&&(this.anchor=b,this.mb||(this.mb=Eg(ua(this.bh,this,b,n),this.ph)),oh(this),mh(this,a))};
function nh(a,b){try{for(;b&&!a.ec.contains(b);)b=b.parentNode;return b}catch(c){return r}}u.Lg=function(a){mh(this,a);this.qe=p};u.Kg=function(a){this.ka=a=nh(this,a.target);this.qe=p;if(this.anchor!=a){this.anchor=a;var b=lh(this,1);this.dd();this.mb||(this.mb=Eg(ua(this.bh,this,a,b),this.ph));oh(this)}};function lh(a,b){if(0==b){var c=a.hf.h();return new ph(c)}return new qh(a.ka)}function oh(a){if(a.anchor)for(var b,c=0;b=ih[c];c++)Ie(b.k(),a.anchor)&&(b.zg=a,a.lh=b)}
u.be=function(a){var b=nh(this,a.target),c=nh(this,a.relatedTarget);b!=c&&(b==this.ka&&(this.ka=r),kh(this),this.qe=s,this.qa&&(!a.relatedTarget||!Ie(this.k(),a.relatedTarget))?this.ue():this.anchor=n)};u.Og=function(){var a=this.k();this.ka!=a&&(this.dd(),this.ka=a)};u.Ng=function(a){var b=this.k();if(this.ka==b&&(!a.relatedTarget||!Ie(b,a.relatedTarget)))this.ka=r,this.ue()};function kh(a){a.mb&&(da.clearTimeout(a.mb),a.mb=n)}
u.ue=function(){if(2==(this.mb?this.qa?4:1:this.Cc?3:this.qa?2:0))this.Cc=Eg(ua(this.Ui,this,this.anchor),this.Ci)};u.dd=function(){this.Cc&&(da.clearTimeout(this.Cc),this.Cc=n)};u.ca=function(){Jg(this,s);kh(this);this.detach();this.k()&&Ge(this.k());this.ka=r;delete this.hb;gh.n.ca.call(this)};function ph(a,b){ah.call(this,a,b)}G(ph,ah);
ph.prototype.Qa=function(a,b,c){b=Me(a);b=Pe(b);c=c?new Nd(c.top+10,c.right,c.bottom,c.left+10):new Nd(10,0,0,10);Yg(this.gf,a,8,c,b,9)&496&&Yg(this.gf,a,8,c,b,5)};function qh(a){$g.call(this,a,5)}G(qh,$g);qh.prototype.Qa=function(a,b,c){var d=new Ld(10,0);Xg(this.element,this.Dg,a,b,d,c,9)&496&&Xg(this.element,4,a,1,d,c,5)};function rh(a,b,c,d){a==r&&j(Error("No valid parent element."));(!y(b)||!y(c))&&j(Error("Invalid coordinates."));(d==r||!(d instanceof cf))&&j(Error("Invalid interactor."));gh.call(this);this.c="caption";this.oa=a;this.Od=b;this.Pd=c;this.Pb=d;this.eb=r;this.Mb=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Mb=[a];vc(d,"k",this.fe.bind(this));this.nf()}G(rh,gh);
rh.prototype.nf=function(){if("static"==this.oa.style.position||""==this.oa.style.position)this.oa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Ee("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Mb[0]));a.appendChild(b);b.appendChild(c);this.eb=b;this.le=new ah(this.Od,this.Pd)||n;this.qa&&this.Qa();Jg(this,p);hh(this,this.oa);this.k().classList.add("x-tooltip")};
rh.prototype.fe=function(){Jg(this,s);this.eb&&Ge(this.eb);this.k()&&Ge(this.k());this.eb=r};function sh(){Q.call(this);this.c="shaders";this.Md="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Md=a+="}\n";this.Ad="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform float volumeLowerThreshold;\n";a+=
"uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="       if (labelmapOpacity < 1.0) {\n";
a+="         textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="       } else {\n";a+="         textureSum = texture2;\n";a+="       }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold) {\n";a+="       discard;\n";
a+="     };\n";a+="   };\n";a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Ad=a+="}\n"}
G(sh,Q);
var th={Yk:"vertexPosition",Xk:"vertexNormal",Wk:"vertexColor",$k:"vertexTexturePos",Zk:"vertexScalar"},uh={al:"view",Fk:"perspective",uk:"center",Ek:"objectTransform",Sk:"useObjectColor",Ck:"objectColor",Uk:"useScalars",Ok:"scalarsReplaceMode",Lk:"scalarsMin",Ik:"scalarsMax",Mk:"scalarsMinColor",Jk:"scalarsMaxColor",Nk:"scalarsMinThreshold",Kk:"scalarsMaxThreshold",Hk:"scalarsInterpolation",Gk:"pointSize",Dk:"objectOpacity",Bk:"normal",Tk:"usePicking",Vk:"useTexture",Rk:"useLabelMapTexture",zk:"labelmapOpacity",
Pk:"textureSampler",Qk:"textureSampler2",bl:"volumeLowerThreshold",hl:"volumeUpperThreshold",el:"volumeScalarMin",cl:"volumeScalarMax",fl:"volumeScalarMinColor",dl:"volumeScalarMaxColor",jl:"volumeWindowLow",il:"volumeWindowHigh",gl:"volumeTexture"};function wh(){kf.call(this);this.c="parserDCM"}G(wh,kf);wh.prototype.parse=function(a,b,c){c=this.rd(c,b);if(c.he==c.Xa){var d=c.Jf.length,e,f=0;for(e=0;e<d;e++){var g=c.Jf[e];g!==n&&(g*=c.$a,c.data.set(c.fd.subarray(g,g+c.$a),f*c.$a),f++)}b.$=[c.xa[0],c.xa[1],c.xa[2]];Infinity==c.la[2]&&(c.la[2]=1);b.I=[c.la[0],c.la[1],c.la[2]];e=nf(c.data);d=e[0];e=e[1];c.min=b.La=b.W=d;c.max=b.Ga=b.V=e;-Infinity==b.Q&&(b.Q=d);Infinity==b.U&&(b.U=e);b.Hb();b.qb=pf(this,b,c)}c=new vd;c.R=b;c.r=a;this.dispatchEvent(c)};
wh.prototype.rd=function(a,b){this.L=a;var c=0;if(b.nc!=r){g=b.nc;h=W(this,"ushort",this.L.byteLength-2*g.$a);k=0;for(l=2;0<l;)if(d=h[k++],32==d)if(f=h[k++],19==f){k++;d=h[k++];for(f=0;f<d/2;f++)m=h[k++],q=m&255,m=(m&65280)>>8,c+=String.fromCharCode(q),c+=String.fromCharCode(m),c=parseInt(c,10);l--}else if(4161==f){k++;for(var d=h[k++],e="",f=0;f<d/2;f++)m=h[k++],q=m&255,m=(m&65280)>>8,e+=String.fromCharCode(q),e+=String.fromCharCode(m);g.la=[g.la[0],g.la[1],Math.min(Math.abs(g.Wg-e),g.la[2])];g.Wg=
e;l--}g.xa[2]++}else{var g={rows:0,cols:0,la:r,af:0,ci:0,Xa:1,Zi:1,Wg:r,he:0,$a:0,fd:r,Cf:0,Jf:[],data:r,min:Infinity,max:-Infinity};g.Xa=b.q.length;g.Xa==r&&(g.Xa=1);for(var h=W(this,"ushort",this.L.byteLength),k=66,d=r,f=r,d=r,l=7;0<l;)if(d=h[k++],40==d)switch(f=h[k++],k++,d=h[k++],f){case 16:g.rows=h[k++];l--;break;case 17:g.cols=h[k++];l--;break;case 256:g.af=h[k++];l--;break;case 257:g.ci=h[k++];l--;break;case 2:g.Zi=h[k++];l--;break;case 48:e="";for(f=f=0;f<d/2;f++)var m=h[k++],q=m&255,m=(m&
65280)>>8,e=e+String.fromCharCode(q),e=e+String.fromCharCode(m);e=e.split("\\");g.la=[+e[0],+e[1],Infinity];l--}else if(32==d&&(f=h[k++],19==f)){k++;d=h[k++];for(f=0;f<d/2;f++)m=h[k++],q=m&255,m=(m&65280)>>8,c+=String.fromCharCode(q),c+=String.fromCharCode(m),c=parseInt(c,10);l--}b.nc=g;g.xa=[g.cols,g.rows,1];g.$a=g.rows*g.cols;switch(g.af){case 8:g.fd=new Uint8Array(g.cols*g.rows*g.Xa);g.data=new Uint8Array(g.cols*g.rows*g.Xa);break;case 16:g.fd=new Uint16Array(g.cols*g.rows*g.Xa);g.data=new Uint16Array(g.cols*
g.rows*g.Xa);break;case 32:g.fd=new Uint32Array(g.cols*g.rows*g.Xa),g.data=new Uint32Array(g.cols*g.rows*g.Xa)}}this.z=this.L.byteLength-2*g.$a;h=r;switch(g.af){case 8:h=W(this,"uchar",g.$a);break;case 16:h=W(this,"ushort",g.$a);break;case 32:h=W(this,"uint",g.$a)}g.Jf[c]=g.Cf;g.fd.set(h,g.Cf*g.$a);g.Cf++;++g.he;return g};F("X.parserDCM",wh);F("X.parserDCM.prototype.parse",wh.prototype.parse);function xh(){kf.call(this);this.c="parserLBL"}G(xh,kf);
xh.prototype.parse=function(a,b,c){H.ra(this.c+".parse");var d=b.vc,e=d.length;0==e&&j(Error("No _pointIndices defined on the X.object."));this.L=c;var f=[],g=W(this,"uchar",c.byteLength),h=g.length,k=s,l=0;for(c=1;c<h;c++)10==g[c-1]?(l=c,k=p):k&&32==g[c]&&(f.push(parseInt(of(g,l,c),10)),k=s);g=b.u.w?b.u.w:new Float32Array(e);h=f.length;for(c=0;c<h;c++)g[f[c]]=1;f=new Float32Array(3*e);for(c=h=0;c<e;c++)k=d[c],k>e&&j(Error("Could not find scalar for vertex.")),k=g[k],f[h++]=k,f[h++]=k,f[h++]=k;b.u.w=
g;b.u.Lc=f;b.u.g=p;H.na(this.c+".parse");d=new vd;d.R=b;d.r=a;this.dispatchEvent(d)};F("X.parserLBL",xh);F("X.parserLBL.prototype.parse",xh.prototype.parse);function yh(a){V.call(this);this.c="slice";this.m=[0,0,0];this.sc=[0,0,1];this.J=[0,1,0];this.H=this.O=10;this.$b=[0,1,0,0,1,1,1,1,1,0,0,0];this.o=this.fb=r;this.Sa=p;this.pc=[1,1,1];a!=r&&this.bc(a)}G(yh,V);yh.prototype.bc=function(a){this.m=a.m.slice();this.sc=a.sc.slice();this.J=a.J.slice();this.O=a.O;this.H=a.H;this.fb=a.fb;this.o=a.o;this.Sa=a.Sa;this.pc=a.pc;this.Sh=a.Sh;yh.n.bc.call(this,a)};
yh.prototype.Hb=function(){var a=new S(this.sc[0],this.sc[1],this.sc[2]),b=new S(this.J[0],this.J[1],this.J[2]),c=dd(b,a),d=new S(this.m[0],this.m[1],this.m[2]),e=new S(1,1,1);1==a.x?(e=new S(this.m[0],this.H/2,this.O/2),this.$b=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new S(this.O/2,this.m[1],this.H/2),this.$b=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new S(this.O/2,this.H/2,this.m[2]));var f=cd(c.h().F(),b.h().F()),f=new S(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var g=cd(c.h().F(),b),g=new S(g.x*e.x,g.y*e.y,
g.b*e.b);g.add(d);var h=cd(c,b.h().F()),h=new S(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var k=h,b=cd(c,b),b=new S(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=g;this.i=new T(18);this.j=new T(18);this.i.add(f.x,f.y,f.b);this.i.add(g.x,g.y,g.b);this.i.add(h.x,h.y,h.b);this.i.add(k.x,k.y,k.b);this.i.add(b.x,b.y,b.b);this.i.add(d.x,d.y,d.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.j.add(a.x,a.y,a.b);this.Sa&&(a=new V,a.i=new T(24),a.j=
new T(24),a.i.add(f.x,f.y,f.b),a.i.add(g.x,g.y,g.b),a.i.add(g.x,g.y,g.b),a.i.add(b.x,b.y,b.b),a.i.add(b.x,b.y,b.b),a.i.add(h.x,h.y,h.b),a.i.add(h.x,h.y,h.b),a.i.add(f.x,f.y,f.b),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.j.add(0,0,0),a.Lb=[this.pc[0],this.pc[1],this.pc[2]],a.ja="LINES",a.uc=2,this.e.push(a))};F("X.slice",yh);function R(a){V.call(this);this.c="volume";this.m=[0,0,0];this.$=[10,10,10];this.I=[1,1,1];this.qb=[];this.Oc=this.tb=this.Nc=this.sb=this.Mc=this.rb=0;this.S=new V;this.T=new V;this.cb=new V;this.Nd=this.Na=s;this.Gb=0;this.o=r;this.Sa=p;this.W=Infinity;this.V=-Infinity;this.Re=p;Ea(this,new Uc);Ea(this,new td);a!=r&&this.bc(a)}G(R,V);
R.prototype.bc=function(a){window.console.log(a);this.m=a.m.slice();this.$=a.$.slice();this.I=a.I.slice();this.rb=a.rb;this.Mc=a.Mc;this.sb=a.sb;this.Nc=a.Nc;this.tb=a.tb;this.Oc=a.Oc;this.S=new V(a.S);this.T=new V(a.T);this.cb=new V(a.cb);this.Na=a.Na;this.Nd=a.Nd;this.Gb=a.Gb;this.o=a.o;this.Sa=a.Sa;R.n.bc.call(this,a)};
R.prototype.Hb=function(){this.e.length=0;this.S.e.length=0;this.T.e.length=0;this.cb.e.length=0;this.e.push(this.S);this.e.push(this.T);this.e.push(this.cb);for(var a=0,a=0;3>a;a++){for(var b=(this.$[a]-1)/2,c=b,d=0,d=0;d<this.$[a];d++){var e=-b*this.I[a]+d*this.I[a],f=[[this.m[0]+e,this.m[1],this.m[2]],[this.m[0],this.m[1]+e,this.m[2]],[this.m[0],this.m[1],this.m[2]+e]],e=this.e[a].e,g=0,h=0,k=[1,1,1],l=this.Sa;0==a?(g=this.$[2]*this.I[2]-this.I[2],h=this.$[1]*this.I[1]-this.I[1],k=[1,1,0]):1==
a?(g=this.$[0]*this.I[0]-this.I[0],h=this.$[2]*this.I[2]-this.I[2],k=[1,0,0]):2==a&&(g=this.$[0]*this.I[0]-this.I[0],h=this.$[1]*this.I[1]-this.I[1],k=[0,1,0]);this.fb!=r&&(l=s);var m=new yh,q=m,f=f[a],v=[[1,0,0],[0,1,0],[0,0,1]][a],w=[[0,1,0],[0,0,-1],[0,1,0]][a];(f==r||!ka(f)||3!=f.length)&&j(Error("Invalid center."));(v==r||!ka(v)||3!=v.length)&&j(Error("Invalid front direction."));(w==r||!ka(w)||3!=w.length)&&j(Error("Invalid up direction."));y(g)||j(Error("Invalid width."));y(h)||j(Error("Invalid height."));
var x=s;l!=r&&(x=l);l=[1,1,1];k!=r&&(l=k);q.m=f;q.sc=v;q.J=w;q.O=g;q.H=h;q.Sa=x;q.pc=l;q.Hb();m.fb=this;m.visible=d==Math.floor(c);e.push(m)}0==a?this.Mc=this.rb=c:1==a?this.Nc=this.sb=c:2==a&&(this.Oc=this.tb=c)}this.g=p};
R.prototype.p=function(a){a="undefined"!==typeof a?a:p;if(0<this.e.length)if(this.Na!=this.Nd&&(this.Na?(this.e[0].e[parseInt(this.rb,10)].visible=s,this.e[1].e[parseInt(this.sb,10)].visible=s,this.e[2].e[parseInt(this.tb,10)].visible=s):this.e[this.Gb].visible=s,this.g=p,this.Nd=this.Na),this.Na)zh(this,this.Gb);else for(var b=0,b=0;3>b;b++){var c=this.e[b],d=0,e=0;0==b?(d=this.rb,e=this.Mc,this.Mc=this.rb):1==b?(d=this.sb,e=this.Nc,this.Nc=this.sb):2==b&&(d=this.tb,e=this.Oc,this.Oc=this.tb);c.e[parseInt(e,
10)].visible=s;c=c.e[parseInt(d,10)];c.visible=p;c.Y=1}a&&R.n.p.call(this)};R.prototype.__defineGetter__("dimensions",t("$"));R.prototype.__defineGetter__("volumeRendering",t("Na"));R.prototype.__defineSetter__("volumeRendering",function(a){this.Na=a;this.p(s)});R.prototype.__defineSetter__("visible",ba("Ma"));R.prototype.__defineGetter__("center",t("m"));R.prototype.__defineSetter__("center",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid center."));this.m=a});
R.prototype.__defineGetter__("image",t("qb"));R.prototype.__defineGetter__("labelmap",function(){this.o||(this.o=new Ah(this));return this.o});R.prototype.__defineGetter__("indexX",t("rb"));R.prototype.__defineSetter__("indexX",function(a){y(a)&&(0<=a&&a<this.S.e.length)&&(this.rb=a,this.p(s))});R.prototype.__defineGetter__("indexY",t("sb"));R.prototype.__defineSetter__("indexY",function(a){y(a)&&(0<=a&&a<this.T.e.length)&&(this.sb=a,this.p(s))});R.prototype.__defineGetter__("indexZ",t("tb"));
R.prototype.__defineSetter__("indexZ",function(a){y(a)&&(0<=a&&a<this.cb.e.length)&&(this.tb=a,this.p(s))});R.prototype.__defineGetter__("windowLow",t("W"));R.prototype.__defineSetter__("windowLow",ba("W"));R.prototype.__defineGetter__("windowHigh",t("V"));R.prototype.__defineSetter__("windowHigh",ba("V"));R.prototype.__defineGetter__("borders",t("Sa"));R.prototype.__defineSetter__("borders",ba("Sa"));R.prototype.__defineGetter__("reslicing",t("Re"));R.prototype.__defineSetter__("reslicing",ba("Re"));
function zh(a,b){if(a.Na&&(a.g||b!=a.Gb)){var c=a.e[a.Gb];c.visible=s;var c=a.e[b],d=c.e.length,e;for(e=0;e<d;e++)c.e[e].Ma=p;a.Gb=b;a.g=s}}F("X.volume",R);F("X.volume.prototype.modified",R.prototype.p);function Bh(){kf.call(this);this.c="parserSTL"}G(Bh,kf);Bh.prototype.parse=function(a,b,c){H.ra(this.c+".parse");this.L=c;var d=b.i,e=b.j;"solid"==of(W(this,"uchar",5))?(b.i=d=new T(c.byteLength),b.j=e=new T(c.byteLength),this.Af(d,e,W(this,"uchar",c.byteLength-5))):(this.z=80,c=W(this,"uint"),b.i=d=new T(9*c),b.j=e=new T(9*c),this.Bf(d,e,c));H.na(this.c+".parse");d=new vd;d.R=b;d.r=a;this.dispatchEvent(d)};
Bh.prototype.Af=function(a,b,c){var d=c.length,e=s,f=s,g=0,h;for(h=0;h<d;h++)if(10==c[h]){if(e||f){var k=of(c,g,h).split(" "),f=parseFloat(k[0]),l=parseFloat(k[1]),k=parseFloat(k[2]);e?(b.add(f,l,k),b.add(f,l,k),b.add(f,l,k)):a.add(f,l,k);f=e=s}}else 32==c[h-1]&&(102==c[h]?(g=h+=13,e=p):118==c[h]&&(g=h+=7,f=p))};
Bh.prototype.Bf=function(a,b,c){for(var d=0,d=0;d<c;d++){var e=W(this,"float",12),f=e[0],g=e[1],h=e[2];b.add(f,g,h);b.add(f,g,h);b.add(f,g,h);a.add(e[3],e[4],e[5]);a.add(e[6],e[7],e[8]);a.add(e[9],e[10],e[11]);this.z+=2}};F("X.parserSTL",Bh);F("X.parserSTL.prototype.parse",Bh.prototype.parse);function Ch(){kf.call(this);this.c="parserVTK"}G(Ch,kf);
Ch.prototype.parse=function(a,b,c){H.ra(this.c+".parse");var d=b.i,e=b.j,f=new Uint8Array(c),g="";b.i=d=new T(c.byteLength);b.j=e=new T(c.byteLength);c=0;for(var h=f.length;c<h;c+=32768)g+=of(f,c,Math.min(c+32768,h));f=g.split("\n");g=f.length;this.$c=this.ad=r;this.Ob=[];this.ua=sd;this.Pe=this.Bb=this.pb=this.Cb=s;c=0;for(h=g%8;h--;)Dh(this,f[c]),c++;for(h=0.125*g^0;h--;)Dh(this,f[c]),c++,Dh(this,f[c]),c++,Dh(this,f[c]),c++,Dh(this,f[c]),c++,Dh(this,f[c]),c++,Dh(this,f[c]),c++,Dh(this,f[c]),c++,
Dh(this,f[c]),c++;c=this.ad;var f=this.$c,g=f.length,k=h=this.Ob.length;do{var l=this.Ob[h-k],m=l.length,q;for(q=0;q<m&&!("LINES"==this.ua&&q+1>=m);q++){var v=parseInt(l[q],10),w=c.get(v);d.add(w[0],w[1],w[2]);var x=v,z=w;"LINES"==this.ua?(x=parseInt(l[q+1],10),z=c.get(x),d.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.ua&&(0==q||q==m-1)&&d.add(w[0],w[1],w[2]);v<g?(z=f.get(v),e.add(z[0],z[1],z[2]),"LINES"==this.ua?(x=f.get(x),e.add(x[0],x[1],x[2])):"TRIANGLE_STRIPS"==this.ua&&(0==q||q==m-1)&&e.add(z[0],
z[1],z[2])):(x=new S(w[0],w[1],w[2]),x.normalize(),e.add(x.x,x.y,x.b),"LINES"==this.ua?(x=new S(z[0],z[1],z[2]),x.normalize(),e.add(x.x,x.y,x.b)):"TRIANGLE_STRIPS"==this.ua&&(0==q||q==m-1)&&e.add(x.x,x.y,x.b))}k--}while(0<k);b.ja=this.ua;H.na(this.c+".parse");d=new vd;d.R=b;d.r=a;this.dispatchEvent(d)};
function Dh(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Cb=p;a.pb=s;a.Bb=s;c=parseInt(c[1],10);a.ad=new T(3*c);a.$c=new T(3*c);return;case "VERTICES":a.pb=p;a.Cb=s;a.Bb=s;c=parseInt(c[1],10);3<=c?a.ua=sd:1==c?a.ua="POINTS":j(Error("This VTK file is not supported!"));a.Ob=[];return;case "TRIANGLE_STRIPS":a.pb=p;a.Cb=s;a.Bb=s;a.ua="TRIANGLE_STRIPS";a.Ob=[];return;case "LINES":a.pb=p;a.Cb=s;a.Bb=s;a.ua="LINES";a.Ob=[];return;case "POLYGONS":a.pb=p;
a.Cb=s;a.Bb=s;a.ua="POLYGONS";a.Ob=[];return;case "POINT_DATA":a.Bb=p;a.Cb=s;a.pb=s;return}if(a.Cb)if(1==d||isNaN(parseFloat(e)))a.Cb=s;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.ad.add(e,f,g)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.ad.add(e,f,g));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.ad.add(d,e,c))}else a.pb?1==d||isNaN(parseFloat(e))?a.pb=s:(c=c.slice(1),a.Ob.push(c)):a.Bb&&("NORMALS"==e?a.Pe=p:1==d||isNaN(parseFloat(e))?
(a.Bb=s,a.Pe=s):a.Pe&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),a.$c.add(e,f,g)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.$c.add(e,f,g)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.$c.add(d,e,c))))}F("X.parserVTK",Ch);F("X.parserVTK.prototype.parse",Ch.prototype.parse);function Eh(){kf.call(this);this.c="parserFSM";this.Cd=s}G(Eh,kf);
Eh.prototype.parse=function(a,b,c){H.ra(this.c+".parse");this.L=c;var d=b.i,e=b.j;b.vc=[];var f=b.vc;c=0;var g;do g=W(this,"uchar"),c++;while(200>c&&10!=g);W(this,"uchar");e=W(this,"uint");c=W(this,"uint");var h=W(this,"float",3*e);g=W(this,"uint",3*c);var k=new Uint32Array(e),l=new Float32Array(9*c);b.i=d=new T(9*c);b.j=e=new T(9*c);var m;for(m=0;m<c;m++){var q=3*m,v=g[q],w=g[q+1],x=g[q+2];f.push(v);f.push(w);f.push(x);k[v]+=1;k[w]+=1;k[x]+=1;var q=3*v,z=3*w,C=3*x,E=h[q],A=h[q+1],B=h[q+2],w=h[z],
x=h[z+1],v=h[z+2],J=h[C],I=h[C+1],P=h[C+2];d.add(E,A,B);d.add(w,x,v);d.add(J,I,P);E=new S(E,A,B);J=new S(J,I,P);w=(new S(w,x,v)).h().ma(E);x=J.h().ma(E);w=dd(w,x).normalize();l[q]+=w.x;l[q+1]+=w.y;l[q+2]+=w.b;l[z]+=w.x;l[z+1]+=w.y;l[z+2]+=w.b;l[C]+=w.x;l[C+1]+=w.y;l[C+2]+=w.b}for(m=0;m<c;m++)q=3*m,v=g[q],w=g[q+1],x=g[q+2],q=3*v,z=3*w,C=3*x,f=new S(l[z],l[z+1],l[z+2]),h=new S(l[C],l[C+1],l[C+2]),q=(new S(l[q],l[q+1],l[q+2])).scale(1/k[v]).normalize(),f=f.scale(1/k[w]).normalize(),h=h.scale(1/k[x]).normalize(),
e.add(q.x,q.y,q.b),e.add(f.x,f.y,f.b),e.add(h.x,h.y,h.b);b.ja=sd;H.na(this.c+".parse");c=new vd;c.R=b;c.r=a;this.dispatchEvent(c)};F("X.parserFSM",Eh);F("X.parserFSM.prototype.parse",Eh.prototype.parse);function Fh(){kf.call(this);this.c="parserMGZ";this.Cd=s}G(Fh,kf);Fh.prototype.parse=function(a,b,c,d){H.ra(this.c+".parse");d&&(c=(new bg(new Uint8Array(c))).zc(),c=c.buffer);d=this.rd(c);b.$=[d.tf,d.uf,d.vf];b.I=d.rh;c=d.min;var e=d.max;b.La=b.W=c;b.Ga=b.V=e;-Infinity==b.Q&&(b.Q=c);Infinity==b.U&&(b.U=e);b.Hb();H.na(this.c+".parse");b.qb=pf(this,b,d);d=new vd;d.R=b;d.r=a;this.dispatchEvent(d)};
Fh.prototype.rd=function(a){this.L=a;a={version:0,Nh:0,Lh:0,xi:0,Mh:0,tf:0,uf:0,vf:0,Yi:0,type:0,oi:0,nh:0,Ak:r,Jh:r,rh:r,data:r,min:Infinity,max:-Infinity};a.version=W(this,"uint");a.tf=W(this,"uint");a.uf=W(this,"uint");a.vf=W(this,"uint");a.Yi=W(this,"uint");a.type=W(this,"uint");a.oi=W(this,"uint");a.nh=W(this,"ushort");if(0<a.nh){a.rh=W(this,"float",3);var b=[];b.push(W(this,"float",3));b.push(W(this,"float",3));b.push(W(this,"float",3));b.push(W(this,"float",3));a.Jh=b}this.z=284;b=a.tf*a.uf*
a.vf;switch(a.type){case 0:a.data=W(this,"uchar",b);break;case 1:a.data=W(this,"uint",b);break;case 3:a.data=W(this,"float",b);break;case 4:a.data=W(this,"ushort",b);break;default:j(Error("Unsupported MGH/MGZ data type: "+a.type))}b=nf(a.data);a.min=b[0];a.max=b[1];this.z+16<this.L.byteLength&&(a.Nh=W(this,"float"),a.xi=W(this,"float"),a.Lh=W(this,"float"),a.Mh=W(this,"float"));return a};F("X.parserMGZ",Fh);F("X.parserMGZ.prototype.parse",Fh.prototype.parse);function Gh(){kf.call(this);this.c="parserCRV";this.Cd=s}G(Gh,kf);
Gh.prototype.parse=function(a,b,c){H.ra(this.c+".parse");var d=b.vc;0==d.length&&j(Error("No _pointIndices defined on the X.object."));this.L=c;this.z=3;var e=W(this,"uint");W(this,"uint");W(this,"uint");var f=0,g=0,h=0,k=0,l=0,m=0,q=0,v=0,w=0,x=0,z=0;c=Array(2);var C=Array(2),E=W(this,"float",e),A;for(A=0;A<e;A++){var B=E[A];0==A&&(c[0]=C[0]=B);0<=B?(f++,k+=B):(g++,h+=B);w+=B;z++;C[0]=Math.max(B,C[0]);c[0]=Math.min(B,c[0]);E[A]=B}0!=f&&(l=k/f);0!=g&&(m=h/g);0!=z&&(x=w/z);for(z=w=h=k=0;z<e;z++)B=
E[z],A=0,0<=B?(A=Math.pow(B-l,2),k+=A):(A=Math.pow(B-m,2),h+=A),A=Math.pow(B-x,2),w+=A;1<f&&(q=Math.sqrt(k/(f-1)));1<g&&(v=Math.sqrt(h/(g-1)));c[1]=m-2.5*v;C[1]=l+2.5*q;e=d.length;f=new Float32Array(3*e);for(z=0;z<e;z++)g=E[d[z]],h=3*z,f[h]=g,f[h+1]=g,f[h+2]=g;b.u.La=c[1];b.u.Ga=C[1];-Infinity==b.u.Q&&(b.u.Q=c[1]);Infinity==b.u.U&&(b.u.U=C[1]);b.u.w=E;b.u.Lc=f;b.u.g=p;H.na(this.c+".parse");d=new vd;d.R=b;d.r=a;this.dispatchEvent(d)};F("X.parserCRV",Gh);F("X.parserCRV.prototype.parse",Gh.prototype.parse);function Hh(){kf.call(this);this.c="parserIMAGE"}G(Hh,kf);Hh.prototype.parse=function(a,b,c,d){c instanceof ArrayBuffer||j(Error());for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=window.btoa(g.join(""));f=new Image;vc(f,"load",this.Bj.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};Hh.prototype.Bj=function(a,b,c){b.qb=a;b.wa=r;a=new vd;a.R=c;a.r=b;this.dispatchEvent(a)};F("X.parserIMAGE",Hh);F("X.parserIMAGE.prototype.parse",Hh.prototype.parse);function Ih(){kf.call(this);this.c="parserLUT"}G(Ih,kf);
Ih.prototype.parse=function(a,b,c){H.ra(this.c+".parse");this.L=c;c=W(this,"uchar",c.byteLength);var d=c.length,e=0,f;for(f=0;f<d;f++)if(10==c[f]){var g=of(c,e,f),e=f+1,g=g.replace(/^\s+|\s+$/g,"");"#"!=g[0]&&(g=g.split(" "),g=g.filter(function(a){return""!=a}),6==g.length&&(g[2]=parseInt(g[2],10)/255,g[3]=parseInt(g[3],10)/255,g[4]=parseInt(g[4],10)/255,g[5]=parseInt(g[5],10)/255,a.add(parseInt(g[0],10),g[1],g[2],g[3],g[4],g[5],10)))}H.na(this.c+".parse");c=new vd;c.R=b;c.r=a;this.dispatchEvent(c)};
F("X.parserLUT",Ih);F("X.parserLUT.prototype.parse",Ih.prototype.parse);function Jh(){kf.call(this);this.c="parserGZ"}G(Jh,kf);Jh.prototype.parse=function(a,b,c){H.ra(this.c+".parse");this.L=(new bg(new Uint8Array(c))).zc();window.wl=this.L;var d=b.i,e=b.j;"solid"==of(W(this,"uchar",5))?(b.i=d=new T(c.byteLength),b.j=e=new T(c.byteLength),this.Af(d,e,W(this,"uchar",c.byteLength-5))):(this.z=80,c=W(this,"uint"),b.i=d=new T(9*c),b.j=e=new T(9*c),this.Bf(d,e,c));H.na(this.c+".parse");d=new vd;d.R=b;d.r=a;this.dispatchEvent(d)};
Jh.prototype.Af=function(a,b,c){var d=c.length,e=s,f=s,g=0,h;for(h=0;h<d;h++)if(10==c[h]){if(e||f){var k=of(c,g,h).split(" "),f=parseFloat(k[0]),l=parseFloat(k[1]),k=parseFloat(k[2]);e?(b.add(f,l,k),b.add(f,l,k),b.add(f,l,k)):a.add(f,l,k);f=e=s}}else 32==c[h-1]&&(102==c[h]?(g=h+=13,e=p):118==c[h]&&(g=h+=7,f=p))};
Jh.prototype.Bf=function(a,b,c){for(var d=0,d=0;d<c;d++){var e=W(this,"float",12),f=e[0],g=e[1],h=e[2];b.add(f,g,h);b.add(f,g,h);b.add(f,g,h);a.add(e[3],e[4],e[5]);a.add(e[6],e[7],e[8]);a.add(e[9],e[10],e[11]);this.z+=2}};F("X.parserGZ",Jh);F("X.parserGZ.prototype.parse",Jh.prototype.parse);function Kh(){kf.call(this);this.c="parserNRRD"}G(Kh,kf);
Kh.prototype.parse=function(a,b,c){H.ra(this.c+".parse");this.L=c;c=W(this,"uchar",c.byteLength);var d=c.length,e=r,f=0,g;for(g=1;g<d;g++)if(10==c[g-1]&&10==c[g]){e=of(c,0,g-2);f=g+1;break}var h,k,l,m,d=e.split(/\r?\n/),e=0;for(g=d.length;e<g;e++)if(h=d[e],h.match(/NRRD\d+/))this.Mi=p;else if(!h.match(/^#/)&&(m=h.match(/(.*):(.*)/)))k=m[1].trim(),h=m[2].trim(),(l=this.ti[k])?l.call(this,h):this[k]=h;this.Mi||j(Error("Not an NRRD file"));"raw"!==this.encoding&&("gzip"!==this.encoding&&"gz"!==this.encoding)&&
j(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Ia&&(this.Ia=[new S(1,0,0),new S(0,1,0),new S(0,0,1)],this.Kf)){d=[];for(m=0;2>=m;m++)d.push(!isNaN(this.Kf[m])?this.Ia[m].scale(this.Kf[m]):n)}f=c.subarray(f);if("gzip"==this.encoding||"gz"==this.encoding)f=(new bg(new Uint8Array(f))).zc();f=f.buffer;c={data:r,min:Infinity,max:-Infinity};c.data=new this.Kb(f);m=nf(c.data);f=c.min=m[0];m=c.max=m[1];b.$=[this.Hf[0],this.Hf[1],this.Hf[2]];d=(new S(this.Ia[0][0],this.Ia[0][1],this.Ia[0][2])).jb();
e=(new S(this.Ia[1][0],this.Ia[1][1],this.Ia[1][2])).jb();g=(new S(this.Ia[2][0],this.Ia[2][1],this.Ia[2][2])).jb();b.I=[d,e,g];b.La=b.W=f;b.Ga=b.V=m;-Infinity==b.Q&&(b.Q=f);Infinity==b.U&&(b.U=m);b.Hb();H.na(this.c+".parse");b.qb=pf(this,b,c);c=new vd;c.R=b;c.r=a;this.dispatchEvent(c)};
Kh.prototype.ti={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Kb=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Kb=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Kb=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Kb=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Kb=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Kb=Uint32Array;break;case "float":this.Kb=Float32Array;break;default:j(Error("Unsupported NRRD data type: "+a))}return this.type=a},endian:function(a){return this.ql=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.xa=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.Hf=e},"space directions":function(a){var b,
c;a=a.match(/\(.*?\)/g);var d,e,f;f=[];d=0;for(e=a.length;d<e;d++)c=a[d],f.push(function(){var a,d,e,f;e=c.slice(1,-1).split(/,/);f=[];a=0;for(d=e.length;a<d;a++)b=e[a],f.push(parseFloat(b));return f}());return this.Ia=f},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.Kf=e}};F("X.parserNRRD",Kh);F("X.parserNRRD.prototype.parse",Kh.prototype.parse);function Lh(){kf.call(this);this.c="parserOBJ"}G(Lh,kf);
Lh.prototype.parse=function(a,b,c){H.ra(this.c+".parse");this.L=c;c=c.byteLength;var d=W(this,"uchar",c),e=[];b.i=new T(c);b.j=new T(c);var f=b.i,g=b.j,h=0,k;for(k=0;k<c;++k)if(10==d[k]){var l=of(d,h,k).replace(/\s{2,}/g," ").split(" ");if("v"==l[0])e.push([parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])]);else if("f"==l[0]){var m=e[parseInt(l[1],10)-1],h=e[parseInt(l[2],10)-1],l=e[parseInt(l[3],10)-1];f.add(m[0],m[1],m[2]);f.add(h[0],h[1],h[2]);f.add(l[0],l[1],l[2]);m=new S(m[0],m[1],m[2]);l=
new S(l[0],l[1],l[2]);h=dd((new S(h[0],h[1],h[2])).ma(m),l.ma(m));h.normalize();g.add(h.x,h.y,h.b);g.add(h.x,h.y,h.b);g.add(h.x,h.y,h.b)}h=k+1}H.na(this.c+".parse");c=new vd;c.R=b;c.r=a;this.dispatchEvent(c)};F("X.parserOBJ",Lh);F("X.parserOBJ.prototype.parse",Lh.prototype.parse);function Mh(){Q.call(this);this.c="loader";this.tc=new Vc;this.Yc=0}G(Mh,Q);function Nh(a,b){a.Yc+=b/a.tc.Xd()/3;a.Yc=Math.min(1,a.Yc);var c=new Jd;c.tg=a.Yc;a.dispatchEvent(c)}function Oh(a){a=a.q.Gd;var b=a.split(".").pop().toUpperCase().split("?")[0];b==a.toUpperCase()&&(b="");b in Ph||(b="STL",window.console.log("Unknow extension. Set default .stl"));return[a,b,Ph[b][0],Ph[b][1],Ph[b][2]]}
Mh.prototype.load=function(a,b){(!a||!b)&&j(Error("No container or object to load."));if(!Zc(this.tc.K,a.ta)||this.tc.get(a.ta)){this.tc.set(a.ta,s);var c=Oh(a)[0];if(a.Nb!=r)this.parse(r,a,b);else{var d=new XMLHttpRequest;O(d,"abort",this.Hg.bind(this,d,a,b));O(d,"error",this.Hg.bind(this,d,a,b));O(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,p);d.responseType="arraybuffer";d.send(r)}}};
Mh.prototype.parse=function(a,b,c){Nh(this,1);setTimeout(function(){var d=Oh(b),e=d[3],d=new d[2];vc(d,"h",this.complete.bind(this));var f=b.Nb;f==r&&(f=a.response);d.parse(b,c,f,e)}.bind(this),100)};Mh.prototype.complete=function(a){Nh(this,1);setTimeout(function(){var b=a.r,c=a.R;b.q.g=s;b.g=p;c.p();this.tc.set(b.ta,p)}.bind(this),100)};Mh.prototype.Hg=function(a,b,c){j(Error("Loading failed: ",b,c))};
var Ph={OBJ:[Lh,r],STL:[Bh,r],VTK:[Ch,r],TRK:[uf,r],FSM:[Eh,r],INFLATED:[Eh,r],SMOOTHWM:[Eh,r],SPHERE:[Eh,r],PIAL:[Eh,r],ORIG:[Eh,r],NRRD:[Kh,r],NII:[cg,r],GZ:[Jh,r],DCM:[wh,r],DICOM:[wh,r],"":[wh,r],CRV:[Gh,r],LABEL:[xh,r],MGH:[Fh,s],MGZ:[Fh,p],TXT:[Ih,r],LUT:[Ih,r],PNG:[Hh,"png"],JPG:[Hh,"jpeg"],JPEG:[Hh,"jpeg"],GIF:[Hh,"gif"]};function Qh(a){function b(a,b){a*=2*Math.PI;b*=Math.PI;var e=new xa(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new Hc(ya(c,za(e,d)),e))}this.B=[];a=a||{};var c=new xa(a.ff||[0,0,0]),d=a.Ya||1,e=a.If||16;a=a.dk||8;for(var f=[],g=[],h=0;h<e;h++)for(var k=0;k<a;k++)g=[],b(h/e,k/a),0<k&&b((h+1)/e,k/a),k<a-1&&b((h+1)/e,(k+1)/a),b(h/e,(k+1)/a),f.push(new Jc(g));return Rc(f)}G(Qh,Qc);function Rh(){V.call(this);this.c="sphere";this.m=[0,0,0];this.Wb=5;this.Zb=32;this.Uh=16;Ea(this,new xd)}G(Rh,V);Rh.prototype.__defineGetter__("center",t("m"));Rh.prototype.__defineSetter__("center",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid center"));this.m=a});Rh.prototype.__defineGetter__("radius",t("Wb"));Rh.prototype.__defineSetter__("radius",function(a){y(a)||j(Error("Invalid radius."));this.Wb=a});
Rh.prototype.p=function(){zd(this,new Qh({ff:this.m,Ya:this.Wb,If:this.Zb,dk:this.Uh}));Rh.n.p.call(this)};F("X.sphere",Rh);F("X.sphere.prototype.modified",Rh.prototype.p);function Ah(a){R.call(this);this.c="labelmap";this.fb=a}G(Ah,R);Ah.prototype.p=function(){var a=new vd;a.R=this;this.dispatchEvent(a);this.fb.p()};F("X.labelmap",Ah);function Sh(a){this.B=[];a=a||{};var b=new xa(a.ff||[0,0,0]),c=!a.Ya?[1,1,1]:a.Ya.length?a.Ya:[a.Ya,a.Ya,a.Ya];return Rc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Jc(a[0].map(function(e){e=new xa(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new Hc(e,new xa(a[1]))}))}))}G(Sh,Qc);function Th(){V.call(this);this.c="cube";this.m=[0,0,0];this.Ke=this.Je=this.Ie=20;this.$b=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Ea(this,new xd)}G(Th,V);Th.prototype.__defineGetter__("center",t("m"));Th.prototype.__defineSetter__("center",function(a){(a==r||!ka(a)||3!=a.length)&&j(Error("Invalid center"));this.m=a});Th.prototype.__defineGetter__("lengthX",t("Ie"));
Th.prototype.__defineSetter__("lengthX",function(a){y(a)||j(Error("Invalid lengthX."));this.Ie=a});Th.prototype.__defineGetter__("lengthY",t("Je"));Th.prototype.__defineSetter__("lengthY",function(a){y(a)||j(Error("Invalid lengthY."));this.Je=a});Th.prototype.__defineGetter__("lengthZ",t("Ke"));Th.prototype.__defineSetter__("lengthZ",function(a){y(a)||j(Error("Invalid lengthZ."));this.Ke=a});Th.prototype.p=function(){zd(this,new Sh({ff:this.m,Ya:[this.Ie/2,this.Je/2,this.Ke/2]}));Th.n.p.call(this)};
F("X.cube",Th);F("X.cube.prototype.modified",Th.prototype.p);function ef(a){cf.call(this,a);this.c="interactor3D";this.kl=s}G(ef,cf);ef.prototype.qd=function(a){ef.n.qd.call(this,a);var b=new Ed;a.Ac==r&&(a.Ac=0);b.Ta=0>a.Ac;b.Ka=p;this.dispatchEvent(b)};function Uh(a){Q.call(this);this.c="array";this.w=[];this.cg=a}G(Uh,Q);Uh.prototype.add=function(a){this.w.push(a);return p};Uh.prototype.clear=function(){this.w.length=0};function Vh(a,b,c){var d=c-b;if(!(2>d)){d=b+Math.floor(d/2);Vh(a,b,d);for(Vh(a,d,c);b<d;++b)if(0<a.cg(a.w[b],a.w[d])){var e=a.w[b];a.w[b]=a.w[d];for(var f=a,g=d,h=c;g+1<h&&0>f.cg(f.w[g+1],e);){var k=f,l=g+1,m=k.w[g];k.w[g]=k.w[l];k.w[l]=m;++g}f.w[g]=e}}}Uh.prototype.sort=function(){Vh(this,0,this.w.length)};function Wh(a,b){hf.call(this,a,b);this.c="camera2D"}G(Wh,hf);Wh.prototype.rotate=function(a){a=Wh.n.rotate.call(this,a);var b=new Bd;0<a.x?b.Ye--:0>a.x&&b.Ye++;0<a.y?b.Le++:0>a.y&&b.Le--;this.dispatchEvent(b)};function Xh(){}Xh.of=n;Xh.yi=function(){return Xh.of?Xh.of:Xh.of=new Xh};Xh.prototype.Xi=0;function Yh(a){Fc.call(this);this.hb=a||we();this.Bl=Zh;this.Sg=r;this.hc=s;this.l=r;this.ld=n;this.Sd=this.Td=this.Aa=this.Vi=r;this.ok=s}G(Yh,Fc);D("goog.ui.Component.ALLOW_DETACHED_DECORATION",s);Yh.prototype.Ei=Xh.yi();D("goog.ui.Component.DEFAULT_BIDI_DIR",0);var Zh=1==Yh.Gh?s:-1==Yh.Gh?p:r;u=Yh.prototype;u.k=t("l");u.Gf=function(a){this.Aa&&this.Aa!=a&&j(Error("Method not supported"));Yh.n.Gf.call(this,a)};u.jd=t("hb");u.yc=function(){this.l=this.hb.createElement(Vd)};u.lc=function(a){this.Jb(a)};
u.Jb=function(a,b){this.hc&&j(Error("Component already rendered"));this.l||this.yc();a?a.insertBefore(this.l,b||r):this.hb.D.body.appendChild(this.l);(!this.Aa||this.Aa.hc)&&this.Vd()};u.Vd=function(){this.hc=p;$h(this,function(a){!a.hc&&a.k()&&a.Vd()})};u.hd=function(){$h(this,function(a){a.hc&&a.hd()});this.ld&&this.ld.Fc();this.hc=s};
u.ca=function(){this.hc&&this.hd();this.ld&&(this.ld.Bc(),delete this.ld);$h(this,function(a){a.Bc()});!this.ok&&this.l&&Ge(this.l);this.Aa=this.Vi=this.l=this.Sd=this.Td=r;Yh.n.ca.call(this)};function $h(a,b){a.Td&&bb(a.Td,b,n)}
u.removeChild=function(a,b){if(a){var c=ga(a)?a:a.Sg||(a.Sg=":"+(a.Ei.Xi++).toString(36)),d;this.Sd&&c?(d=this.Sd,d=(d!==r&&c in d?d[c]:n)||r):d=r;a=d;c&&a&&(d=this.Sd,c in d&&delete d[c],eb(this.Td,a),b&&(a.hd(),a.l&&Ge(a.l)),c=a,c==r&&j(Error("Unable to set parent component")),c.Aa=r,Yh.n.Gf.call(c,r))}a||j(Error("Child is not in parent component"));return a};var ai;Ya([Pd,Rd,Ud,Xd,$d,ae,ce,de,fe,ge,he,le,je,ke,oe,pe,qe]);function bi(a,b,c){ka(c)&&(c=c.join(" "));var d="aria-"+b;""===c||c==n?(ai||(ai={atomic:s,autocomplete:"none",dropeffect:"none",haspopup:s,live:"off",multiline:s,multiselectable:s,orientation:"vertical",readonly:s,relevant:"additions text",required:s,sort:"none",busy:s,disabled:s,hidden:s,invalid:"false"}),c=ai,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};D("goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST",s);function ci(){Fc.call(this)}G(ci,Fc);u=ci.prototype;u.Rf=0;u.od=0;u.sf=100;u.Gg=0;u.Mf=1;u.Li=s;u.Wi=s;u.se=function(a){a=di(this,a);this.Rf!=a&&(this.Rf=a+this.Gg>this.sf?this.sf-this.Gg:a<this.od?this.od:a,!this.Li&&!this.Wi&&this.dispatchEvent("change"))};u.$d=function(){return di(this,this.Rf)};u.Zd=function(){return di(this,this.od)};u.Yd=function(){return di(this,this.sf)};function di(a,b){return a.Mf==r?b:a.od+Math.round((b-a.od)/a.Mf)*a.Mf};function ei(a){Yh.call(this,a);this.Ec=new ci;O(this.Ec,"change",this.Bi,s,this)}G(ei,Yh);var fi={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};u=ei.prototype;u.yc=function(){this.Ra=this.jd().yc(Vd,"progress-bar-thumb");this.l=this.jd().yc(Vd,fi[this.jh],this.Ra);gi(this);bi(this.k(),"valuemin",this.Zd());bi(this.k(),"valuemax",this.Yd())};
u.Vd=function(){ei.n.Vd.call(this);Gb&&7>Vb&&O(this.k(),"resize",this.we,s,this);this.we();var a=this.k();a.setAttribute("role","progressbar");bi(a,"live","polite")};u.hd=function(){ei.n.hd.call(this);hi(this)};function hi(a){Gb&&7>Vb&&Ac(a.k(),"resize",a.we,s,a)}u.$d=function(){return this.Ec.$d()};u.se=function(a){this.Ec.se(a);this.k()&&gi(this)};function gi(a){bi(a.k(),"valuenow",a.$d())}u.Zd=function(){return this.Ec.Zd()};u.Yd=function(){return this.Ec.Yd()};u.jh="horizontal";
u.Bi=function(){this.we();this.dispatchEvent("change")};u.we=function(){if(this.Ra){var a=this.Zd(),b=this.Yd(),a=(this.$d()-a)/(b-a),b=Math.round(100*a);"vertical"==this.jh?Gb&&7>Vb?(this.Ra.style.top="0",this.Ra.style.height="100%",b=this.Ra.offsetHeight,a=Math.round(a*b),this.Ra.style.top=b-a+"px",this.Ra.style.height=a+"px"):(this.Ra.style.top=100-b+"%",this.Ra.style.height=b+"%"):this.Ra.style.width=b+"%"}};u.ca=function(){hi(this);ei.n.ca.call(this);this.Ra=r;this.Ec.Bc()};function ii(a,b){a==r&&j(Error("No valid parent element."));b==r&&j(Error("Invalid initial value."));ei.call(this);this.c="progressbar";this.oa=a;this.ng="";this.zd=this.eb=r;this.Mb=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Mb=[c,d,e];this.se(b);this.nf()}G(ii,ei);
ii.prototype.nf=function(){if("static"==this.oa.style.position||""==this.oa.style.position)this.ng=this.oa.style.position,this.oa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Ee("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Mb[0])),d=document.createTextNode(String(this.Mb[1])),e=document.createTextNode(String(this.Mb[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.eb=b;this.lc(this.oa);a=this.k();a.style.position=
"absolute";a.style.top=(this.oa.clientHeight-5)/2+"px";a.style.left=(this.oa.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};function ji(a){var b=a.k().style.top,c=a.k().style.left;Ge(a.k());var d=new ii(a.oa,100),e=d.k();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(ea(e.firstElementChild)?e.firstElementChild:He(e.firstChild)).classList.add("progress-bar-thumb-done");a.zd=d}
ii.prototype.fe=function(){this.eb&&Ge(this.eb);this.k()&&Ge(this.k());this.zd&&Ge(this.zd.k());this.zd=this.eb=r;this.oa.style.position=this.ng};function ki(){Q.call(this);this.c="renderer";this.r=window.document.body;this.O=this.r.clientWidth;this.H=this.r.clientHeight;this.Pb=this.t=this.ga=r;this.bb=new Uh(wd);this.Ua=[];this.C=r;this.Qe=this.Dd=this.Ed=s;this.a=this.pa=r;this.G={PROGRESSBAR_ENABLED:p,INTERMEDIATE_RENDERING:s};this.ag=-1;window.console.log("XTK release 10.1 -- 2018-04-07 20:09:29 -- https://github.com/nhuanhoangduc/nhuanhoang-xtk -- @nhuanhoang")}G(ki,Q);u=ki.prototype;u.lj=function(a){this.pa&&this.pa.se(100*a.tg)};
u.bj=function(a){a!=r&&a instanceof vd&&a.R&&this.Za(a.R)};u.yf=function(a){(a==r||!(a instanceof Gd))&&j(Error("Invalid hover event."))};u.mj=function(){var a=ze(document,this.r);this.O=a.clientWidth;this.H=a.clientHeight;a=ze(document,this.ga);a.width=this.O;a.height=this.H;"renderer3D"==this.c&&(this.a.viewport(0,0,this.O,this.H),this.t.og=H.d.rf(H.d.nd(),this.t.eg,this.ga.width/this.ga.height,1,1E4));this.Hc()};u.zf=function(a){(a==r||!(a instanceof Fd))&&j(Error("Invalid scroll event."))};
ki.prototype.__defineGetter__("config",t("G"));ki.prototype.__defineGetter__("interactor",t("Pb"));ki.prototype.__defineGetter__("camera",t("t"));ki.prototype.__defineGetter__("loadingCompleted",t("Dd"));ki.prototype.__defineGetter__("container",t("r"));ki.prototype.__defineSetter__("container",function(a){a==r&&j(Error("An ID to a valid container (<div>..) is required."));var b=a;ga(b)&&(b=ze(document,a));oa(b)&&1==b.nodeType||j(Error("Could not find the given container."));this.r=b});u=ki.prototype;
u.Hc=function(){this.t.reset()};
u.Ha=function(a){var b=Ee("canvas");this.r.appendChild(b);this.O=this.r.clientWidth;this.H=this.r.clientHeight;b.width=this.O;b.height=this.H;try{var c=b.getContext(a);c||j(Error())}catch(d){var e="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.r.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+e+"</p>";
j(Error(e))}this.C=new Mh;O(this.C,"i",this.lj.bind(this));this.ga=b;this.a=c;b=new ef(this.ga);"2d"==a&&(b=new gf(this.ga));b.Ha();O(b,"f",this.Hc.bind(this));O(b,"j",this.yf.bind(this));O(b,"d",this.zf.bind(this));this.Pb=b;b=new jf(this.O,this.H);"2d"==a&&(b=new Wh(this.O,this.H));b.observe(this.Pb);this.t=b;O(window,"resize",this.mj,s,this)};u.add=function(a){(a instanceof Th||a instanceof Rh||a instanceof wf)&&a.p();this.Ua.push(a);this.Za(a)};
u.Za=function(a){(!this.ga||!this.a)&&j(Error("The renderer was not initialized properly."));a==r&&(window.console.log(a),j(Error("Illegal object.")));var b;Sa(a)?b=a.de("h",n):(b=yc(a),b=!!b&&b.de("h",n));b||O(a,"h",this.bj.bind(this))};u.get=function(a){a==r&&j(Error("Invalid object id."));for(var b=this.bb.w,c=b.length,d=0,d=0;d<c;d++)if(b[d].ta==a)return b[d];return r};
u.lc=function(){(!this.ga||!this.a)&&j(Error("The renderer was not initialized properly."));if(this.qg==r){if(Yc(this.C.tc)){if(this.G.PROGRESSBAR_ENABLED&&!this.pa&&(this.pa=new ii(this.r,3)),this.Qe=this.Dd=s,this.qg=Eg(function(){this.qg=r;this.lc()}.bind(this),100),!this.G.INTERMEDIATE_RENDERING)return}else if(!this.Dd&&!this.Qe&&(this.Qe=p,eval("this.onShowtime()"),this.Dd=p),this.pa){this.G.PROGRESSBAR_ENABLED&&(this.pa&&!this.bg)&&(ji(this.pa),this.bg=Eg(function(){this.bg=r;this.pa&&(this.pa.fe(),
this.pa=r);this.lc()}.bind(this),700));return}this.ag=window.requestAnimationFrame(this.lc.bind(this),this.ga);eval("this.onRender()");this.Jb(s,p)}};u.ih=aa();u.gh=aa();u.Jb=aa();
u.Ud=function(){window.cancelAnimationFrame(this.ag);this.C&&(delete this.C,this.C=r);this.pa&&(this.pa.fe(),delete this.pa,this.pa=r);this.bb.clear();delete this.bb;this.Ua.length=0;delete this.Ua;delete this.C;this.C=r;delete this.t;this.t=r;delete this.Pb;this.Pb=r;delete this.a;this.a=r;Ge(this.ga);delete this.ga;this.ga=r};function li(){ki.call(this);this.c="renderer3D";this.Tc=this.Wc=this.Sc=this.Vc=this.Rc=this.Uc=this.Se=this.Te=r;this.m=[0,0,0];this.pg=r;this.Ce=new Vc;this.Zc=new Vc;this.bd=new Vc;this.Oe=new Vc;this.yd=new Vc;this.Id=new Vc;this.Jd=new Vc;this.Kd=new Vc;this.G={PROGRESSBAR_ENABLED:p,PICKING_ENABLED:p,ORDERING_ENABLED:p,STATISTICS_ENABLED:s,INTERMEDIATE_RENDERING:s}}G(li,ki);li.prototype.__defineGetter__("config",t("G"));u=li.prototype;
u.Mj=function(){this.Tc=this.Wc=this.Sc=this.Vc=this.Rc=this.Uc=r;this.m=[0,0,0]};u.yf=function(a){li.n.yf.call(this,a);var b=a.Od;a=a.Pd;var c=this.mh(b,a);if(c=this.get(c))(c=c.qc)&&(new rh(this.r,this.r.offsetLeft+b+10,this.r.offsetTop+a+10,this.Pb)).Cl(c)};
u.Ha=function(){li.n.Ha.call(this,"experimental-webgl");try{if(this.a.viewport(0,0,this.O,this.H),this.a.clearColor(0,0,0,0),this.a.enable(this.a.BLEND),this.a.blendEquation(this.a.FUNC_ADD),this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA),this.a.enable(this.a.DEPTH_TEST),this.a.depthFunc(this.a.LEQUAL),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.G.PICKING_ENABLED){var a=this.a.createFramebuffer(),b=this.a.createRenderbuffer(),c=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,
c);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.O,this.H,0,this.a.RGB,this.a.UNSIGNED_BYTE,r);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST);this.a.bindFramebuffer(this.a.FRAMEBUFFER,a);this.a.bindRenderbuffer(this.a.RENDERBUFFER,
b);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.O,this.H);this.a.bindRenderbuffer(this.a.RENDERBUFFER,r);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,c,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,b);this.a.bindFramebuffer(this.a.FRAMEBUFFER,r);this.pg=a}}catch(d){j(Error("Exception while accessing GL Context!\n"+d))}a=new sh;(this.ga==r||this.a==r||this.t==r)&&j(Error("Renderer was not initialized properly."));
(a==r||!(a instanceof sh))&&j(Error("Could not add shaders."));b=Object.keys(uh);Object.keys(th).every(function(a){a=th[a];return-1!=this.Md.search(a)||-1!=this.Ad.search(a)}.bind(a))||j(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=uh[a];return-1!=this.Md.search(a)||-1!=this.Ad.search(a)}.bind(a))||j(Error("Could not find all uniforms in the shader sources."));b=this.a.createShader(this.a.FRAGMENT_SHADER);c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,
a.Ad);this.a.shaderSource(c,a.Md);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||j(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||j(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));var e=this.a.createProgram();this.a.attachShader(e,c);this.a.attachShader(e,b);this.a.linkProgram(e);this.a.getProgramParameter(e,this.a.LINK_STATUS)||j(Error("Could not create shader program!\n"+
this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(e)));this.a.useProgram(e);this.Se=e;Object.keys(th).forEach(function(a){a=th[a];this.Ce.set(a,this.a.getAttribLocation(this.Se,a));this.a.enableVertexAttribArray(this.Ce.get(a))}.bind(this));Object.keys(uh).forEach(function(a){a=uh[a];this.Zc.set(a,this.a.getUniformLocation(this.Se,a))}.bind(this));this.Te=a};
u.Za=function(a){li.n.Za.call(this,a);var b=s;this.get(a.ta)&&(b=p);var c=a.ta,d=a.i,e=a.j,f=a.X,g=a.A,h=a.q,k=a.ac,l=a.Z,m=a.o,q=a.u;if(m!=r&&m.q!=r&&m.q.g)this.Za(m);else if(m!=r&&m.g&&this.Za(m),l!=r&&l.q!=r&&l.q.g)this.C.load(l,a);else if(g!=r&&g.q!=r&&g.q.g)this.C.load(g,a);else{if(h!=r&&ka(h))if(a.nc!=r){if(a.nc.he!=h.length||!a.g)return}else{b=0;c=h.length;for(b=0;b<c;b++)this.C.load(h[b],a);return}else{if(h!=r&&h.g){this.C.load(a,a);return}if(q!=r&&q.q!=r&&q.q.g){this.C.load(q,a);return}}if(0<
a.e.length){h=a.e;l=h.length;for(m=m=0;m<l;m++)this.Za(h[m])}if(d){for(h=0;this.Ed;)h++,window.console.log("Possible thread lock avoided: "+h);this.Ed=p;l=a instanceof yh&&a.fb instanceof Ah;b&&(g!=r&&g.g)&&(h=this.Jd.get(c),h!=r&&this.a.isBuffer(h.ha)&&this.a.deleteBuffer(h.ha));h=r;g!=r&&(!b||g.g?(h=a.$b,h==r&&j(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),m=s,g.wa&&(m=p),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,m),m=this.a.createTexture(),
m.Fi=g.qb,this.Kd.set(g.ta,m),this.a.bindTexture(this.a.TEXTURE_2D,m),g.wa?this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,g.Eb,g.Db,0,this.a.RGBA,this.a.UNSIGNED_BYTE,g.wa):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,m.Fi),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),l?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),
this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,r),m=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,m),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),this.a.STATIC_DRAW),h=new Kd(m,h.length,2),g.g=s):h=this.Jd.get(c));Nh(this.C,0.1);if(l)this.Ed=
s,H.na(this.c+".update"),Nh(this.C,0.9);else{if(!b||d.g||k.g){l=k.ia;g=H.d.Pa(l,d.Tb,d.Ub,d.Vb);l=H.d.Pa(l,d.Qb,d.Rb,d.Sb);if(this.Uc===r||g.x<this.Uc)this.Uc=g.x;if(this.Rc===r||l.x>this.Rc)this.Rc=l.x;if(this.Vc===r||g.y<this.Vc)this.Vc=g.y;if(this.Sc===r||l.y>this.Sc)this.Sc=l.y;if(this.Wc===r||g.b<this.Wc)this.Wc=g.b;if(this.Tc===r||l.b>this.Tc)this.Tc=l.b;this.m=[(this.Uc+this.Rc)/2,(this.Vc+this.Sc)/2,(this.Wc+this.Tc)/2];k.g=s}b&&d.g&&(k=this.bd.get(c),k!=r&&this.a.isBuffer(k.ha)&&this.a.deleteBuffer(k.ha));
k=r;!b||d.g?(k=this.a.createBuffer(),d.lb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,k),this.a.bufferData(this.a.ARRAY_BUFFER,d.N,this.a.STATIC_DRAW),k=new Kd(k,d.count,3),d.g=s):k=this.bd.get(c);Nh(this.C,0.3);b&&e.g&&(g=this.bd.get(c),g!=r&&this.a.isBuffer(g.ha)&&this.a.deleteBuffer(g.ha));g=r;!b||e.g?(g=this.a.createBuffer(),e.lb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,g),this.a.bufferData(this.a.ARRAY_BUFFER,e.N,this.a.STATIC_DRAW),g=new Kd(g,e.count,3),e.g=s):g=this.Oe.get(c);Nh(this.C,0.3);b&&
(f&&f.g)&&(e=this.yd.get(c),e!=r&&this.a.isBuffer(e.ha)&&this.a.deleteBuffer(e.ha));e=r;f&&(!b||f.g?(f.length!=d.length&&j(Error("Mismatch between points and point colors.")),e=this.a.createBuffer(),f.lb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,f.N,this.a.STATIC_DRAW),e=new Kd(e,f.count,3),f.g=s):e=this.yd.get(c));Nh(this.C,0.2);b&&(q&&q.g)&&(f=this.Id.get(c),f!=r&&this.a.isBuffer(f.ha)&&this.a.deleteBuffer(f.ha));f=r;q&&(f=q.Lc,!b||q.g?(f.length!=d.length&&
j(Error("Mismatch between points and scalars.")),d=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,d),this.a.bufferData(this.a.ARRAY_BUFFER,f,this.a.STATIC_DRAW),f=new Kd(d,f.length,3),q.g=s):f=this.Id.get(c));Nh(this.C,0.1);b||this.bb.add(a);this.bd.set(c,k);this.Oe.set(c,g);this.yd.set(c,e);this.Jd.set(c,h);this.Id.set(c,f);this.Ed=a.g=s}}else a.g=s}};
function mi(a,b){var c=b.i.xd,c=H.d.Pa(b.ac.ia,c[0],c[1],c[2]),c=H.d.Pa(a.t.s,c.x,c.y,c.b),c=H.f.gb(a.t.va,c);return Math.round(1E3*c)/1E3}u.mh=function(a,b){if(this.G.PICKING_ENABLED){this.Jb(p,s);var c=new Uint8Array(4);this.a.readPixels(a,this.H-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
u.Jb=function(a,b){li.n.Jb.call(this,a,b);var c=this.bb.w,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.pg):this.a.bindFramebuffer(this.a.FRAMEBUFFER,r);this.a.viewport(0,0,this.O,this.H);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var e=this.t.og,f=this.t.s;this.a.uniformMatrix4fv(this.Zc.get("perspective"),s,e);this.a.uniformMatrix4fv(this.Zc.get("view"),s,f);e=this.m;this.a.uniform3f(this.Zc.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
f=this.Ua.length;for(e=0;e<f;++e){var g=this.Ua[e];if(g instanceof R){var h=H.d.Pa(this.t.s,1,0,0),k=H.f.gb(this.t.va,h),h=H.d.Pa(this.t.s,-1,0,0),l=H.f.gb(this.t.va,h),h=H.d.Pa(this.t.s,0,1,0),m=H.f.gb(this.t.va,h),h=H.d.Pa(this.t.s,0,-1,0),q=H.f.gb(this.t.va,h),h=H.d.Pa(this.t.s,0,0,1),v=H.f.gb(this.t.va,h),h=H.d.Pa(this.t.s,0,0,-1),h=H.f.gb(this.t.va,h),w=Math.max(k,m,v,l,q,h);w==k||w==l?zh(g,0):w==m||w==q?zh(g,1):(w==v||w==h)&&zh(g,2)}}if(this.G.ORDERING_ENABLED){k=s;f=this.Ua;g=f.length-1;do if(e=
f[g],e instanceof R&&e.Na){l=e.Gb;k=e.S.e;1==l?k=e.T.e:2==l&&(k=e.cb.e);l=k.length;m=k[0];m.M=mi(this,m);m.Y=e.Y;q=k[l-1];q.M=mi(this,q);q.Y=e.Y;q=Math.round(1E3*((q.M-m.M)/l))/1E3;for(v=v=1;v<l-1;v++)h=Math.round(1E3*(m.M+v*q))/1E3,k[v].M=h,k[v].Y=e.Y;k=p}while(g--);f=this.bb.w;g=f.length-1;do if(e=f[g],e.Ma&&!(1==e.Y||e instanceof yh))e.M=mi(this,e),k=p;while(g--);k&&this.bb.sort()}if(f=!a&&b!=r&&b&&this.G.STATISTICS_ENABLED)var x=0,z=0,C=0,E=0;var e=this.Ce,g=e.get("vertexPosition"),k=e.get("vertexNormal"),
l=e.get("vertexColor"),m=e.get("vertexTexturePos"),q=e.get("vertexScalar"),e=this.Zc,v=e.get("usePicking"),h=e.get("useObjectColor"),w=e.get("objectColor"),A=e.get("useScalars"),B=e.get("scalarsReplaceMode"),J=e.get("scalarsMin"),I=e.get("scalarsMax"),P=e.get("scalarsMinColor"),K=e.get("scalarsMaxColor"),L=e.get("scalarsInterpolation"),U=e.get("scalarsMinThreshold"),Z=e.get("scalarsMaxThreshold"),Y=e.get("objectOpacity"),na=e.get("labelmapOpacity"),ra=e.get("useTexture"),N=e.get("useLabelMapTexture"),
ic=e.get("textureSampler"),jc=e.get("textureSampler2"),qi=e.get("volumeLowerThreshold"),ri=e.get("volumeUpperThreshold"),si=e.get("volumeScalarMin"),ti=e.get("volumeScalarMax"),ui=e.get("volumeWindowLow"),vi=e.get("volumeWindowHigh"),wi=e.get("volumeScalarMinColor"),xi=e.get("volumeScalarMaxColor"),Qg=e.get("volumeTexture"),yi=e.get("objectTransform"),zi=e.get("pointSize"),e=d;do{var fa=c[d-e];if(fa){var ia=r;fa instanceof yh&&fa.fb&&(ia=fa.fb);if(fa.Ma&&(!ia||ia.Ma)){var Aa=fa.ta,$a=fa.Qc,Ja=this.bd.get(Aa),
nb=this.Oe.get(Aa),lf=this.yd.get(Aa),ac=this.Id.get(Aa),mf=this.Jd.get(Aa);this.a.bindBuffer(this.a.ARRAY_BUFFER,Ja.ha);this.a.vertexAttribPointer(g,Ja.vb,this.a.FLOAT,s,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,nb.ha);this.a.vertexAttribPointer(k,nb.vb,this.a.FLOAT,s,0,0);a?this.a.uniform1i(v,p):this.a.uniform1i(v,s);lf&&!a&&!$a?(this.a.uniform1i(h,s),this.a.bindBuffer(this.a.ARRAY_BUFFER,lf.ha),this.a.vertexAttribPointer(l,lf.vb,this.a.FLOAT,s,0,0)):(nb=1,$a&&!a&&(nb=0),this.a.uniform1i(h,nb),
nb=fa.Lb,a&&(nb=[Math.floor(Aa%65025%255)/255,Math.floor(Aa%65025/255)/255,Math.floor(Aa/65025)/255]),this.a.uniform3f(w,parseFloat(nb[0]),parseFloat(nb[1]),parseFloat(nb[2])),this.a.vertexAttribPointer(l,Ja.vb,this.a.FLOAT,s,0,0));ac&&!a&&!$a?(this.a.uniform1i(A,p),this.a.uniform1i(B,fa.u.rg),Aa=fa.u.zb,$a=fa.u.xb,this.a.uniform3f(P,parseFloat(Aa[0]),parseFloat(Aa[1]),parseFloat(Aa[2])),this.a.uniform3f(K,parseFloat($a[0]),parseFloat($a[1]),parseFloat($a[2])),this.a.uniform1f(U,parseFloat(fa.u.Q)),
this.a.uniform1f(Z,parseFloat(fa.u.U)),this.a.uniform1f(J,parseFloat(fa.u.La)),this.a.uniform1f(I,parseFloat(fa.u.Ga)),this.a.uniform1i(L,parseInt(fa.u.Fe,10)),this.a.bindBuffer(this.a.ARRAY_BUFFER,ac.ha),this.a.vertexAttribPointer(q,ac.vb,this.a.FLOAT,s,0,0)):(this.a.uniform1i(A,s),this.a.vertexAttribPointer(q,Ja.vb,this.a.FLOAT,s,0,0));this.a.uniform1f(Y,parseFloat(fa.Y));fa.A&&mf&&!a?(this.a.uniform1i(ra,p),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.Kd.get(fa.A.ta)),
this.a.uniform1i(ic,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,mf.ha),this.a.vertexAttribPointer(m,mf.vb,this.a.FLOAT,s,0,0),this.a.uniform1i(Qg,s)):(this.a.uniform1i(ra,s),this.a.vertexAttribPointer(m,Ja.vb,this.a.FLOAT,s,0,0));ia&&(this.a.uniform1i(Qg,p),this.a.uniform1f(qi,ia.Q),this.a.uniform1f(ri,ia.U),this.a.uniform1f(si,ia.La),this.a.uniform1f(ti,ia.Ga),Aa=ia.zb,$a=ia.xb,this.a.uniform3f(wi,parseFloat(Aa[0]),parseFloat(Aa[1]),parseFloat(Aa[2])),this.a.uniform3f(xi,parseFloat($a[0]),parseFloat($a[1]),
parseFloat($a[2])),this.a.uniform1f(ui,ia.W),this.a.uniform1f(vi,ia.V),ac=ia.o,this.a.uniform1i(N,s),ia.Na?this.a.uniform1f(Y,parseFloat(ia.Y)):ac&&ac.Ma&&(ia=fa.o.ta,this.a.uniform1i(N,p),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.Kd.get(ia)),this.a.uniform1i(jc,1),this.a.uniform1f(na,ac.Y)));this.a.uniformMatrix4fv(yi,s,fa.ac.ia);ia=1;"POINTS"==fa.ja&&(ia=fa.Xc);this.a.uniform1f(zi,ia);ia=-1;fa.ja==sd?(ia=this.a.TRIANGLES,f&&(z+=Ja.ub/3)):"LINES"==fa.ja?(this.a.lineWidth(fa.uc),
ia=this.a.LINES,f&&(C+=Ja.ub/2)):"POINTS"==fa.ja?(ia=this.a.POINTS,f&&(E+=Ja.ub)):"TRIANGLE_STRIPS"==fa.ja?(ia=this.a.TRIANGLE_STRIP,f&&(z+=Ja.ub/3)):"POLYGONS"==fa.ja&&(ia=0==Ja.ub%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,f&&(z+=Ja.ub/3));f&&(x+=Ja.ub);this.a.drawArrays(ia,0,Ja.ub)}}}while(--e);f&&(c="Objects: "+d+" | "+("Vertices: "+x+" | "),c+="Triangles: "+Math.round(z)+" | ",c+="Lines: "+C+" | ",c+="Points: "+E+" | ",c+="Textures: "+this.Kd.Xd(),window.console.log(c))}};
u.Ud=function(){this.Te=r;delete this.Te;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);li.n.Ud.call(this)};F("X.renderer3D",li);F("X.renderer3D.prototype.init",li.prototype.Ha);F("X.renderer3D.prototype.add",li.prototype.add);F("X.renderer3D.prototype.onShowtime",li.prototype.ih);F("X.renderer3D.prototype.onRender",li.prototype.gh);F("X.renderer3D.prototype.get",li.prototype.get);F("X.renderer3D.prototype.render",li.prototype.lc);F("X.renderer3D.prototype.destroy",li.prototype.Ud);
F("X.renderer3D.prototype.resetBoundingBox",li.prototype.Mj);F("X.renderer3D.prototype.resetViewAndRender",li.prototype.Hc);F("X.renderer3D.prototype.pick",li.prototype.mh);function ni(){V.call(this);this.c="mesh";Ea(this,new Uc)}G(ni,V);F("X.mesh",ni);function oi(){ki.call(this);this.c="renderer2D";this.hg=this.Ge=this.fg=this.Ee=this.Ab=r;this.Hd=this.Xb=this.Yb=this.Ue=this.Ve=0;this.V=this.W=this.U=this.Q=this.dg=-1}G(oi,ki);oi.prototype.oj=aa();oi.prototype.xj=aa();oi.prototype.zf=function(a){oi.n.zf.call(this,a);var b=this.Ua[0];if(b){var c=this.Ab;b["index"+c]=a.J?b["index"+c]+1:b["index"+c]-1;eval("this.onScroll();")}};
oi.prototype.yj=function(a){var b=this.Ua[0];if(b){var c=b.V-b.W,d=c/2,e=parseInt(c+c/15*-a.Ye,10);a=parseInt(d+d/15*a.Le,10);c==e&&e++;d==a&&a++;b.W-=parseInt(d-a,10);b.W-=parseInt(c-e,10);b.W=Math.max(b.W,b.La);b.V-=parseInt(d-a,10);b.V+=parseInt(c-e,10);b.V=Math.min(b.V,b.Ga);eval("this.onWindowLevel();")}};oi.prototype.__defineGetter__("orientation",t("Ab"));
oi.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"X"!=a&&("Y"!=a&&"Z"!=a)&&j(Error("Invalid orientation."));this.Ab=a});u=oi.prototype;u.Ha=function(){this.Ab||j(Error("No 2D orientation set."));oi.n.Ha.call(this,"2d");this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.ga.width,this.ga.height);this.Ee=Ee("canvas");this.Ge=Ee("canvas");O(this.t,"g",this.yj.bind(this))};u.rotate=function(){this.Hd++};u.Pj=function(){this.Hd--};
u.Hc=function(){oi.n.Hc.call(this);pi(this);var a=this.Ua[0];a&&(a.V=a.Ga,a.W=a.La)};
u.Za=function(a){oi.n.Za.call(this,a);var b=s;this.get(a.ta)&&(b=p);if(a instanceof R){var c=a.q,d=a.o,e=a.Z;if(d!=r&&d.q!=r&&d.q.g)this.Za(d);else if(e!=r&&e.q!=r&&e.q.g)this.C.load(e,a);else{if(c!=r&&ka(c))if(a.nc!=r){if(a.nc.he!=c.length||b&&!a.g)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.C.load(c[b],a);return}else if(c!=r&&c.g){this.C.load(a,a);return}var d=c=0,e=a.$,f=a.I;"X"==this.Ab?(this.Zb=a.S.e,c=e[1],d=e[2],this.Yb=f[1],this.Xb=f[2]):"Y"==this.Ab?(this.Zb=a.T.e,c=e[0],d=e[2],this.Yb=
f[0],this.Xb=f[2]):"Z"==this.Ab&&(this.Zb=a.cb.e,c=e[0],d=e[1],this.Yb=f[0],this.Xb=f[1]);this.Ve=c;this.Ue=d;e=this.Ee;e.width=c;e.height=d;f=this.Ge;f.width=c;f.height=d;this.fg=e.getContext("2d");this.hg=f.getContext("2d");b||(this.bb.add(a),pi(this))}}};function pi(a){var b=Math.min(a.O/(a.Ve*a.Yb),a.H/(a.Ue*a.Xb));a.t.s[14]=b}
u.Jb=function(a,b){oi.n.Jb.call(this,a,b);if(0!=this.bb.w.length){var c=this.O,d=this.H,e=this.t.s;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e[12],g=-1*e[13],h=Math.max(e[14],0.6);this.a.setTransform(h,0,0,h,f,g);var e=this.Ua[0],k=e["index"+this.Ab],l=this.Zb[parseInt(k,10)],m=l.A.wa,l=l.o,q=r;l&&(q=l.wa);var v=this.Ve,w=this.Ue,x=this.fg,z=this.hg,C=x.getImageData(0,0,v,w),E=z.getImageData(0,0,v,w),A=C.data,B=E.data,J=A.length,I=e.Ga,P=e.Q,K=e.U,L=e.W/I,U=e.V/I;if(this.dg!=
k||this.Q!=P||this.U!=K||this.W!=L||this.V!=U){var Z=0;do{var Y=[0,0,0,0],na=[0,0,0,0],ra=m[Z]/255*I,N=m[Z],N=(N/255-L)/(U-L),N=255*N;ra>=P&&ra<=K&&(Y=new S(e.zb[0],e.zb[1],e.zb[2]),Y=(new S(e.xb[0],e.xb[1],e.xb[2])).scale(N).add(Y.scale(255-N)),Y=[Math.floor(Y.x),Math.floor(Y.y),Math.floor(Y.b),255],l&&(na=[q[Z],q[Z+1],q[Z+2],q[Z+3]]));N=J-1-Z;A[N-3]=Y[0];A[N-2]=Y[1];A[N-1]=Y[2];A[N]=Y[3];B[N-3]=na[0];B[N-2]=na[1];B[N-1]=na[2];B[N]=na[3];Z+=4}while(Z<J);x.putImageData(C,0,0);z.putImageData(E,0,0);
this.dg=k;this.Q=P;this.U=K;this.W=L;this.V=U}this.a.globalAlpha=1;this.a.translate(c/2/h,d/2/h);this.a.rotate(0.5*Math.PI*this.Hd);switch(this.Hd%4){case 1:c=f;f=g;g=-c;break;case 2:f*=-1;g*=-1;break;case 3:c=f,f=-g,g=c}f=-v*this.Yb/2+f;g=-w*this.Xb/2+g;this.a.drawImage(this.Ee,f,g,v*this.Yb,w*this.Xb);l&&e.o.Ma&&(this.a.globalAlpha=e.o.Y,this.a.drawImage(this.Ge,f,g,v*this.Yb,w*this.Xb))}};F("X.renderer2D",oi);F("X.renderer2D.prototype.init",oi.prototype.Ha);F("X.renderer2D.prototype.add",oi.prototype.add);
F("X.renderer2D.prototype.onShowtime",oi.prototype.ih);F("X.renderer2D.prototype.onRender",oi.prototype.gh);F("X.renderer2D.prototype.onScroll",oi.prototype.oj);F("X.renderer2D.prototype.onWindowLevel",oi.prototype.xj);F("X.renderer2D.prototype.get",oi.prototype.get);F("X.renderer2D.prototype.rotate",oi.prototype.rotate);F("X.renderer2D.prototype.rotateCounter",oi.prototype.Pj);F("X.renderer2D.prototype.resetViewAndRender",oi.prototype.Hc);F("X.renderer2D.prototype.render",oi.prototype.lc);
F("X.renderer2D.prototype.destroy",oi.prototype.Ud);function Ai(){V.call(this);this.c="fibers";Ea(this,new Uc)}G(Ai,V);F("X.fibers",Ai);
